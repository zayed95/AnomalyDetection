"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[1241],{6564:function(e,t,n){n.d(t,{I:function(){return h}});var s=n(68248),o=n(46709),r=n(95379),i=n(7655),l=n(27757),d=n(66916),a=n(27556),c=n(73408);const h=({chartsSearchFilter:e})=>{const t=(0,r.g_)(),{theme:n}=(0,l.u)(),[h,u]=(0,o.useState)((()=>null!==e&&void 0!==e?e:"")),[p,m]=(0,o.useState)(!1),{formatMessage:f}=(0,i.A)(),g=(0,o.useCallback)((e=>{t((t=>({...t,chartsSearchFilter:e}))),m(!1)}),[t]),_=(0,a.YQ)(g,150);return(0,c.Y)(d.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsfilterinput.tsx_30",role:"searchbox",prefix:(0,c.Y)("div",{css:(0,s.AH)({width:n.general.iconFontSize,lineHeight:0},""),children:p?(0,c.Y)(l.S,{size:"small"}):(0,c.Y)(d.S,{})}),value:h,allowClear:!0,onChange:e=>{u(e.target.value),m(!0),_(e.target.value)},placeholder:f({id:"Xs1oJm",defaultMessage:"Search metric charts"})})}},47946:function(e,t,n){n.d(t,{L:function(){return d}});var s=n(11522),o=n(5690),r=n(44105),i=n(46709),l=n(56530);const d=({runUuids:e,runUuidsIsActive:t,autoRefreshEnabled:n,enabled:d})=>{const a=(0,l.wA)(),c=e.slice(0,r.Lf).join(",");(0,i.useEffect)((()=>{d&&!n&&c.split(",").forEach((e=>{e&&a((0,o.LN)(e))}))}),[c,a,n,d]);const h=(0,i.useRef)(void 0),u=(0,i.useRef)(n&&d);u.current=n;const p=t.slice(0,r.Lf).join(",");(0,i.useEffect)((()=>{let e=!1;if(!d||!n)return;const t=async e=>{const t=c.split(","),n=p.split(",");(e?t.filter(((e,t)=>"true"===n[t])):t).forEach((t=>{t&&a((0,o.LN)(t,e))}))},i=async()=>{if(u.current&&!e){try{await t(!0)}catch(n){s.A.logErrorAndNotifyUser(n)}clearTimeout(h.current),u.current&&!e&&(h.current=window.setTimeout(i,r.zD))}};return t(!1).then(i),()=>{t(!0),e=!0,clearTimeout(h.current)}}),[a,c,p,n,d])}},61293:function(e,t,n){n.d(t,{$:function(){return o}});var s=n(46709);const o=()=>{const[e,t]=(0,s.useState)("visible"===document.visibilityState);return(0,s.useEffect)((()=>{document.addEventListener("visibilitychange",(e=>{t("visible"===document.visibilityState)}))}),[]),e}},67901:function(e,t,n){n.d(t,{f:function(){return _}});var s=n(68248),o=n(27757),r=n(27299),i=n(79081),l=n(53274),d=n(46709),a=n(27476),c=n(7655),h=n(40724),u=n(73408);var p={name:"ozd7xs",styles:"flex-shrink:0"},m={name:"1v0pok0",styles:"min-width:300px"},f={name:"11jf4ye",styles:"display:flex;gap:8px"},g={name:"bsla3r",styles:"max-height:300px;overflow:auto"};const _=({globalLineChartConfig:e,metricKeyList:t,updateUIState:n})=>{const{theme:_}=(0,o.u)(),w=(0,c.A)(),{lineSmoothness:M,selectedXAxisMetricKey:D,xAxisKey:v}=e||{},C=(0,d.useCallback)((e=>n((t=>({...t,globalLineChartConfig:{...t.globalLineChartConfig,...e}})))),[n]),I=v===l.fj.METRIC,b=w.formatMessage({id:"Kkr/RI",defaultMessage:"Configure charts"});return(0,u.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,u.Y)(i.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_44",content:b,children:(0,u.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,u.Y)(o.B,{componentId:"mlflow.charts.controls.global_chart_setup_dropdown",icon:(0,u.Y)(r.GearIcon,{}),"aria-label":b,css:p})})}),(0,u.FD)(r.DropdownMenu.Content,{align:"end",css:m,children:[(0,u.FD)(r.DropdownMenu.Group,{role:"region","aria-label":w.formatMessage({id:"Jp79WH",defaultMessage:"X-axis"}),children:[(0,u.Y)(r.DropdownMenu.Label,{css:f,children:(0,u.Y)(h.A,{id:"Jp79WH",defaultMessage:"X-axis"})}),(0,u.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_68",checked:v===l.fj.STEP,onClick:()=>C({xAxisKey:l.fj.STEP}),children:[(0,u.Y)(r.DropdownMenu.ItemIndicator,{}),(0,u.Y)(h.A,{id:"53b+wP",defaultMessage:"Step"})]}),(0,u.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_78",checked:v===l.fj.TIME,onClick:()=>C({xAxisKey:l.fj.TIME}),children:[(0,u.Y)(r.DropdownMenu.ItemIndicator,{}),(0,u.Y)(h.A,{id:"/QYbzP",defaultMessage:"Time (wall)"})]}),(0,u.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_88",checked:v===l.fj.TIME_RELATIVE,onClick:()=>C({xAxisKey:l.fj.TIME_RELATIVE}),children:[(0,u.Y)(r.DropdownMenu.ItemIndicator,{}),(0,u.Y)(h.A,{id:"sIC5K3",defaultMessage:"Time (relative)"})]}),(0,u.FD)(r.DropdownMenu.Sub,{children:[(0,u.FD)(r.DropdownMenu.SubTrigger,{css:(0,s.AH)({paddingLeft:_.spacing.xs+_.spacing.sm},""),children:[(0,u.Y)(r.DropdownMenu.IconWrapper,{children:(0,u.Y)(i.C,{css:(0,s.AH)({visibility:I?"visible":"hidden"},"")})}),(0,u.Y)(h.A,{id:"yCncIr",defaultMessage:"Metric"})]}),(0,u.Y)(r.DropdownMenu.SubContent,{css:g,children:t.map((e=>(0,u.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsglobalchartsettingsdropdown.tsx_118",checked:D===e&&I,onClick:()=>C({xAxisKey:l.fj.METRIC,selectedXAxisMetricKey:e}),children:[(0,u.Y)(r.DropdownMenu.ItemIndicator,{}),e]},e)))})]})]}),(0,u.FD)(r.DropdownMenu.Group,{role:"region","aria-label":w.formatMessage({id:"qkRBUr",defaultMessage:"Line smoothing"}),children:[(0,u.Y)(r.DropdownMenu.Label,{children:(0,u.Y)(h.A,{id:"qkRBUr",defaultMessage:"Line smoothing"})}),(0,u.Y)("div",{css:(0,s.AH)({padding:_.spacing.sm},""),children:(0,u.Y)(a.o,{min:0,max:100,onChange:e=>C({lineSmoothness:e}),value:M||0})})]})]})]})}},71206:function(e,t,n){n.d(t,{j:function(){return m}});var s=n(46709),o=n(56530),r=n(84173),i=n(29452),l=n(14466),d=n(5690),a=n(43233),c=n(73408);class h extends s.Component{constructor(...e){super(...e),this.formRef=s.createRef(),this.handleRenameRun=e=>{const t=e[l.m],n=(0,a.yk)();return this.props.updateRunApi(this.props.runUuid,t,n).then((()=>{var e,t;return null===(e=(t=this.props).onSuccess)||void 0===e?void 0:e.call(t)}))}}render(){const{isOpen:e=!1,runName:t}=this.props;return(0,c.Y)(i.B,{title:this.props.intl.formatMessage({id:"+Dnww0",defaultMessage:"Rename Run"}),okText:this.props.intl.formatMessage({id:"7NKkk1",defaultMessage:"Save"}),isOpen:e,handleSubmit:this.handleRenameRun,onClose:this.props.onClose,children:(0,c.Y)(l.P,{type:"run",name:t,innerRef:this.formRef,visible:e,validator:async(e,t)=>{if("string"===typeof t&&t.length&&!t.trim())throw new Error(this.props.intl.formatMessage({id:"ze1m7Z",defaultMessage:"Run name cannot consist only of whitespace!"}));return!0}})})}}const u={updateRunApi:d.FZ},p=(0,r.Ay)(h),m=(0,o.Ng)(void 0,u)(p)},79196:function(e,t,n){n.d(t,{o:function(){return l}});var s=n(49708),o=n(76118),r=n(61077);const i=async({queryKey:[,e]})=>{const t=(0,o.chunk)(e,100);return Promise.all(t.map((e=>{const t=new URLSearchParams;for(const n of e)t.append("model_ids",n);return(0,r.ff)((0,r.we)(`ajax-api/2.0/mlflow/logged-models:batchGet?${t.toString()}`),"GET")})))},l=({modelIds:e},t)=>{const{data:n,isLoading:o,isFetching:r,refetch:l,error:d}=(0,s.I)({queryKey:(a=null!==e&&void 0!==e?e:[],["GET_LOGGED_MODELS",a]),queryFn:i,select:e=>null===e||void 0===e?void 0:e.flatMap((e=>(null===e||void 0===e?void 0:e.models)||[])),retry:!1,...t});var a;return{isLoading:o,isFetching:r,data:n,refetch:l,error:d}}},94721:function(e,t,n){var s=n(46709),o=n(5690),r=n(56530),i=n(11522),l=n(84173),d=n(27757),a=n(79081),c=n(90142),h=n(73408);class u extends s.Component{constructor(e){super(e),this.state={deletingMode:null},this.handleDelete=this.handleDelete.bind(this),this.handleDeleteSelected=this.handleDeleteSelected.bind(this),this.handleDeleteWithChildren=this.handleDeleteWithChildren.bind(this),this.onRequestClose=this.onRequestClose.bind(this)}getChildRunIdsToDelete(){const{childRunIdsBySelectedParent:e,selectedRunIds:t}=this.props,n=new Set(t),s=new Set;return Object.values(e).forEach(((e=[])=>{e.forEach((e=>{n.has(e)||s.add(e)}))})),Array.from(s)}getRunIdsToDelete(e){if(!e)return this.props.selectedRunIds;const t=this.getChildRunIdsToDelete();return[...this.props.selectedRunIds,...t]}handleDelete(e){return this.state.deletingMode?Promise.resolve():(this.setState({deletingMode:e?"withChildren":"selected"}),this.deleteRuns(e))}handleDeleteSelected(){return this.handleDelete(!1)}handleDeleteWithChildren(){return this.handleDelete(!0)}deleteRuns(e){const t=[];return this.getRunIdsToDelete(e).forEach((e=>{t.push(this.props.deleteRunApi(e))})),Promise.all(t).catch((()=>{const e=`${this.props.intl.formatMessage({id:"tdmVWN",defaultMessage:"While deleting an experiment run, an error occurred."})}`;this.props.openErrorModal(e)})).then((()=>{var e,t;null===(e=(t=this.props).onSuccess)||void 0===e||e.call(t)})).finally((()=>{this.setState({deletingMode:null}),this.props.onClose()}))}onRequestClose(){this.state.deletingMode||this.props.onClose()}render(){const e=this.props.selectedRunIds.length,t=this.getChildRunIdsToDelete().length,n=t>0,s=e+t,{deletingMode:o}=this.state,r="selected"===o,l="withChildren"===o,c=(0,h.Y)(d.B,{componentId:"delete-selected",onClick:this.handleDeleteSelected,disabled:l,loading:r,type:"primary",children:"Delete selected"},"delete-selected"),u=n?(0,h.Y)(d.B,{componentId:"delete-selected-children",type:"primary",onClick:this.handleDeleteWithChildren,disabled:r,loading:l,children:"Delete selected and children"},"delete-selected-children"):null,p=[(0,h.Y)(d.B,{componentId:"cancel",onClick:this.onRequestClose,disabled:!!o,children:"Cancel"},"cancel"),c,...u?[u]:[]];return(0,h.Y)(a.d,{componentId:"delete-run-modal","data-testid":"delete-run-modal",title:`Delete Experiment ${i.A.pluralize("Run",e)}`,visible:this.props.isOpen,onCancel:this.onRequestClose,footer:p,children:(0,h.FD)("div",{className:"modal-explanatory-text",children:[(0,h.Y)("p",{children:(0,h.FD)("b",{children:["Selected ",e," experiment ",i.A.pluralize("run",e),"."]})}),n?(0,h.FD)("p",{children:["The selected run has ",t," child ",i.A.pluralize("run",t),". Delete this run alone or all ",s,"?"]}):null,""]})})}}const p={deleteRunApi:o.IX,openErrorModal:o.Yi};t.A=(0,r.Ng)(((e,t)=>{var n;const s=(null===(n=e.entities)||void 0===n?void 0:n.tagsByRunUuid)||{},o={};Object.entries(s).forEach((([e,t])=>{const n=null===t||void 0===t?void 0:t[c.Ol],s=null===n||void 0===n?void 0:n.value;s&&(o[s]||(o[s]=[]),o[s].push(e))}));const r={};return t.selectedRunIds.forEach((e=>{const t=(e=>{const t=[],n=[...o[e]||[]],s=new Set;for(;n.length;){const e=n.pop();if(e&&!s.has(e)){s.add(e),t.push(e);const r=o[e];r&&n.push(...r)}}return t})(e);t.length&&(r[e]=t)})),{childRunIdsBySelectedParent:r}}),p)((0,l.Ay)(u))}}]);
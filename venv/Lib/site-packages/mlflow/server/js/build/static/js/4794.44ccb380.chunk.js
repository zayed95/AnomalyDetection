"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2156,4794],{7306:function(e,t,r){r.d(t,{_:function(){return f},n:function(){return p}});var n=r(27757),a=r(79081),o=r(27299),i=r(46709),s=r(7655),l=r(77680),d=r(40724),c=r(24523),u=r(73408);var m={name:"mfyowb",styles:"border:0;background:none;padding:0;line-height:0;cursor:pointer"};const f=({exampleEntityName:e="my_model_name"})=>{const{formatMessage:t}=(0,s.A)(),r=(0,l.zR)({id:"wMG8+P",defaultMessage:"To search by tags or by names and tags, use a simplified version{newline}of the SQL {whereBold} clause."}),o=t(r,{newline:" ",whereBold:"WHERE"});return(0,u.FD)(n.aw.Root,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_46",children:[(0,u.Y)(n.aw.Trigger,{"aria-label":o,css:m,children:(0,u.Y)(a.I,{})}),(0,u.FD)(n.aw.Content,{align:"start",children:[(0,u.FD)("div",{children:[(0,u.Y)(d.A,{...r,values:{newline:(0,u.Y)("br",{}),whereBold:(0,u.Y)("b",{children:"WHERE"})}})," ",(0,u.Y)(d.A,{id:"3bagxW",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,u.Y)(n.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_61",href:c.Lm+"#syntax",openInNewTab:!0,children:e})}}),(0,u.Y)("br",{}),(0,u.Y)("br",{}),(0,u.Y)(d.A,{id:"U3btBc",defaultMessage:"Examples:"}),(0,u.Y)("br",{}),'\u2022 tags.my_key = "my_value"',(0,u.Y)("br",{}),'\u2022 name ILIKE "%',e,'%" AND tags.my_key = "my_value"']}),(0,u.Y)(n.aw.Arrow,{})]})]})},p=({searchFilter:e,onSearchFilterChange:t,isFiltered:r})=>{const a=(0,s.A)(),[l,c]=(0,i.useState)(e);(0,i.useEffect)((()=>{c(e)}),[e]);return(0,u.FD)(o.TableFilterLayout,{children:[(0,u.Y)(o.TableFilterInput,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_118",placeholder:a.formatMessage({id:"6Nk5AH",defaultMessage:"Filter registered models by name or tags"}),onSubmit:()=>{t(l)},onClear:()=>{c(""),t("")},onChange:e=>c(e.target.value),"data-testid":"model-search-input",suffix:(0,u.Y)(f,{}),value:l,showSearchButton:!0}),r&&(0,u.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_152",type:"tertiary",onClick:()=>{t("")},"data-testid":"models-list-filters-reset",children:(0,u.Y)(d.A,{id:"n/l2ft",defaultMessage:"Reset filters"})})]})}},22156:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var n=r(60312),a=r(49708),o=r(46709),i=r(59795);const s=({queryKey:e})=>{const[,{searchFilter:t,pageToken:r,experimentId:n}]=e;return i.M.listRegisteredPrompts(t,r,n)};var l=r(79081),d=r(27299),c=r(27757),u=r(40724),m=r(7306),f=r(73408);const p=({searchFilter:e,onSearchFilterChange:t})=>(0,f.Y)(d.TableFilterLayout,{children:(0,f.Y)(d.TableFilterInput,{placeholder:"Search prompts by name or tags",componentId:"mlflow.prompts.list.search",value:e,onChange:e=>t(e.target.value),suffix:(0,f.Y)(m._,{exampleEntityName:"my-prompt-name"})})});var g=r(68248),v=r(76256),h=r(90061),y=r(43617),w=r(7655),x=r(181),Y=r(59281);var _={name:"zjik7",styles:"display:flex"},M={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},P={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const b=({row:{original:e},table:{options:{meta:t}}})=>{var r;const n=(0,w.A)(),{onEditTags:a}=t,o=(null===e||void 0===e||null===(r=e.tags)||void 0===r?void 0:r.filter((e=>(0,x.oD)(e.key))))||[],i=o.length>0;return(0,f.FD)("div",{css:_,children:[(0,f.Y)("div",{css:M,children:null===o||void 0===o?void 0:o.map((e=>(0,f.Y)(Y.t,{tag:e},e.key)))}),(0,f.Y)(c.B,{componentId:"mlflow.prompts.list.tag.add",size:"small",icon:i?(0,f.Y)(d.PencilIcon,{}):void 0,onClick:()=>null===a||void 0===a?void 0:a(e),"aria-label":n.formatMessage({id:"lA8QO2",defaultMessage:"Edit tags"}),children:i?void 0:(0,f.Y)(u.A,{id:"iDpAK8",defaultMessage:"Add tags"}),css:P,type:"tertiary"})]})};var T=r(91105),I=r(60284);const F=({row:{original:e},getValue:t,table:{options:{meta:r}}})=>{const n=t(),{experimentId:a}=r||{};return e.name?(0,f.Y)(T.N_,{to:I.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name),a),children:n}):n};var k=r(11522);const A=({row:{original:e},getValue:t})=>{const r=t();return r?(0,f.Y)(c.T.Text,{children:(0,f.Y)(u.A,{id:"sM0MBJ",defaultMessage:"Version {version}",values:{version:r}})}):null};var E=r(76118);var R={name:"1h3rtzg",styles:"align-items:center"};const C=({prompts:e,hasNextPage:t,hasPreviousPage:r,isLoading:n,isFiltered:a,onNextPage:i,onPreviousPage:s,onEditTags:l,experimentId:m})=>{const{theme:p}=(0,c.u)(),x=(()=>{const e=(0,w.A)();return(0,o.useMemo)((()=>[{header:e.formatMessage({id:"tzA/LZ",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:F},{header:e.formatMessage({id:"bmd4rb",defaultMessage:"Latest version"}),cell:A,accessorFn:({latest_versions:e})=>{var t;return null===(t=(0,E.first)(e))||void 0===t?void 0:t.version},id:"latestVersion"},{header:e.formatMessage({id:"FiKsFK",defaultMessage:"Last modified"}),id:"lastModified",accessorFn:({last_updated_timestamp:t})=>k.A.formatTimestamp(t,e)},{header:e.formatMessage({id:"KMVqUP",defaultMessage:"Tags"}),accessorKey:"tags",id:"tags",cell:b}]),[e])})(),Y=(0,v.L)("mlflow/server/js/src/experiment-tracking/pages/prompts/components/PromptsListTable.tsx",{data:null!==e&&void 0!==e?e:[],columns:x,getCoreRowModel:(0,h.HT)(),getRowId:(e,t)=>{var r;return null!==(r=e.name)&&void 0!==r?r:t.toString()},meta:{onEditTags:l,experimentId:m}});return(0,f.FD)(d.Table,{scrollable:!0,pagination:(0,f.Y)(d.CursorPagination,{hasNextPage:t,hasPreviousPage:r,onNextPage:i,onPreviousPage:s,componentId:"mlflow.prompts.list.pagination"}),empty:(()=>{const t=!n&&(0,E.isEmpty)(e);return t&&a?(0,f.Y)(d.Empty,{image:(0,f.Y)(d.NoIcon,{}),title:(0,f.Y)(u.A,{id:"hlpNRa",defaultMessage:"No prompts found"}),description:null}):t?(0,f.Y)(d.Empty,{title:(0,f.Y)(u.A,{id:"/fwKFW",defaultMessage:"No prompts created"}),description:(0,f.Y)(u.A,{id:"WM5IeI",defaultMessage:'Use "Create prompt" button in order to create a new prompt'})}):null})(),children:[(0,f.Y)(d.TableRow,{isHeader:!0,children:Y.getLeafHeaders().map((e=>(0,f.Y)(d.TableHeader,{componentId:"mlflow.prompts.list.table.header",children:(0,y.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),n?(0,f.Y)(d.TableSkeletonRows,{table:Y}):Y.getRowModel().rows.map((e=>(0,f.Y)(d.TableRow,{css:(0,g.AH)({height:p.general.buttonHeight},""),children:e.getAllCells().map((e=>(0,f.Y)(d.TableCell,{css:R,children:(0,y.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})};var N=r(73227),S=r(60527),D=r(55570),L=r(91113),K=r(68079),B=r(27556);var H={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},W={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};var z=(0,D.X)(L.A.mlflowServices.EXPERIMENTS,(({experimentId:e}={})=>{const[t,r]=(0,o.useState)(""),i=(0,T.Zp)(),[m]=(0,B.d7)(t,500),{data:g,error:v,refetch:h,hasNextPage:y,hasPreviousPage:w,isLoading:x,onNextPage:Y,onPreviousPage:_}=(({searchFilter:e,experimentId:t}={})=>{var r,n,i,l;const d=(0,o.useRef)([]),[c,u]=(0,o.useState)(void 0),m=(0,a.I)(["prompts_list",{searchFilter:e,pageToken:c,experimentId:t}],{queryFn:s,retry:!1}),f=(0,o.useCallback)((()=>{var e;d.current.push(c),u(null===(e=m.data)||void 0===e?void 0:e.next_page_token)}),[null===(r=m.data)||void 0===r?void 0:r.next_page_token,c]),p=(0,o.useCallback)((()=>{const e=d.current.pop();u(e)}),[]);return{data:null===(n=m.data)||void 0===n?void 0:n.registered_models,error:null!==(i=m.error)&&void 0!==i?i:void 0,isLoading:m.isLoading,hasNextPage:void 0!==(null===(l=m.data)||void 0===l?void 0:l.next_page_token),hasPreviousPage:Boolean(c),onNextPage:f,onPreviousPage:p,refetch:m.refetch}})({experimentId:e,searchFilter:m}),{EditTagsModal:M,showEditPromptTagsModal:P}=(0,N.i)({onSuccess:h}),{CreatePromptModal:b,openModal:F}=(0,S.z)({mode:S.v.CreatePrompt,experimentId:e,onSuccess:({promptName:t})=>i(I.Ay.getPromptDetailsPageRoute(t,e))});return(0,f.FD)(n.m,{css:H,children:[(0,f.Y)(l.S,{shrinks:!1}),(0,f.Y)(d.Header,{title:(0,f.Y)(u.A,{id:"aLRRam",defaultMessage:"Prompts"}),buttons:(0,f.Y)(c.B,{componentId:"mlflow.prompts.list.create",type:"primary",onClick:F,children:(0,f.Y)(u.A,{id:"7x6xu8",defaultMessage:"Create prompt"})})}),(0,f.Y)(l.S,{shrinks:!1}),(0,f.FD)("div",{css:W,children:[(0,f.Y)(p,{searchFilter:t,onSearchFilterChange:r}),(null===v||void 0===v?void 0:v.message)&&(0,f.FD)(f.FK,{children:[(0,f.Y)(d.Alert,{type:"error",message:v.message,componentId:"mlflow.prompts.list.error",closable:!1}),(0,f.Y)(l.S,{})]}),(0,f.Y)(C,{prompts:g,error:v,hasNextPage:y,hasPreviousPage:w,isLoading:x,isFiltered:Boolean(t),onNextPage:Y,onPreviousPage:_,onEditTags:P,experimentId:e})]}),M,b]})}),void 0,K.u)},27556:function(e,t,r){r.d(t,{YQ:function(){return a},d7:function(){return i}});var n=r(46709);function a(e,t,r){var a=this,o=(0,n.useRef)(null),i=(0,n.useRef)(0),s=(0,n.useRef)(null),l=(0,n.useRef)([]),d=(0,n.useRef)(),c=(0,n.useRef)(),u=(0,n.useRef)(e),m=(0,n.useRef)(!0);u.current=e;var f="undefined"!=typeof window,p=!t&&0!==t&&f;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var g=!!(r=r||{}).leading,v=!("trailing"in r)||!!r.trailing,h="maxWait"in r,y="debounceOnServer"in r&&!!r.debounceOnServer,w=h?Math.max(+r.maxWait||0,t):null;(0,n.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var x=(0,n.useMemo)((function(){var e=function(e){var t=l.current,r=d.current;return l.current=d.current=null,i.current=e,c.current=u.current.apply(r,t)},r=function(e,t){p&&cancelAnimationFrame(s.current),s.current=p?requestAnimationFrame(e):setTimeout(e,t)},n=function(e){if(!m.current)return!1;var r=e-o.current;return!o.current||r>=t||r<0||h&&e-i.current>=w},x=function(t){return s.current=null,v&&l.current?e(t):(l.current=d.current=null,c.current)},Y=function e(){var a=Date.now();if(n(a))return x(a);if(m.current){var s=t-(a-o.current),l=h?Math.min(s,w-(a-i.current)):s;r(e,l)}},_=function(){if(f||y){var u=Date.now(),p=n(u);if(l.current=[].slice.call(arguments),d.current=a,o.current=u,p){if(!s.current&&m.current)return i.current=o.current,r(Y,t),g?e(o.current):c.current;if(h)return r(Y,t),e(o.current)}return s.current||r(Y,t),c.current}};return _.cancel=function(){s.current&&(p?cancelAnimationFrame(s.current):clearTimeout(s.current)),i.current=0,l.current=o.current=d.current=s.current=null},_.isPending=function(){return!!s.current},_.flush=function(){return s.current?x(Date.now()):c.current},_}),[g,h,t,w,v,p,f,y]);return x}function o(e,t){return e===t}function i(e,t,r){var i=r&&r.equalityFn||o,s=(0,n.useRef)(e),l=(0,n.useState)({})[1],d=a((0,n.useCallback)((function(e){s.current=e,l({})}),[l]),t,r),c=(0,n.useRef)(e);return i(c.current,e)||(d(e),c.current=e),[s.current,d]}},59930:function(e){e.exports=function(e,t,r,n,a,o,i,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,a,o,i,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},60312:function(e,t,r){r.d(t,{m:function(){return i}});var n=r(27299),a=r(73408);var o={name:"13udsys",styles:"height:100%"};const i=({children:e,className:t})=>(0,a.Y)(n.PageWrapper,{css:o,className:t,children:e})},68079:function(e,t,r){r.d(t,{u:function(){return d}});var n=r(27299),a=r(27757),o=r(40724),i=r(60312),s=r(73408);var l={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const d=({error:e})=>{var t;return(0,s.Y)(i.m,{css:l,children:(0,s.Y)(n.Empty,{"data-testid":"fallback",title:(0,s.Y)(o.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:(0,s.Y)(o.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,s.Y)(a.k,{})})})}},73227:function(e,t,r){r.d(t,{i:function(){return l}});var n=r(61060),a=r(27042),o=r(59795),i=r(46709),s=r(181);const l=({onSuccess:e})=>{const t=(0,n.n)({mutationFn:async({toAdd:e,toDelete:t,promptId:r})=>Promise.all([...e.map((({key:e,value:t})=>o.M.setRegisteredPromptTag(r,e,t))),...t.map((({key:e})=>o.M.deleteRegisteredPromptTag(r,e)))])}),{EditTagsModal:r,showEditTagsModal:l,isLoading:d}=(0,a.Q)({valueRequired:!0,saveTagsHandler:(r,n,a)=>{const{addedOrModifiedTags:o,deletedTags:i}=(0,s.Rf)(n,a);return new Promise(((n,a)=>{if(!r.name)return a();t.mutate({promptId:r.name,toAdd:o,toDelete:i},{onSuccess:()=>{n(),null===e||void 0===e||e()},onError:a})}))}});return{EditTagsModal:r,showEditPromptTagsModal:(0,i.useCallback)((e=>l({name:e.name,tags:e.tags.filter((e=>(0,s.oD)(e.key)))})),[l]),isLoading:d}}},74794:function(e,t,r){r.r(t);var n=r(59930),a=r.n(n),o=r(91105),i=r(22156),s=r(73408);t.default=()=>{const{experimentId:e}=(0,o.g)();return a()(e,"Experiment ID must be defined"),(0,s.Y)(i.default,{experimentId:e})}}}]);
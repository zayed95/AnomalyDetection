"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[8781],{668:function(e,t,s){s.r(t),s.d(t,{CompareModelVersionsPage:function(){return J},CompareModelVersionsPageImpl:function(){return K},default:function(){return z}});var n=s(46709),r=s(98022),a=s.n(r),o=s(56530),i=s(5690),l=s(43233),c=s(99213),d=s(74264),u=s(68248),h=s(91105),p=s(76118),m=s(40724),g=s(84173),f=s(27299),b=s(27757),Y=s(40072),N=(s(33779),s(91409)),I=s(67340),v=s(11057),w=s(60284),A=s(76400),M=s(37457),y=s(11522),R=s(95856),k=s(27206),x=s(61349),S=s(10536),T=s(73408);const{TabPane:q}=f.LegacyTabs;function C(e){const{theme:t}=(0,b.u)();return(0,T.Y)("div",{css:(0,u.AH)({textAlign:"center",color:t.colors.textSecondary},""),...e})}function D(e){const{theme:t}=(0,b.u)();return(0,T.Y)("table",{className:"mlflow-compare-table table",css:(0,u.AH)({"th.main-table-header":{backgroundColor:t.colors.white,padding:0},"td.highlight-data":{backgroundColor:t.colors.backgroundValidationWarning}},""),...e})}function L(e){const{theme:t}=(0,b.u)();return(0,T.Y)("button",{css:(0,u.AH)({textAlign:"left",display:"flex",alignItems:"center",border:"none",backgroundColor:t.colors.white,paddingLeft:0,cursor:"pointer"},""),...e})}class F extends n.Component{constructor(...e){super(...e),this.state={inputActive:!0,outputActive:!0,paramsToggle:!0,paramsActive:!0,schemaToggle:!0,compareByColumnNameToggle:!1,schemaActive:!0,metricToggle:!0,metricActive:!0},this.icons={plusIcon:(0,T.Y)("i",{className:"fa fa-plus-square-o"}),minusIcon:(0,T.Y)("i",{className:"fa fa-minus-square-o"}),downIcon:(0,T.Y)("i",{className:"fa fa-caret-down"}),rightIcon:(0,T.Y)("i",{className:"fa fa-caret-right"}),chartIcon:(0,T.Y)("i",{className:"fa fa-line-chart padding-left-text"})},this.onToggleClick=e=>{this.setState((t=>({[e]:!t[e]})))}}render(){const{inputsListByIndex:e,inputsListByName:t,modelName:s,outputsListByIndex:n,outputsListByName:r,runInfos:a,runUuids:o,runDisplayNames:i,paramLists:l,metricLists:c}=this.props,d=(0,T.Y)(m.A,{id:"6kSKRk",defaultMessage:"Comparing {numVersions} Versions",values:{numVersions:this.props.runInfos.length}}),p=[(0,T.Y)(h.N_,{to:k.fM.modelListPageRoute,children:(0,T.Y)(m.A,{id:"U82iv6",defaultMessage:"Registered Models"})}),(0,T.Y)(h.N_,{to:k.fM.getModelPageRoute(s),children:s})];return(0,T.FD)("div",{className:"CompareModelVersionsView",css:(0,u.AH)({...P.compareModelVersionsView,...P.wrapper(a.length)},""),children:[(0,T.Y)(S.z,{title:d,breadcrumbs:p}),(0,T.Y)("div",{className:"mlflow-responsive-table-container",children:(0,T.FD)(D,{children:[this.renderTableHeader(),this.renderModelVersionInfo(),this.renderSectionHeader("paramsActive","paramsToggle",(0,T.Y)(m.A,{id:"bSx/er",defaultMessage:"Parameters"})),this.renderParams(),this.renderSectionHeader("schemaActive","schemaToggle",(0,T.Y)(m.A,{id:"cK6riy",defaultMessage:"Schema"}),!1,(0,T.Y)(f.Switch,{className:"toggle-switch",style:{marginLeft:"auto"},onChange:()=>this.onToggleClick("compareByColumnNameToggle")}),(0,T.Y)("div",{className:"padding-left-text padding-right-text",children:(0,T.Y)("span",{children:(0,T.Y)(m.A,{id:"sXqvoN",defaultMessage:"Ignore column ordering"})})})),this.renderSchemaSectionHeader("inputActive",(0,T.Y)(m.A,{id:"GJWVBA",defaultMessage:"Inputs"})),this.renderSchema("inputActive",(0,T.Y)(m.A,{id:"ThrXMh",defaultMessage:"Inputs"}),e,t),this.renderSchemaSectionHeader("outputActive",(0,T.Y)(m.A,{id:"aB6xFd",defaultMessage:"Outputs"})),this.renderSchema("outputActive",(0,T.Y)(m.A,{id:"bqn2bk",defaultMessage:"Outputs"}),n,r),this.renderSectionHeader("metricActive","metricToggle",(0,T.Y)(m.A,{id:"CpLnGS",defaultMessage:"Metrics"})),this.renderMetrics()]})}),(0,T.FD)(f.LegacyTabs,{children:[(0,T.Y)(q,{tab:(0,T.Y)(m.A,{id:"QuU1sl",defaultMessage:"Parallel Coordinates Plot"}),children:(0,T.Y)(R.Ay,{runUuids:o})},"parallel-coordinates-plot"),(0,T.Y)(q,{tab:(0,T.Y)(m.A,{id:"4NEPlV",defaultMessage:"Scatter Plot"}),children:(0,T.Y)(N.J,{runUuids:o,runDisplayNames:i})},"scatter-plot"),(0,T.Y)(q,{tab:(0,T.Y)(m.A,{id:"iXb99e",defaultMessage:"Box Plot"}),children:(0,T.Y)(I.e,{runUuids:o,runInfos:a,paramLists:l,metricLists:c})},"box-plot"),(0,T.Y)(q,{tab:(0,T.Y)(m.A,{id:"dq8MJd",defaultMessage:"Contour Plot"}),children:(0,T.Y)(v.A,{runUuids:o,runDisplayNames:i})},"contour-plot")]})]})}renderTableHeader(){const{runInfos:e,runInfosValid:t}=this.props;return(0,T.Y)("thead",{children:(0,T.FD)("tr",{className:"table-row",children:[(0,T.Y)("th",{scope:"row",className:"row-header block-content",children:(0,T.Y)(m.A,{id:"bi26D5",defaultMessage:"Run ID:"})}),e.map(((e,s)=>{var n,r;return(0,T.Y)("th",{scope:"column",className:"data-value block-content",children:t[s]?(0,T.Y)(h.N_,{to:w.Ay.getRunPageRoute(null!==(n=e.experimentId)&&void 0!==n?n:"0",null!==(r=e.runUuid)&&void 0!==r?r:""),children:e.runUuid}):e.runUuid},e.runUuid)}))]})})}renderModelVersionInfo(){const{runInfos:e,runInfosValid:t,versionsToRuns:s,runNames:n,modelName:r}=this.props;return(0,T.FD)("tbody",{className:"scrollable-table",children:[(0,T.FD)("tr",{className:"table-row",children:[(0,T.Y)("th",{scope:"row",className:"data-value block-content",children:(0,T.Y)(m.A,{id:"xmPKKq",defaultMessage:"Model Version:"})}),Object.keys(s).map((e=>{const t=s[e];return(0,T.Y)("td",{className:"meta-info block-content",children:(0,T.Y)(h.N_,{to:k.fM.getModelVersionPageRoute(r,e),children:e})},t)}))]}),(0,T.FD)("tr",{className:"table-row",children:[(0,T.Y)("th",{scope:"row",className:"data-value block-content",children:(0,T.Y)(m.A,{id:"erqoIC",defaultMessage:"Run Name:"})}),n.map(((t,s)=>(0,T.Y)("td",{className:"meta-info block-content",children:(0,T.Y)("div",{className:"truncate-text single-line cell-content",children:t})},e[s].runUuid)))]}),(0,T.FD)("tr",{className:"table-row",children:[(0,T.Y)("th",{scope:"row",className:"data-value block-content",children:(0,T.Y)(m.A,{id:"GKiPV1",defaultMessage:"Start Time:"})}),e.map(((e,s)=>{const n=e.startTime&&t[s]?y.A.formatTimestamp(e.startTime,this.props.intl):"(unknown)";return(0,T.Y)("td",{className:"meta-info block-content",children:n},e.runUuid)}))]})]})}renderSectionHeader(e,t,s,n=!0,r=null,a=null){const{runInfos:o}=this.props,i=this.state[e],{downIcon:l,rightIcon:c}=this.icons;return(0,T.Y)("tbody",{children:(0,T.Y)("tr",{children:(0,T.Y)("th",{scope:"rowgroup",className:"block-content main-table-header",colSpan:o.length+1,children:(0,T.FD)("div",{className:"switch-button-container",children:[(0,T.FD)(L,{onClick:()=>this.onToggleClick(e),children:[i?l:c,(0,T.Y)("span",{className:"header",children:s})]}),r,a,(0,T.Y)(f.Switch,{defaultChecked:!0,className:"toggle-switch",style:n?{marginLeft:"auto"}:{},onChange:()=>this.onToggleClick(t)}),(0,T.Y)("div",{className:"padding-left-text",children:(0,T.Y)("span",{children:(0,T.Y)(m.A,{id:"H+4gFh",defaultMessage:"Show diff only"})})})]})})})})}renderParams(){return(0,T.Y)("tbody",{className:"scrollable-table",children:this.renderDataRows(this.props.paramLists,(0,T.Y)(m.A,{id:"EK5JxG",defaultMessage:"Parameters"}),this.state.paramsActive,this.state.paramsToggle)})}renderSchemaSectionHeader(e,t){const{runInfos:s}=this.props,{schemaActive:n}=this.state,r=this.state[e],{minusIcon:a,plusIcon:o}=this.icons;return(0,T.Y)("tbody",{children:(0,T.Y)("tr",{className:""+(n?"":"hidden-row"),children:(0,T.Y)("th",{scope:"rowgroup",className:"schema-table-header block-content",colSpan:s.length+1,children:(0,T.FD)("button",{className:"schema-collapse-button",onClick:()=>this.onToggleClick(e),children:[r?a:o,(0,T.Y)("strong",{style:{paddingLeft:4},children:t})]})})})})}renderSchema(e,t,s,n){const{schemaActive:r,compareByColumnNameToggle:a,schemaToggle:o}=this.state,i=this.state[e],l=r&&i,c=!a&&!(0,p.isEmpty)(s),d=a&&!(0,p.isEmpty)(n),u=e=>e,h=(0,T.Y)(m.A,{id:"5RWIet",defaultMessage:"Schema {sectionName}",values:{sectionName:t}});return(0,T.FD)("tbody",{className:"scrollable-table schema-scrollable-table",children:[this.renderDataRows(s,h,l&&c,o,((e,s)=>(0,T.FD)(T.FK,{children:[t," [",e,"]"]})),u),this.renderDataRows(n,h,l&&d,o,((e,t)=>e),u)]})}renderMetrics(){const{runInfos:e,metricLists:t}=this.props,{metricActive:s,metricToggle:n}=this.state,{chartIcon:r}=this.icons;return(0,T.Y)("tbody",{className:"scrollable-table",children:this.renderDataRows(t,(0,T.Y)(m.A,{id:"GDenB3",defaultMessage:"Metrics"}),s,n,((t,s)=>(0,T.FD)(h.N_,{to:w.Ay.getMetricPageRoute(e.map((e=>e.runUuid)).filter(((e,t)=>void 0!==s[t])),t,[e[0].experimentId]),target:"_blank",title:"Plot chart",children:[t,r]})),y.A.formatMetric)})}renderDataRows(e,t,s=!0,n=!1,r=(e,t)=>e,a=e=>isNaN(e)?`"${e}"`:e){const o=M.A.getKeys(e),i={};if(o.forEach((e=>i[e]=[])),e.forEach(((e,t)=>{o.forEach((e=>i[e].push(void 0))),e.forEach((e=>i[e.key][t]=e.value))})),(0,p.isEmpty)(o)||(0,p.isEmpty)(e))return(0,T.Y)("tr",{className:"table-row "+(s?"":"hidden-row"),children:(0,T.Y)("th",{scope:"row",className:"rowHeader block-content",children:(0,T.Y)(C,{children:(0,T.Y)(m.A,{id:"47QsAK",defaultMessage:"{fieldName} are empty",values:{fieldName:t}})})})});(0,p.every)(o,(e=>!isNaN(e)))?o.sort(((e,t)=>parseInt(e,10)-parseInt(t,10))):o.sort();let l=!0;const c=o.map((e=>{const t=i[e].length>1&&(0,p.uniq)(i[e]).length>1;return l=!t&&l,(0,T.FD)("tr",{className:"table-row "+(n&&!t||!s?"hidden-row":""),children:[(0,T.Y)("th",{scope:"row",className:"rowHeader block-content",children:r(e,i[e])}),i[e].map(((e,s)=>(0,T.Y)("td",{className:"data-value block-content "+(t?"highlight-data":""),children:(0,T.Y)("span",{className:"truncate-text single-line cell-content",children:void 0===e?"-":a(e)})},this.props.runInfos[s].runUuid)))]},e)}));return l&&n?(0,T.Y)("tr",{className:"table-row "+(s?"":"hidden-row"),children:(0,T.Y)("th",{scope:"row",className:"rowHeader block-content",children:(0,T.Y)(C,{children:(0,T.Y)(m.A,{id:"NJ1bYP",defaultMessage:"{fieldName} are identical",values:{fieldName:t}})})})}):c}}const _=e=>{const t={};return e.forEach(((e,s)=>{const n=e.name?e.name:"",r=e.type?e.type:"";t[s]={key:s,value:""!==n&&""!==r?`${n}: ${r}`:`${n}${r}`}})),t},V=e=>{const t={};return e.forEach((e=>{const s=e.name?e.name:"-",n=e.type?e.type:"-";t[s]={key:s,value:n}})),t},P={wrapper:e=>({".mlflow-compare-table":{minWidth:200*(e+1)}}),compareModelVersionsView:{"button:focus":{outline:"none",boxShadow:"none"},"td.block-content th.block-content":{whiteSpace:"nowrap",textOverflow:"ellipsis",tableLayout:"fixed",boxSizing:"content-box"},"th.schema-table-header":{height:28,padding:0},"tr.table-row":{display:"table",width:"100%",tableLayout:"fixed"},"tr.hidden-row":{display:"none"},"tbody.scrollable-table":{width:"100%",display:"block",border:"none",maxHeight:400,overflowY:"auto"},"tbody.schema-scrollable-table":{maxHeight:200},".switch-button-container":{display:"flex",paddingTop:16,paddingBottom:16},"button.schema-collapse-button":{textAlign:"left",display:"block",width:"100%",height:"100%",border:"none"},".collapse-button":{textAlign:"left",display:"flex",alignItems:"center",border:"none",backgroundColor:"white",paddingLeft:0},".cell-content":{maxWidth:"200px",minWidth:"100px"},".padding-left-text":{paddingLeft:8},".padding-right-text":{paddingRight:16},".toggle-switch":{marginTop:2},".header":{paddingLeft:8,fontSize:16}}},H=(0,o.Ng)(((e,t)=>{const s=[],n=[],r=[],a=[],o=[],i=[],l=[],{modelName:c,versionsToRuns:d}=t,u=[],h=[],p=[],m=[];for(const g in d)if(d&&g in d){const t=d[g],f=(0,Y.K4)(t,e);f?(s.push(f),n.push(!0),r.push(Object.values((0,A.d0)(t,e))),a.push(Object.values((0,Y.tI)(t,e))),o.push(y.A.getRunName(f)),i.push(y.A.getRunDisplayName(f,t)),l.push(t)):(t?s.push({runUuid:t}):s.push({runUuid:"None"}),n.push(!1),r.push([]),a.push([]),o.push("Invalid Run"));const b=(0,x.SE)(e,c,g);h.push(Object.values(_(b.inputs))),u.push(Object.values(V(b.inputs))),m.push(Object.values(_(b.outputs))),p.push(Object.values(V(b.outputs)))}return{runInfos:s,runInfosValid:n,metricLists:r,paramLists:a,runNames:o,runDisplayNames:i,runUuids:l,modelName:c,inputsListByName:u,inputsListByIndex:h,outputsListByName:p,outputsListByIndex:m}}))((0,g.Ay)(F));var E=s(54401),B=s(2560),O=s(55570),U=s(91113);class K extends n.Component{constructor(...e){super(...e),this.registeredModelRequestId=(0,l.yk)(),this.versionRequestId=(0,l.yk)(),this.runRequestId=(0,l.yk)(),this.getMlModelFileRequestId=(0,l.yk)(),this.state={requestIds:[this.registeredModelRequestId,this.runRequestId,this.versionRequestId,this.getMlModelFileRequestId],requestIdsWith404ErrorsToIgnore:[this.runRequestId,this.getMlModelFileRequestId]}}removeRunRequestId(){this.setState((e=>({requestIds:(0,p.without)(e.requestIds,this.runRequestId)})))}componentDidMount(){this.props.getRegisteredModelApi(this.props.modelName,this.registeredModelRequestId);for(const e in this.props.versionsToRuns)if({}.hasOwnProperty.call(this.props.versionsToRuns,e)){const t=this.props.versionsToRuns[e];t?this.props.getRunApi(t,this.runRequestId).catch((()=>{this.removeRunRequestId()})):this.removeRunRequestId();const{modelName:s}=this.props;this.props.getModelVersionApi(s,e,this.versionRequestId),this.props.getModelVersionArtifactApi(s,e).then((t=>this.props.parseMlModelFile(s,e,t.value,this.getMlModelFileRequestId))).catch((()=>{this.setState((e=>({requestIds:(0,p.without)(e.requestIds,this.getMlModelFileRequestId)})))}))}}render(){return(0,T.Y)(E.L,{children:(0,T.Y)(d.Ay,{requestIds:this.state.requestIds,requestIdsWith404sToIgnore:this.state.requestIdsWith404ErrorsToIgnore,children:(0,T.Y)(H,{modelName:this.props.modelName,versionsToRuns:this.props.versionsToRuns})})})}}const W={getRunApi:i.aO,getRegisteredModelApi:c.SY,getModelVersionApi:c.s5,getModelVersionArtifactApi:c.ax,parseMlModelFile:c.qI},j=(0,B.h)((0,o.Ng)(((e,t)=>{const{location:s}=t,n=a().parse(s.search);return{modelName:decodeURIComponent(JSON.parse(n["?name"])),versionsToRuns:JSON.parse(n.runs)}}),W)(K)),J=(0,O.X)(U.A.mlflowServices.MODEL_REGISTRY,j);var z=J},10536:function(e,t,s){s.d(t,{o:function(){return d},z:function(){return h}});var n=s(68248),r=(s(46709),s(27299)),a=s(27757),o=s(79081),i=s(7655),l=s(36439),c=s(73408);function d({menu:e}){const t=(0,c.Y)(r.Menu,{children:e.map((({id:e,itemName:t,onClick:s,href:n,...a})=>(0,c.Y)(r.Menu.Item,{onClick:s,href:n,"data-testid":e,...a,children:t},e)))});return e.length>0?(0,c.Y)(r.Dropdown,{overlay:t,trigger:["click"],placement:"bottomLeft",arrow:!0,children:(0,c.Y)(a.B,{componentId:"codegen_mlflow_app_src_shared_building_blocks_pageheader.tsx_54",icon:(0,c.Y)(r.OverflowIcon,{}),"data-testid":"overflow-menu-trigger","aria-label":"Open header dropdown menu"})}):null}var u={name:"1gz4j9a",styles:"margin-left:0"};function h(e){const{title:t,breadcrumbs:s=[],titleAddOns:d=[],preview:h,children:p,spacerSize:m,hideSpacer:g=!1,dangerouslyAppendEmotionCSS:f}=e,{theme:b}=(0,a.u)();(0,i.A)();return(0,c.FD)(c.FK,{children:[(0,c.Y)(r.Header,{breadcrumbs:s.length>0&&(0,c.Y)(r.Breadcrumb,{includeTrailingCaret:!0,children:s.map(((e,t)=>(0,c.Y)(r.Breadcrumb.Item,{children:e},t)))}),buttons:p,title:t,titleAddOns:(0,c.FD)(c.FK,{children:[h&&(0,c.Y)(l.W,{css:u}),d]}),dangerouslyAppendEmotionCSS:f}),(0,c.Y)(o.S,{css:(0,n.AH)({flexShrink:0,...g?{display:"none"}:{}},""),size:m})]})}},36439:function(e,t,s){s.d(t,{W:function(){return l}});var n=s(68248),r=(s(46709),s(40724)),a=s(27757),o=s(27299),i=s(73408);const l=({className:e})=>{const{theme:t}=(0,a.u)();return(0,i.Y)(o.Tag,{componentId:"codegen_mlflow_app_src_shared_building_blocks_previewbadge.tsx_14",className:e,css:(0,n.AH)({marginLeft:t.spacing.xs},""),color:"turquoise",children:(0,i.Y)(r.A,{id:"8qJt7/",defaultMessage:"Experimental"})})}}}]);
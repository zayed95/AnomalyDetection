"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4783],{13479:function(){},34783:function(e,t,i){i.r(t),i.d(t,{ExperimentListView:function(){return B},default:function(){return N}});var n=i(68248),l=i(46709),o=i(27757),s=i(79081),a=i(27299),r=(i(13479),i(60284)),d=i(60329),c=i(26158),m=i(7655),p=i(40724),g=i(60312),u=i(76842),h=i(91105),f=i(84561),x=i(5690),v=i(56530),w=i(11522),b=i(73408);const y=({isOpen:e,onClose:t,experiments:i,onExperimentsDeleted:n})=>{const l=(0,v.wA)();return(0,b.Y)(f.u,{isOpen:e,onClose:t,handleSubmit:()=>Promise.all(i.map((e=>l((0,x.lJ)(e.experimentId))))).then(n).catch((e=>w.A.logErrorAndNotifyUser(e))),title:(0,b.Y)(p.A,{id:"Epo8/i",defaultMessage:"Delete {count, plural, one {# Experiment} other {# Experiments}}",values:{count:i.length}}),helpText:(0,b.FD)("div",{children:[(0,b.Y)(o.T.Paragraph,{children:"The following experiments will be deleted:"}),(0,b.Y)(o.T.Paragraph,{children:(0,b.Y)("ul",{children:i.map((e=>(0,b.Y)("li",{children:(0,b.FD)(o.T.Text,{children:[e.name," (ID: ",e.experimentId,")"]})},e.experimentId)))})})]}),confirmButtonText:(0,b.Y)(p.A,{id:"9KLNi5",defaultMessage:"Delete"}),confirmButtonProps:{danger:!0}})};var _=i(77153),S=i(61060),Y=i(27042),T=i(181),k=i(12803);const C=["IS","IS NOT","CONTAINS"];function F(e){return[e.key,e.operator,e.value].join("-")}function I(e){const t=e.split("-");if(t.length>=3&&function(e){return C.includes(e)}(t[1])){const[e,i,...n]=t;return{key:e,operator:i,value:n.join("-")}}return null}var M=i(884);const A={key:"",value:"",operator:"IS"};var E={name:"isq613",styles:"min-width:14ch"},P={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};function D({tagsFilter:e,setTagsFilter:t}){const{control:i,handleSubmit:s}=(0,M.mN)({defaultValues:{tagsFilter:0===e.length?[A]:e}}),{fields:r,append:d,remove:c}=(0,M.jz)({control:i,name:"tagsFilter"}),{theme:g}=(0,o.u)(),{formatMessage:u}=(0,m.A)(),h={fontWeight:g.typography.typographyBoldFontWeight},f={key:u({id:"/k7Xvj",defaultMessage:"Key"}),operator:u({id:"JDpv0G",defaultMessage:"Operator"}),value:u({id:"OH7hV5",defaultMessage:"Value"})};return(0,b.FD)("form",{onSubmit:s((e=>t(e.tagsFilter))),css:(0,n.AH)({display:"flex",flexDirection:"column",gap:g.spacing.md,padding:g.spacing.md},""),children:[(0,b.FD)("fieldset",{css:(0,n.AH)({display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:g.spacing.sm},""),children:[(0,b.Y)("label",{htmlFor:`${r[0].id}-key`,css:h,children:f.key}),(0,b.Y)("label",{htmlFor:`${r[0].id}-op`,css:h,children:f.operator}),(0,b.Y)("label",{htmlFor:`${r[0].id}-value`,css:h,children:f.value}),(0,b.Y)("label",{}),r.map(((e,t)=>(0,b.FD)(l.Fragment,{children:[(0,b.Y)(a.RHFControlledComponents.Input,{id:`${e.id}-key`,componentId:`mlflow.experiment_list_view.tag_filter.key_input_${t}`,name:`tagsFilter.${t}.key`,control:i,"aria-label":f.key,placeholder:f.key,required:!0}),(0,b.Y)(a.RHFControlledComponents.LegacySelect,{id:`${e.id}-op`,name:`tagsFilter.${t}.operator`,control:i,options:C.map((e=>({key:e,value:e}))),"aria-label":f.operator,css:E}),(0,b.Y)(a.RHFControlledComponents.Input,{id:`${e.id}-value`,componentId:`mlflow.experiment_list_view.tag_filter.value_input_${t}`,name:`tagsFilter.${t}.value`,control:i,"aria-label":f.value,placeholder:f.value,required:!0}),(0,b.Y)(o.B,{componentId:`mlflow.experiment_list_view.tag_filter.remove_filter_button_${t}`,type:"tertiary",onClick:()=>c(t),disabled:1===r.length,"aria-label":u({id:"l8Z2nP",defaultMessage:"Remove filter"}),children:(0,b.Y)(o.C,{})})]},e.id)))]}),(0,b.FD)("div",{css:P,children:[(0,b.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.add_filter_button",onClick:()=>d(A),icon:(0,b.Y)(a.PlusIcon,{}),children:(0,b.Y)(p.A,{id:"rY00Iw",defaultMessage:"Add filter"})}),(0,b.FD)("div",{css:(0,n.AH)({display:"flex",gap:g.spacing.sm},""),children:[(0,b.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.clear_filters_button",onClick:()=>t([]),children:(0,b.Y)(p.A,{id:"NPlcrl",defaultMessage:"Clear filters"})}),(0,b.Y)(o.B,{htmlType:"submit",componentId:"mlflow.experiment_list_view.tag_filter.apply_filters_button",type:"primary",children:(0,b.Y)(p.A,{id:"sWbj1n",defaultMessage:"Apply filters"})})]})]})]})}var R={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},H={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};const B=()=>{const[e,t]=function(){var e;const t="experimentSearchFilter",[i,n]=(0,h.ok)();return[null!==(e=i.get(t))&&void 0!==e?e:"",function(e){e?i.set(t,e):i.delete(t),n(i)}]}(),{tagsFilter:i,setTagsFilter:f,isTagsFilterOpen:x,setIsTagsFilterOpen:v}=function(){const[e,t]=(0,l.useState)(!1),i="experimentTagsFilter",[n,o]=(0,h.ok)();return{tagsFilter:(0,l.useMemo)((()=>{var e;return(null!==(e=n.getAll(i))&&void 0!==e?e:[]).map(I).filter((e=>null!==e))}),[n]),setTagsFilter:function(e){n.delete(i);const l=e.filter((e=>""!==e.key&&""!==e.value));if(0!==l.length)for(const t of l)n.append(i,F(t));o(n),t(!1)},isTagsFilterOpen:e,setIsTagsFilterOpen:t}}(),{data:w,isLoading:C,error:M,hasNextPage:A,hasPreviousPage:E,onNextPage:P,onPreviousPage:B,pageSizeSelect:N,sorting:O,setSorting:L}=(0,c.f)({searchFilter:e,tagsFilter:i}),j=(0,c.M)(),{EditTagsModal:$,showEditExperimentTagsModal:q}=(({onSuccess:e})=>{const t=(0,S.n)({mutationFn:async({toAdd:e,toDelete:t,experimentId:i})=>Promise.all([...e.map((({key:e,value:t})=>k.x.setExperimentTag({experiment_id:i,key:e,value:t}))),...t.map((({key:e})=>k.x.deleteExperimentTag({experiment_id:i,key:e})))])}),{EditTagsModal:i,showEditTagsModal:n,isLoading:o}=(0,Y.Q)({valueRequired:!0,saveTagsHandler:(i,n,l)=>{const{addedOrModifiedTags:o,deletedTags:s}=(0,T.Rf)(n,l);return new Promise(((n,l)=>{if(!i)return l();t.mutate({experimentId:i.experimentId,toAdd:o,toDelete:s},{onSuccess:()=>{n(),null===e||void 0===e||e()},onError:l})}))}});return{EditTagsModal:i,showEditExperimentTagsModal:(0,l.useCallback)((e=>n({experimentId:e.experimentId,name:e.name,tags:e.tags.filter((e=>(0,T.oD)(e.key)))})),[n]),isLoading:o}})({onSuccess:j}),[z,W]=(0,l.useState)({}),[K,V]=(0,l.useState)(""),[U,Q]=(0,l.useState)(!1),[Z,G]=(0,l.useState)(!1),{theme:J}=(0,o.u)(),X=(0,h.Zp)(),ee=(0,m.A)(),te=Object.entries(z).filter((([e,t])=>t)).map((([e,t])=>e));return(0,b.FD)(g.m,{css:R,children:[(0,b.Y)(s.S,{shrinks:!1}),(0,b.Y)(a.Header,{title:(0,b.Y)(p.A,{id:"ZqHpEG",defaultMessage:"Experiments"}),buttons:(0,b.FD)(b.FK,{children:[(0,b.Y)(o.B,{componentId:"mlflow.experiment_list_view.new_experiment_button",type:"primary",onClick:()=>{Q(!0)},"data-testid":"create-experiment-button",children:(0,b.Y)(p.A,{id:"9ut1Fj",defaultMessage:"Create"})}),(0,b.Y)(o.B,{componentId:"mlflow.experiment_list_view.compare_experiments_button",onClick:()=>{const e=r.Ay.getCompareExperimentsPageRoute(te);X(e)},"data-testid":"compare-experiment-button",disabled:te.length<2,children:(0,b.Y)(p.A,{id:"YECxws",defaultMessage:"Compare"})}),(0,b.Y)(o.B,{componentId:"mlflow.experiment_list_view.bulk_delete_button",onClick:()=>G(!0),"data-testid":"delete-experiments-button",disabled:te.length<1,danger:!0,children:(0,b.Y)(p.A,{id:"L/4iQO",defaultMessage:"Delete"})})]})}),(0,b.Y)(s.S,{shrinks:!1}),M&&(0,b.Y)(a.Alert,{css:(0,n.AH)({marginBlockEnd:J.spacing.sm},""),type:"error",message:M instanceof _.s?M.getMessageField():M.message||(0,b.Y)(p.A,{id:"9Bj7oS",defaultMessage:"A network error occurred."}),componentId:"mlflow.experiment_list_view.error",closable:!1}),(0,b.FD)("div",{css:H,children:[(0,b.FD)(a.TableFilterLayout,{children:[(0,b.Y)(a.TableFilterInput,{"data-testid":"search-experiment-input",placeholder:ee.formatMessage({id:"9vT4HV",defaultMessage:"Filter experiments by name"}),componentId:"mlflow.experiment_list_view.search",defaultValue:e,onChange:e=>{V(e.target.value)},onSubmit:()=>{t(K)},onClear:()=>{t("")},showSearchButton:!0}),(0,b.FD)(o.aw.Root,{componentId:"mlflow.experiment_list_view.tag_filter",open:x,onOpenChange:v,children:[(0,b.Y)(o.aw.Trigger,{asChild:!0,children:(0,b.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.trigger",icon:(0,b.Y)(a.FilterIcon,{}),endIcon:(0,b.Y)(a.ChevronDownIcon,{}),type:i.length>0?"primary":void 0,children:(0,b.Y)(p.A,{id:"55mClg",defaultMessage:"Tag filter"})})}),(0,b.Y)(o.aw.Content,{children:(0,b.Y)(D,{tagsFilter:i,setTagsFilter:f})})]})]}),(0,b.Y)(u.k,{experiments:w,isLoading:C,isFiltered:Boolean(e),rowSelection:z,setRowSelection:W,cursorPaginationProps:{hasNextPage:A,hasPreviousPage:E,onNextPage:P,onPreviousPage:B,pageSizeSelect:N},sortingProps:{sorting:O,setSorting:L},onEditTags:q})]}),(0,b.Y)(d.D,{isOpen:U,onClose:()=>{Q(!1)},onExperimentCreated:j}),(0,b.Y)(y,{experiments:(null!==w&&void 0!==w?w:[]).filter((({experimentId:e})=>te.includes(e))),isOpen:Z,onClose:()=>G(!1),onExperimentsDeleted:()=>{j(),W({})}}),$]})};var N=B},60312:function(e,t,i){i.d(t,{m:function(){return s}});var n=i(27299),l=i(73408);var o={name:"13udsys",styles:"height:100%"};const s=({children:e,className:t})=>(0,l.Y)(n.PageWrapper,{css:o,className:t,children:e})},76842:function(e,t,i){i.d(t,{k:function(){return S}});var n=i(68248),l=i(76256),o=i(46709),s=i(27299),a=i(27757),r=(i(13479),i(90061)),d=i(43617),c=i(76118),m=i(7655),p=i(40724),g=i(11522),u=i(91105),h=i(60284),f=i(59281),x=i(181),v=i(73408);var w={name:"zjik7",styles:"display:flex"},b={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},y={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const _=({row:{original:e},table:{options:{meta:t}}})=>{var i;const n=(0,m.A)(),{onEditTags:l}=t,o=(null===e||void 0===e||null===(i=e.tags)||void 0===i?void 0:i.filter((e=>(0,x.oD)(e.key))))||[],r=o.length>0;return(0,v.FD)("div",{css:w,children:[(0,v.Y)("div",{css:b,children:null===o||void 0===o?void 0:o.map((e=>(0,v.Y)(f.t,{tag:e},e.key)))}),(0,v.Y)(a.B,{componentId:"mlflow.experiment.list.tag.add",size:"small",icon:r?(0,v.Y)(s.PencilIcon,{}):void 0,onClick:()=>null===l||void 0===l?void 0:l(e),"aria-label":n.formatMessage({id:"Vk+30L",defaultMessage:"Edit tags"}),css:y,type:"tertiary",children:r?void 0:(0,v.Y)(p.A,{id:"cI0kqF",defaultMessage:"Add tags"})})]})};const S=({experiments:e,isFiltered:t,isLoading:i,rowSelection:u,setRowSelection:h,cursorPaginationProps:f,sortingProps:{sorting:x,setSorting:w},onEditTags:b})=>{const{theme:y}=(0,a.u)(),S=(()=>{const e=(0,m.A)();return(0,o.useMemo)((()=>[{header:({table:e})=>(0,v.Y)(s.Checkbox,{componentId:"mlflow.experiment_list_view.check_all_box",isChecked:e.getIsSomeRowsSelected()?null:e.getIsAllRowsSelected(),onChange:(t,i)=>e.getToggleAllRowsSelectedHandler()(i)}),id:"select",cell:k,enableSorting:!1},{header:e.formatMessage({id:"QhEnTA",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:T,enableSorting:!0},{header:e.formatMessage({id:"JUTcIz",defaultMessage:"Time created"}),id:"creation_time",accessorFn:({creationTime:t})=>g.A.formatTimestamp(t,e),enableSorting:!0},{header:e.formatMessage({id:"l/+0SR",defaultMessage:"Last modified"}),id:"last_update_time",accessorFn:({lastUpdateTime:t})=>g.A.formatTimestamp(t,e),enableSorting:!0},{header:e.formatMessage({id:"STEhnv",defaultMessage:"Description"}),id:"description",accessorFn:({tags:e})=>{var t,i;return null!==(t=null===e||void 0===e||null===(i=e.find((({key:e})=>"mlflow.note.content"===e)))||void 0===i?void 0:i.value)&&void 0!==t?t:"-"},enableSorting:!1},{header:e.formatMessage({id:"BB6In/",defaultMessage:"Tags"}),id:"tags",accessorKey:"tags",enableSorting:!1,cell:_}]),[e])})(),Y=(0,l.L)("mlflow/server/js/src/experiment-tracking/components/ExperimentListTable.tsx",{data:null!==e&&void 0!==e?e:[],columns:S,getCoreRowModel:(0,r.HT)(),getRowId:e=>e.experimentId,enableRowSelection:!0,enableMultiRowSelection:!0,onRowSelectionChange:h,onSortingChange:w,state:{rowSelection:u,sorting:x},meta:{onEditTags:b}}),C={flex:"none",height:y.general.heightBase};return(0,v.FD)(s.Table,{scrollable:!0,pagination:f?(0,v.Y)(s.CursorPagination,{...f,componentId:"mlflow.experiment_list_view.pagination"}):void 0,empty:(()=>{const n=!i&&(0,c.isEmpty)(e);return n&&t?(0,v.Y)(s.Empty,{image:(0,v.Y)(s.NoIcon,{}),title:(0,v.Y)(p.A,{id:"QRnRh3",defaultMessage:"No experiments found"}),description:null}):n?(0,v.Y)(s.Empty,{title:(0,v.Y)(p.A,{id:"dcoaGS",defaultMessage:"No experiments created"}),description:(0,v.Y)(p.A,{id:"Zt2Uxi",defaultMessage:'Use "Create experiment" button in order to create a new experiment'})}):null})(),children:[(0,v.Y)(s.TableRow,{isHeader:!0,children:Y.getLeafHeaders().map((e=>(0,v.Y)(s.TableHeader,{componentId:"mlflow.experiment_list_view.table.header",css:"select"===e.column.id?C:void 0,sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),children:(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),i?(0,v.Y)(s.TableSkeletonRows,{table:Y}):Y.getRowModel().rows.map((e=>(0,v.Y)(s.TableRow,{css:(0,n.AH)({height:y.general.buttonHeight},""),"data-testid":"experiment-list-item",children:e.getAllCells().map((e=>(0,v.Y)(s.TableCell,{css:(0,n.AH)({alignItems:"center",..."select"===e.column.id?C:void 0},""),children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})};var Y={name:"1d4xjjz",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1"};const T=({row:{original:e}})=>(0,v.Y)(u.N_,{className:"experiment-link",css:Y,to:h.Ay.getExperimentPageRoute(e.experimentId),title:e.name,"data-testid":"experiment-list-item-link",children:e.name}),k=({row:e})=>(0,v.Y)(s.Checkbox,{componentId:"mlflow.experiment_list_view.check_box",id:e.original.experimentId,"data-testid":"experiment-list-item-check-box",isChecked:e.getIsSelected(),disabled:!e.getCanSelect(),onChange:e.getToggleSelectedHandler()},e.original.experimentId)},84561:function(e,t,i){i.d(t,{u:function(){return s}});var n=i(46709),l=i(79081),o=i(73408);class s extends n.Component{constructor(e){super(e),this.state={isSubmitting:!1},this.onRequestCloseHandler=this.onRequestCloseHandler.bind(this),this.handleSubmitWrapper=this.handleSubmitWrapper.bind(this)}onRequestCloseHandler(){this.state.isSubmitting||this.props.onClose()}handleSubmitWrapper(){return this.setState({isSubmitting:!0}),this.props.handleSubmit().finally((()=>{this.props.onClose(),this.setState({isSubmitting:!1})}))}render(){return(0,o.Y)(l.d,{"data-testid":"confirm-modal",title:this.props.title,visible:this.props.isOpen,onOk:this.handleSubmitWrapper,okText:this.props.confirmButtonText,okButtonProps:this.props.confirmButtonProps,confirmLoading:this.state.isSubmitting,onCancel:this.onRequestCloseHandler,centered:!0,children:(0,o.Y)("div",{className:"modal-explanatory-text",children:this.props.helpText})})}}}}]);
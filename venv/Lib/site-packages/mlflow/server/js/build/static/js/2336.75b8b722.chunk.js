"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2336],{9695:function(e,t,s){s.d(t,{QN:function(){return u},F3:function(){return p},xH:function(){return h},BE:function(){return m}});var n=s(46709),i=s(27299),o=s(66916),r=s(40724),a=s(73408);const{Option:l,OptGroup:d}=i.LegacySelect,c="Create New Model",u=`$$$__${c}__$$$`,m="selectedModel",p="modelName";class h extends n.Component{constructor(...e){super(...e),this.state={selectedModel:null},this.handleModelSelectChange=e=>{this.setState({selectedModel:e})},this.modelNameValidator=(e,t,s)=>{const{modelByName:n}=this.props;s(n[t]?`Model "${t}" already exists.`:void 0)},this.handleFilterOption=(e,t)=>-1!==(t&&t.value||"").toLowerCase().indexOf(e.toLowerCase())}renderExplanatoryText(){const{isCopy:e}=this.props,{selectedModel:t}=this.state;if(!t||t===u)return null;const s=e?(0,a.Y)(r.A,{id:"hxMEqi",defaultMessage:"The model version will be copied to {selectedModel} as a new version.",values:{selectedModel:t}}):(0,a.Y)(r.A,{id:"zjXq2X",defaultMessage:"The model will be registered as a new version of {selectedModel}.",values:{selectedModel:t}});return(0,a.Y)("p",{className:"modal-explanatory-text",children:s})}renderModel(e){return(0,a.Y)(l,{value:e.name,children:e.name},e.name)}render(){const{modelByName:e,innerRef:t,isCopy:s}=this.props,{selectedModel:n}=this.state,r=n===u;return(0,a.FD)(i.LegacyForm,{ref:t,layout:"vertical",className:"mlflow-register-model-form",children:[(0,a.Y)(i.LegacyForm.Item,{label:s?(0,a.Y)("b",{children:"Copy to model"}):"Model",name:m,rules:[{required:!0,message:"Please select a model or create a new one."}],children:(0,a.FD)(i.LegacySelect,{dropdownClassName:"mlflow-model-select-dropdown",onChange:this.handleModelSelectChange,placeholder:"Select a model",filterOption:this.handleFilterOption,onSearch:this.props.onSearchRegisteredModels,showSearch:!0,children:[(0,a.FD)(l,{value:u,className:"mlflow-create-new-model-option",children:[(0,a.Y)("i",{className:"fa fa-plus fa-fw",style:{fontSize:13}})," ",c]}),(0,a.Y)(d,{label:"Models",children:Object.values(e).map((e=>this.renderModel(e)))})]})}),r?(0,a.Y)(i.LegacyForm.Item,{label:"Model Name",name:p,rules:[{required:!0,message:"Please input a name for the new model."},{validator:this.modelNameValidator}],children:(0,a.Y)(o.I,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodelform.tsx_132",placeholder:"Input a model name"})}):null,this.renderExplanatoryText()]})}}},24712:function(e,t,s){s.d(t,{S:function(){return Y}});var n=s(68248),i=s(46709),o=s(884),r=s(27757),a=s(79081),l=s(27299),d=s(40724),c=s(97407),u=s(7655),m=s(73408);const p="value",h=({form:e,name:t,initialTags:s})=>{const n=(0,u.A)(),i=(0,c.$W)({name:t,emptyValue:{key:"",value:""},keyProperty:"key",valueProperty:p,form:e,defaultValues:s});return(0,m.FD)(c.Es,{...i,children:[(0,m.FD)(c.qd,{children:[(0,m.Y)(c.C2,{children:(0,m.Y)(d.A,{id:"h2SXjO",defaultMessage:"Key"})}),(0,m.Y)(c.C2,{children:(0,m.Y)(d.A,{id:"6yjymQ",defaultMessage:"Value"})})]}),i.fields.map(((e,t)=>(0,m.FD)(c.qd,{children:[(0,m.Y)(c.R0,{index:t,rules:{validate:{unique:e=>{const s=i.getTagsValues();return(null===s||void 0===s?void 0:s.findIndex((t=>t.key===e)))===t||n.formatMessage({id:"sLBHQp",defaultMessage:"Key must be unique"})},required:e=>{var s;const o=i.getTagsValues();return!(null!==o&&void 0!==o&&null!==(s=o.at(t))&&void 0!==s&&s[p]&&!e)||n.formatMessage({id:"J45Atg",defaultMessage:"Key is required if value is present"})}}}}),(0,m.Y)(c.tP,{index:t}),(0,m.Y)(c.ki,{index:t,componentId:"endpoint-tags-section.remove-button"})]},e.id)))]})};var g=s(33972);const f="key",v="value",M="tags",y={key:"",value:""},Y=({componentIdPrefix:e,title:t,visible:s,initialTags:c,isLoading:u=!1,error:p,onSubmit:Y,onSuccess:A,onClose:I})=>{const T=`${e}.tag-assignment-modal`,b=(0,g.i)((()=>c),[c]),[S,_]=(0,i.useState)(!1),{theme:D}=(0,r.u)(),w=(0,o.mN)({mode:"onChange"}),V=()=>{_(!1),w.reset({[M]:[y]}),null===I||void 0===I||I()},C=(0,m.Y)(d.A,{id:"AGWpnl",defaultMessage:"Add tags"});return{TagAssignmentModal:(0,m.FD)(a.d,{componentId:`${T}`,title:null!==t&&void 0!==t?t:C,visible:null!==s&&void 0!==s?s:S,destroyOnClose:!0,onCancel:V,footer:(0,m.FD)(m.FK,{children:[(0,m.Y)(r.B,{componentId:`${T}.submit-button`,onClick:V,disabled:u,children:(0,m.Y)(d.A,{id:"awekbG",defaultMessage:"Cancel"})}),(0,m.Y)(r.B,{componentId:`${T}.submit-button`,type:"primary",onClick:w.handleSubmit((e=>{var t,s;const n=e[M].filter((e=>Boolean(e[f]))),i=null!==(t=n.filter((e=>!(null!==c&&void 0!==c&&c.some((t=>t[f]===e[f]&&t[v]===e[v]))))))&&void 0!==t?t:[],o=null!==(s=null===c||void 0===c?void 0:c.filter((e=>!n.some((t=>t[f]===e[f])))))&&void 0!==s?s:[];Y(i,o).then((()=>{V(),null===A||void 0===A||A()}))})),loading:u,disabled:u,children:(0,m.Y)(d.A,{id:"C6ReUY",defaultMessage:"Save"})})]}),children:[p&&(0,m.Y)(l.Alert,{type:"error",message:p,componentId:`${T}.error`,closable:!1,css:(0,n.AH)({marginBottom:D.spacing.sm},"")}),(0,m.Y)(h,{name:M,form:w,initialTags:b})]}),showTagAssignmentModal:()=>{_(!0)},hideTagAssignmentModal:V}}},27023:function(e,t,s){s.r(t),s.d(t,{ModelVersionPage:function(){return ge},ModelVersionPageImpl:function(){return me},default:function(){return fe}});var n=s(46709),i=s(56530),o=s(99213),r=s(5690),a=s(61349),l=s(76118),d=s(91105),c=s(27206),u=s(24712);const m=e=>{const{TagAssignmentModal:t}=(0,u.S)({...e});return t};var p=s(74151),h=s(27757),g=s(79081),f=s(7655),v=s(40724),M=s(43233),y=s(11522),Y=s(87821),A=s(9695),I=s(73408);var T={name:"1yh8glp",styles:"margin-top:-12px"};const b=e=>{const t=(0,f.A)(),s=(0,d.Zp)(),r=(0,n.useRef)((0,M.yk)()),a=(0,n.useRef)((0,M.yk)()),{modelVersion:u}=e,[m,p]=(0,n.useState)(!1),[b,S]=(0,n.useState)(!1),_=(0,i.wA)(),D=(0,i.d4)((e=>e.entities.modelByName)),w=(0,n.useRef)(),V=()=>{p(!1),S(!1)},C=e=>{S(!1),y.A.logErrorAndNotifyUser(e)},R=(0,n.useCallback)((e=>{_((0,o.JK)((0,Y.pc)(e),5))}),[_]),x=(0,n.useMemo)((()=>(0,l.debounce)(R,300)),[R]);(0,n.useEffect)((()=>{_((0,o.JK)())}),[_]),(0,n.useEffect)((()=>{m&&_((0,o.JK)())}),[_,m]);return(0,I.FD)("div",{className:"promote-model-btn-wrapper",children:[(0,I.Y)(h.B,{componentId:"codegen_mlflow_app_src_model-registry_components_promotemodelbutton.tsx_165",className:"promote-model-btn",type:"primary",onClick:()=>{p(!0)},children:(0,I.Y)(v.A,{id:"+RYBrq",defaultMessage:"Promote model"})}),(0,I.Y)(g.d,{title:(0,I.Y)(v.A,{id:"oBjwod",defaultMessage:"Promote {sourceModelName} version {sourceModelVersion}",values:{sourceModelName:u.name,sourceModelVersion:u.version}}),width:640,visible:m,onOk:()=>{w.current.validateFields().then((e=>{S(!0);const t=e[A.BE],n="models:/"+u.name+"/"+u.version;if(t===A.QN){const t=e[A.F3];_((0,o.eF)(t,r.current)).then((()=>_((0,o.Ey)(t,n,u.run_id,u.tags,a.current)))).then((e=>{V();const{version:n}=e.value.model_version;s(c.fM.getModelVersionPageRoute(t,n))})).catch(C)}else _((0,o.Ey)(t,n,u.run_id,u.tags,a.current)).then((e=>{V();const{version:n}=e.value.model_version;s(c.fM.getModelVersionPageRoute(t,n))})).catch(C)}))},okText:t.formatMessage({id:"DCkSC3",defaultMessage:"Promote"}),cancelText:t.formatMessage({id:"0tU5gv",defaultMessage:"Cancel"}),confirmLoading:b,onCancel:()=>{p(!1)},centered:!0,children:(0,I.FD)(I.FK,{children:[(0,I.Y)(h.T.Paragraph,{css:T,children:(0,I.Y)(v.A,{id:"V5cjvM",defaultMessage:"Copy your MLflow models to another registered model for simple model promotion across environments. For more mature production-grade setups, we recommend setting up automated model training workflows to produce models in controlled environments. <link>Learn more</link>",values:{link:e=>(0,I.Y)(h.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_promotemodelbutton.tsx_140",href:"https://mlflow.org/docs/latest/model-registry.html#promoting-an-mlflow-model-across-environments",openInNewTab:!0,children:e})}})}),(0,I.Y)(A.xH,{modelByName:D,innerRef:w,onSearchRegisteredModels:x,isCopy:!0})]})})]})};var S=s(65181),_=s(68248),D=s(27299),w=s(673),V=s(884);let C=function(e){return e[e.RequestOrDirect=0]="RequestOrDirect",e[e.Approve=1]="Approve",e[e.Reject=2]="Reject",e[e.Cancel=3]="Cancel",e}({});const R=({visible:e,onCancel:t,toStage:s,allowArchivingExistingVersions:i,transitionDescription:o,onConfirm:r,mode:a=C.RequestOrDirect})=>{const{theme:l}=(0,h.u)(),d=(0,V.mN)({defaultValues:{comment:"",archiveExistingVersions:!1}});return(0,n.useEffect)((()=>{e&&d.reset()}),[d,e]),(0,I.FD)(g.d,{title:a===C.Approve?(0,I.Y)(v.A,{id:"CjBv5h",defaultMessage:"Approve pending request"}):a===C.Reject?(0,I.Y)(v.A,{id:"dzoxyA",defaultMessage:"Reject pending request"}):a===C.Cancel?(0,I.Y)(v.A,{id:"bS/iHC",defaultMessage:"Cancel pending request"}):(0,I.Y)(v.A,{id:"rxMHgr",defaultMessage:"Stage transition"}),componentId:"mlflow.model_registry.stage_transition_modal_v2",visible:e,onCancel:t,okText:(0,I.Y)(v.A,{id:"7PCvDy",defaultMessage:"OK"}),cancelText:(0,I.Y)(v.A,{id:"25VTYi",defaultMessage:"Cancel"}),onOk:r&&d.handleSubmit(r),children:[o,(0,I.Y)(g.S,{size:"sm"}),(0,I.Y)(D.FormUI.Label,{htmlFor:"mlflow.model_registry.stage_transition_modal_v2.comment",children:"Comment"}),(0,I.Y)(D.RHFControlledComponents.TextArea,{name:"comment",id:"mlflow.model_registry.stage_transition_modal_v2.comment",componentId:"mlflow.model_registry.stage_transition_modal_v2.comment",control:d.control,rows:4}),(0,I.Y)(g.S,{size:"sm"}),i&&s&&(0,I.Y)(D.RHFControlledComponents.Checkbox,{name:"archiveExistingVersions",componentId:"mlflow.model_registry.stage_transition_modal_v2.archive_existing_versions",control:d.control,children:(0,I.Y)(g.T,{componentId:"mlflow.model_registry.stage_transition_modal_v2.archive_existing_versions.tooltip",content:(0,w.gL)(s),children:(0,I.Y)("span",{css:(0,_.AH)({"[role=status]":{marginRight:l.spacing.xs}},""),children:(0,I.Y)(v.A,{id:"rAJDzz",defaultMessage:"Transition existing {currentStage} model version to {archivedStage}",values:{currentStage:(0,I.Y)("span",{css:(0,_.AH)({marginLeft:l.spacing.xs},""),children:w.$0[s]}),archivedStage:(0,I.Y)("span",{css:(0,_.AH)({marginLeft:l.spacing.xs},""),children:w.$0[w.e3.ARCHIVED]})}})})})})]})};class x extends n.Component{constructor(...e){super(...e),this.state={confirmModalVisible:!1,confirmingActivity:null,handleConfirm:void 0},this.handleMenuItemClick=e=>{const{onSelect:t}=this.props;this.setState({confirmModalVisible:!0,confirmingActivity:e,handleConfirm:t&&(s=>{if(this.setState({confirmModalVisible:!1}),s){const{archiveExistingVersions:n=!1}=s;t(e,n)}else;})})},this.handleConfirmModalCancel=()=>{this.setState({confirmModalVisible:!1})},this.getNoneCurrentStages=e=>{const t=Object.values(w.e3);return(0,l.remove)(t,(t=>t===e)),t}}getMenu(){const{currentStage:e}=this.props,t=this.getNoneCurrentStages(e);return(0,I.Y)(D.Menu,{children:t.map((e=>(0,I.FD)(D.Menu.Item,{onClick:()=>this.handleMenuItemClick({type:w.$p.APPLIED_TRANSITION,to_stage:e}),children:[(0,I.Y)(v.A,{id:"UhdPmo",defaultMessage:"Transition to"}),"\xa0\xa0\xa0",(0,I.Y)(D.ArrowRightIcon,{}),"\xa0\xa0\xa0",w.$0[e]]},`transition-to-${e}`)))})}renderConfirmModal(){const{confirmModalVisible:e,confirmingActivity:t,handleConfirm:s}=this.state;if(!t)return null;const n=t.type===w.$p.APPLIED_TRANSITION&&w.jI.includes(t.to_stage);return(0,I.Y)(R,{visible:e,toStage:t.to_stage,onConfirm:s,onCancel:this.handleConfirmModalCancel,transitionDescription:k(t),allowArchivingExistingVersions:n})}render(){const{currentStage:e}=this.props;return(0,I.FD)("span",{children:[(0,I.Y)(D.Dropdown,{overlay:this.getMenu(),trigger:["click"],className:"mlflow-stage-transition-dropdown",children:(0,I.FD)("span",{children:[w.$0[null!==e&&void 0!==e?e:w.e3.NONE],(0,I.Y)(D.ChevronDownIcon,{css:(0,_.AH)({cursor:"pointer",marginLeft:-4},"")})]})}),this.renderConfirmModal()]})}}x.defaultProps={currentStage:w.e3.NONE};const k=e=>e?(0,I.FD)("div",{children:[(0,I.Y)(v.A,{id:"ZYBoeF",defaultMessage:"Transition to"}),"\xa0\xa0\xa0",(0,I.Y)(D.ArrowRightIcon,{}),"\xa0\xa0\xa0",w.$0[e.to_stage]]}):null;var E=s(32898),N=s(24523),F=s(60284),P=s(45966),L=s(52644),q=s(71647),$=s(10536),O=s(84173);var K=s(12769),H=s(58340),U=s(31655),B=s(3469),j=s(93083);const z=e=>(0,I.Y)(v.A,{id:"4Jyn2b",defaultMessage:"Add/Edit alias for model version {version}",values:{version:e}});var G={name:"lkh5er",styles:"display:flex;flex-wrap:wrap;align-items:center"};const W=({aliases:e=[],modelEntity:t,version:s,onAliasesModified:r})=>{var a;const l=(0,i.wA)(),{EditAliasesModal:d,showEditAliasesModal:c}=(0,B.t)({aliases:null!==(a=null===t||void 0===t?void 0:t.aliases)&&void 0!==a?a:[],onSuccess:r,onSave:async(e,s,n)=>{var i;return l((0,o.mq)(null!==(i=null===t||void 0===t?void 0:t.name)&&void 0!==i?i:"",e,s,n))},getTitle:z,description:(0,I.Y)(v.A,{id:"2DNVN4",defaultMessage:"Aliases allow you to assign a mutable, named reference to a particular model version. <link>Learn more</link>",values:{link:e=>(0,I.Y)("a",{href:w.Tm,rel:"noreferrer",target:"_blank",children:e})}})}),u=(0,n.useCallback)((()=>{c(s)}),[c,s]);return(0,I.FD)(I.FK,{children:[d,e.length<1?(0,I.Y)(h.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversionviewaliaseditor.tsx_29",size:"small",type:"link",onClick:u,title:"Add aliases",children:"Add"}):(0,I.FD)("div",{css:G,children:[e.map((e=>(0,I.Y)(j.Z,{compact:!0,value:e},e))),(0,I.Y)(h.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversionviewaliaseditor.tsx_37",size:"small",icon:(0,I.Y)(D.PencilIcon,{}),onClick:u,title:"Edit aliases"})]})]})};var Q=s(77153);var X={name:"s5xdrg",styles:"display:flex;align-items:center"},J={name:"gc6sdx",styles:"padding-left:4px"},Z={name:"vw6wts",styles:"margin-top:8px;display:flex;justify-content:flex-end"};class ee extends n.Component{constructor(...e){super(...e),this.state={isDeleteModalVisible:!1,isDeleteModalConfirmLoading:!1,showDescriptionEditor:!1,isTagsRequestPending:!1,isTagAssignmentModalVisible:!1,isSavingTags:!1,tagSavingError:void 0},this.formRef=n.createRef(),this.sharedTaggingUIEnabled=(0,U.V0)(),this.handleDeleteConfirm=()=>{const{modelName:e="",modelVersion:t,navigate:s}=this.props,{version:n}=t;this.showConfirmLoading(),this.props.deleteModelVersionApi(e,n).then((()=>{s(c.fM.getModelPageRoute(e))})).catch((e=>{this.hideConfirmLoading(),y.A.logErrorAndNotifyUser(e)}))},this.showDeleteModal=()=>{this.setState({isDeleteModalVisible:!0})},this.hideDeleteModal=()=>{this.setState({isDeleteModalVisible:!1})},this.showConfirmLoading=()=>{this.setState({isDeleteModalConfirmLoading:!0})},this.hideConfirmLoading=()=>{this.setState({isDeleteModalConfirmLoading:!1})},this.handleCancelEditDescription=()=>{this.setState({showDescriptionEditor:!1})},this.handleSubmitEditDescription=e=>this.props.handleEditDescription(e).then((()=>{this.setState({showDescriptionEditor:!1})})),this.startEditingDescription=e=>{e.stopPropagation(),this.setState({showDescriptionEditor:!0})},this.getTags=()=>(0,l.sortBy)(y.A.getVisibleTagValues(this.props.tags).map((([e,t])=>({key:e,name:e,value:t}))),"name"),this.handleCloseTagAssignmentModal=()=>{this.setState({isTagAssignmentModalVisible:!1,tagSavingError:void 0})},this.handleEditTags=()=>{this.setState({isTagAssignmentModalVisible:!0,tagSavingError:void 0})},this.handleSaveTags=(e,t)=>{this.setState({isSavingTags:!0});const{modelName:s}=this.props,{version:n}=this.props.modelVersion,i=e.map((({key:e,value:t})=>this.props.setModelVersionTagApi(s,n,e,t))),o=t.map((({key:e})=>this.props.deleteModelVersionTagApi(s,n,e)));return Promise.all([...i,...o]).then((()=>{this.setState({isSavingTags:!1})})).catch((e=>{const t=e instanceof Q.s?e.getMessageField():e.message;this.setState({isSavingTags:!1,tagSavingError:t})}))},this.handleAddTag=e=>{const t=this.formRef.current,{modelName:s}=this.props,{version:n}=this.props.modelVersion;this.setState({isTagsRequestPending:!0}),this.props.setModelVersionTagApi(s,n,e.name,e.value).then((()=>{this.setState({isTagsRequestPending:!1}),t.resetFields()})).catch((e=>{this.setState({isTagsRequestPending:!1}),console.error(e);const t=e instanceof Q.s?e.getMessageField():e.message;y.A.displayGlobalErrorNotification(this.props.intl.formatMessage({id:"IWuVOI",defaultMessage:"Failed to add tag. Error: {userVisibleError}"},{userVisibleError:t}))}))},this.handleSaveEdit=({name:e,value:t})=>{const{modelName:s}=this.props,{version:n}=this.props.modelVersion;return this.props.setModelVersionTagApi(s,n,e,t).catch((e=>{console.error(e);const t=e instanceof Q.s?e.getMessageField():e.message;y.A.displayGlobalErrorNotification(this.props.intl.formatMessage({id:"HNLDYl",defaultMessage:"Failed to set tag. Error: {userVisibleError}"},{userVisibleError:t}))}))},this.handleDeleteTag=({name:e})=>{const{modelName:t}=this.props,{version:s}=this.props.modelVersion;return this.props.deleteModelVersionTagApi(t,s,e).catch((e=>{console.error(e);const t=e instanceof Q.s?e.getMessageField():e.message;y.A.displayGlobalErrorNotification(this.props.intl.formatMessage({id:"Ay+ZP/",defaultMessage:"Failed to delete tag. Error: {userVisibleError}"},{userVisibleError:t}))}))},this.renderAliasEditor=()=>{var e,t;const s=this.props.modelVersion.version,n=(null===(e=this.props.modelEntity)||void 0===e||null===(t=e.aliases)||void 0===t?void 0:t.filter((({version:e})=>e===s)).map((({alias:e})=>e)))||[];return(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"HzGYm5",defaultMessage:"Aliases"}),children:(0,I.Y)(W,{aliases:n,version:this.props.modelVersion.version,modelEntity:this.props.modelEntity,onAliasesModified:this.props.onAliasesModified})},"description-key-aliases")}}componentDidMount(){const e=`${this.props.modelName} v${this.props.modelVersion.version} - MLflow Model`;y.A.updatePageTitle(e)}shouldHideDeleteOption(){return!1}renderStageDropdown(e){const{handleStageTransitionDropdownSelect:t}=this.props;return(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"IHyeUr",defaultMessage:"Stage"}),children:e.status===w.IP.READY?(0,I.Y)(x,{currentStage:e.current_stage,permissionLevel:e.permission_level,onSelect:t}):w.$0[e.current_stage]},"description-key-stage")}renderDisabledStage(e){const t=(0,I.Y)(v.A,{id:"gIc8Lp",defaultMessage:"Stages have been deprecated in the new Model Registry UI. Learn how to migrate models <link>here</link>.",values:{link:e=>(0,I.Y)(h.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversionview.tsx_301",href:N.pG,openInNewTab:!0,children:e})}});return(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"paQ2Wc",defaultMessage:"Stage (deprecated)"}),children:(0,I.FD)("div",{css:X,children:[w.QQ[e.current_stage],(0,I.Y)(g.T,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversionview_tsx_394",content:t,side:"bottom",children:(0,I.Y)(g.I,{css:J})})]})},"description-key-stage-disabled")}renderRegisteredTimestampDescription(e){return(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"+1i81u",defaultMessage:"Registered At"}),children:y.A.formatTimestamp(e,this.props.intl)},"description-key-register")}renderCreatorDescription(e){return e&&(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"5Mzn2b",defaultMessage:"Creator"}),children:e},"description-key-creator")}renderLastModifiedDescription(e){return(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"o7dzKo",defaultMessage:"Last Modified"}),children:y.A.formatTimestamp(e,this.props.intl)},"description-key-modified")}renderSourceRunDescription(){var e;return null!==(e=this.props.modelVersion)&&void 0!==e&&e.run_id?(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"+LLlvi",defaultMessage:"Source Run"}),className:"linked-run",children:this.resolveRunLink()},"description-key-source-run"):null}renderCopiedFromLink(){const{source:e}=this.props.modelVersion;if(!e||!/^models:\/[^/]+\/[^/]+$/.test(e))return null;const t=e.split("/"),s=t[1],n=t[2],i=(0,I.FD)(I.FK,{children:[(0,I.Y)(d.N_,{"data-testid":"copied-from-link",to:c.fM.getModelVersionPageRoute(s,n),children:s}),"\xa0",(0,I.Y)(v.A,{id:"1RxxTj",defaultMessage:"(Version {sourceModelVersion})",values:{sourceModelVersion:n}})]});return(0,I.Y)(E.K.Item,{label:this.props.intl.formatMessage({id:"oZReP2",defaultMessage:"Copied from"}),children:i},"description-key-copied-from")}getDescriptions(e){const{usingNextModelsUI:t}=this.props;return[this.renderRegisteredTimestampDescription(e.creation_timestamp),this.renderCreatorDescription(e.user_id),this.renderLastModifiedDescription(e.last_updated_timestamp),this.renderSourceRunDescription(),this.renderCopiedFromLink(),t?this.renderAliasEditor():this.renderStageDropdown(e),t?this.renderDisabledStage(e):null].filter((e=>null!==e))}renderMetadata(e){return(0,I.Y)(E.K,{columns:5,className:"metadata-list",children:this.getDescriptions(e)})}renderStatusAlert(){const{status:e,status_message:t}=this.props.modelVersion;if(e!==w.IP.READY){const s=w.zA[e],n=e===w.IP.FAILED_REGISTRATION?"error":"info";return(0,I.Y)(D.Alert,{type:n,className:`mlflow-status-alert mlflow-status-alert-${n}`,message:t||s,icon:w.UA[e],banner:!0})}return null}renderDescriptionEditIcon(){return(0,I.FD)(h.B,{componentId:"codegen_mlflow_app_src_model-registry_components_modelversionview.tsx_516","data-testid":"descriptionEditButton",type:"link",onClick:this.startEditingDescription,children:[(0,I.Y)(v.A,{id:"Ik96R6",defaultMessage:"Edit"})," "]})}resolveRunLink(){const{modelVersion:e,runInfo:t}=this.props;if(e.run_link)return(0,I.Y)("a",{target:"_blank",href:e.run_link,children:this.resolveRunName()});if(t){var s;let e=null;const n=null===(s=this.props.modelVersion)||void 0===s?void 0:s.source;return n&&(e=function(e,t){var s;return null===(s=e.match(new RegExp(`/${t}/artifacts/(.+)`)))||void 0===s?void 0:s[1]}(n,t.runUuid)),(0,I.Y)(d.N_,{to:F.Ay.getRunPageRoute(t.experimentId,t.runUuid,e),children:this.resolveRunName()})}return null}resolveRunName(){const{modelVersion:e,runInfo:t,runDisplayName:s}=this.props;return e.run_link?e.run_link.substr(0,37)+"...":t?s||t.runUuid:null}renderPomoteModelButton(){const{modelVersion:e,usingNextModelsUI:t,navigate:s}=this.props;return t?(0,I.Y)(b,{modelVersion:e}):null}renderTags(){return this.sharedTaggingUIEnabled?(0,I.Y)(E.K,{columns:1,"data-testid":"model-view-tags",children:(0,I.Y)(E.K.Item,{label:"Tags",children:(0,I.Y)(p.L,{tags:this.getTags(),onEdit:this.handleEditTags})})}):null}getPageHeader(e,t){const s=[{id:"delete",itemName:(0,I.Y)(v.A,{id:"4+RPaz",defaultMessage:"Delete"}),onClick:this.showDeleteModal,disabled:w.jI.includes(this.props.modelVersion.current_stage)}];return(0,I.FD)($.z,{title:e,breadcrumbs:t,children:[!this.shouldHideDeleteOption()&&(0,I.Y)($.o,{menu:s}),this.renderPomoteModelButton()]})}render(){const{modelName:e="",modelVersion:t,tags:s,schema:n}=this.props,{description:i}=t,{isDeleteModalVisible:o,isDeleteModalConfirmLoading:r,showDescriptionEditor:a,isTagsRequestPending:l}=this.state,u=(0,I.Y)(v.A,{id:"F16DNA",defaultMessage:"Version {versionNum}",values:{versionNum:t.version}}),p=[(0,I.Y)(d.N_,{to:c.fM.modelListPageRoute,children:(0,I.Y)(v.A,{id:"pl1bdY",defaultMessage:"Registered Models"})}),(0,I.Y)(d.N_,{"data-testid":"breadcrumbRegisteredModel",to:c.fM.getModelPageRoute(e),children:e})];return(0,I.FD)("div",{children:[(0,I.Y)(m,{isLoading:this.state.isSavingTags,error:this.state.tagSavingError,visible:this.state.isTagAssignmentModalVisible,initialTags:this.getTags(),componentIdPrefix:"model-version-view",onSubmit:this.handleSaveTags,onClose:this.handleCloseTagAssignmentModal}),this.getPageHeader(u,p),this.renderStatusAlert(),this.renderMetadata(t),this.renderTags(),(0,U.WX)()&&(0,I.Y)("div",{css:Z,children:(0,I.Y)(H.C,{})}),(0,I.Y)(P.i,{title:(0,I.FD)("span",{children:[(0,I.Y)(v.A,{id:"z9UqPZ",defaultMessage:"Description"})," ",a?null:this.renderDescriptionEditIcon()]}),forceOpen:a,defaultCollapsed:!i,"data-testid":"model-version-description-section",children:(0,I.Y)(L.V,{defaultMarkdown:i,onSubmit:this.handleSubmitEditDescription,onCancel:this.handleCancelEditDescription,showEditor:a})}),!this.sharedTaggingUIEnabled&&(0,I.Y)("div",{"data-testid":"tags-section",children:(0,I.Y)(P.i,{title:(0,I.Y)(v.A,{id:"TlFUsN",defaultMessage:"Tags"}),defaultCollapsed:0===y.A.getVisibleTagValues(s).length,"data-testid":"model-version-tags-section",children:(0,I.Y)(q.h,{innerRef:this.formRef,handleAddTag:this.handleAddTag,handleDeleteTag:this.handleDeleteTag,handleSaveEdit:this.handleSaveEdit,tags:s,isRequestPending:l})})}),(0,I.Y)(P.i,{title:(0,I.Y)(v.A,{id:"gUdmaJ",defaultMessage:"Schema"}),"data-testid":"model-version-schema-section",children:(0,I.Y)(S.i,{schema:n})}),(0,I.Y)(g.d,{title:this.props.intl.formatMessage({id:"98Ub01",defaultMessage:"Delete Model Version"}),visible:o,confirmLoading:r,onOk:this.handleDeleteConfirm,okText:this.props.intl.formatMessage({id:"ICtiKS",defaultMessage:"Delete"}),okType:"danger",onCancel:this.hideDeleteModal,cancelText:this.props.intl.formatMessage({id:"zMhOr3",defaultMessage:"Cancel"}),children:(0,I.Y)("span",{children:(0,I.Y)(v.A,{id:"88l+j9",defaultMessage:"Are you sure you want to delete model version {versionNum}? This cannot be undone.",values:{versionNum:t.version}})})})]})}}const te={setModelVersionTagApi:o.Id,deleteModelVersionTagApi:o.nZ},se=(0,i.Ng)(((e,t)=>{const{modelName:s}=t,{version:n}=t.modelVersion;return{tags:(0,a.hs)(s,n,e)}}),te)((0,K.p)((0,O.Ay)(ee)));var ne=s(40072),ie=s(74264),oe=s(42110),re=s(86904),ae=s(99637),le=s(54401),de=s(2560),ce=s(55570),ue=s(91113);class me extends n.Component{constructor(...e){super(...e),this.listTransitionRequestId=void 0,this.pollIntervalId=void 0,this.initGetModelVersionDetailsRequestId=(0,M.yk)(),this.getRunRequestId=(0,M.yk)(),this.updateModelVersionRequestId=(0,M.yk)(),this.transitionModelVersionStageRequestId=(0,M.yk)(),this.getModelVersionDetailsRequestId=(0,M.yk)(),this.initGetMlModelFileRequestId=(0,M.yk)(),this.state={criticalInitialRequestIds:[this.initGetModelVersionDetailsRequestId,this.initGetMlModelFileRequestId]},this.pollingRelatedRequestIds=[this.getModelVersionDetailsRequestId,this.getRunRequestId],this.hasPendingPollingRequest=()=>this.pollingRelatedRequestIds.every((e=>{const t=this.props.apis[e];return Boolean(t&&t.active)})),this.loadData=e=>{const t=[this.getModelVersionDetailAndRunInfo(e)];return Promise.all(t)},this.pollData=()=>{const{modelName:e,version:t,navigate:s}=this.props;return!this.hasPendingPollingRequest()&&y.A.isBrowserTabVisible()?this.loadData().catch((n=>{"RESOURCE_DOES_NOT_EXIST"===n.getErrorCode()?(y.A.logErrorAndNotifyUser(n),this.props.deleteModelVersionApi(e,t,void 0,!0),s(c.fM.getModelPageRoute(e))):console.error(n)})):Promise.resolve()},this.handleStageTransitionDropdownSelect=(e,t)=>{const{modelName:s,version:n}=this.props,i=e.to_stage;e.type===w.$p.APPLIED_TRANSITION&&this.props.transitionModelVersionStageApi(s,n.toString(),i,t,this.transitionModelVersionStageRequestId).then(this.loadData).catch(y.A.logErrorAndNotifyUser)},this.handleEditDescription=e=>{const{modelName:t,version:s}=this.props;return this.props.updateModelVersionApi(t,s,e,this.updateModelVersionRequestId).then(this.loadData).catch(console.error)},this.loadModelDataWithAliases=()=>{this.props.getRegisteredModelApi(this.props.modelName)}}getModelVersionDetailAndRunInfo(e){const{modelName:t,version:s}=this.props;return this.props.getModelVersionApi(t,s,!0===e?this.initGetModelVersionDetailsRequestId:this.getModelVersionDetailsRequestId).then((({value:e})=>{var t;e&&!e[(0,ae.zL)("model_version")].run_link&&null!==(t=e[(0,ae.zL)("model_version")])&&void 0!==t&&t.run_id&&this.props.getRunApi(e[(0,ae.zL)("model_version")].run_id,this.getRunRequestId)}))}getModelVersionMlModelFile(){const{modelName:e,version:t}=this.props;this.props.getModelVersionArtifactApi(e,t).then((s=>this.props.parseMlModelFile(e,t,s.value,this.initGetMlModelFileRequestId))).catch((()=>{this.setState((e=>({criticalInitialRequestIds:(0,l.without)(e.criticalInitialRequestIds,this.initGetMlModelFileRequestId)})))}))}componentDidMount(){this.loadData(!0).catch(console.error),this.loadModelDataWithAliases(),this.pollIntervalId=setInterval(this.pollData,w.Gs),this.getModelVersionMlModelFile()}componentDidUpdate(e){this.props.version===e.version&&this.props.modelName===e.modelName||(this.loadData(!0).catch(console.error),this.getModelVersionMlModelFile())}componentWillUnmount(){clearInterval(this.pollIntervalId)}render(){const{modelName:e,version:t,modelVersion:s,runInfo:n,runDisplayName:i,navigate:o,schema:r,modelEntity:a}=this.props;return(0,I.Y)(le.L,{children:(0,I.Y)(ie.Ay,{requestIds:this.state.criticalInitialRequestIds,children:(l,d,u)=>{if(d){clearInterval(this.pollIntervalId);const s=y.A.getResourceConflictError(u,this.state.criticalInitialRequestIds);if(s)return(0,I.Y)(oe.E,{statusCode:409,subMessage:s.error.getMessageField(),fallbackHomePageReactRoute:c.fM.modelListPageRoute});if(y.A.shouldRender404(u,this.state.criticalInitialRequestIds))return(0,I.Y)(oe.E,{statusCode:404,subMessage:`Model ${e} v${t} does not exist`,fallbackHomePageReactRoute:c.fM.modelListPageRoute});const n=u.filter((e=>{var t;return this.state.criticalInitialRequestIds.includes(e.id)&&(null===(t=e.error)||void 0===t?void 0:t.getErrorCode())===N.tG.PERMISSION_DENIED}));var m;if(n&&n[0])return(0,I.Y)(oe.E,{statusCode:403,subMessage:this.props.intl.formatMessage({id:"bQSJKh",defaultMessage:'Permission denied for {modelName} version {version}. Error: "{errorMsg}"'},{modelName:e,version:t,errorMsg:null===(m=n[0].error)||void 0===m?void 0:m.getMessageField()}),fallbackHomePageReactRoute:c.fM.modelListPageRoute});(0,ie.dD)(u)}else{if(l)return(0,I.Y)(re.y,{});if(s)return(0,I.Y)(se,{modelName:e,modelVersion:s,modelEntity:a,runInfo:n,runDisplayName:i,handleEditDescription:this.handleEditDescription,deleteModelVersionApi:this.props.deleteModelVersionApi,navigate:o,handleStageTransitionDropdownSelect:this.handleStageTransitionDropdownSelect,schema:r,onAliasesModified:this.loadModelDataWithAliases})}return null}})})}}const pe={getModelVersionApi:o.s5,getRegisteredModelApi:o.SY,updateModelVersionApi:o.DL,transitionModelVersionStageApi:o.tP,getModelVersionArtifactApi:o.ax,parseMlModelFile:o.qI,deleteModelVersionApi:o.TQ,getRunApi:r.aO},he=(0,de.h)((0,i.Ng)(((e,t)=>{const s=decodeURIComponent(t.params.modelName),{version:n}=t.params,i=(0,a.Af)(e,s,n),o=(0,a.SE)(e,s,n);let r=null;i&&!i.run_link&&(r=(0,ne.K4)(i&&i.run_id,e));const l=r&&(0,ne.X3)(r.runUuid,e)&&r&&y.A.getRunDisplayName(r,r.runUuid),d=e.entities.modelByName[s],{apis:c}=e;return{modelName:s,version:n,modelVersion:i,schema:o,runInfo:r,runDisplayName:l,apis:c,modelEntity:d}}),pe)((0,O.Ay)(me))),ge=(0,ce.X)(ue.A.mlflowServices.MODEL_REGISTRY,he);var fe=ge},31988:function(e,t,s){s.d(t,{u:function(){return r}});var n=s(27757),i=s(27299),o=s(73408);function r(e){return(0,o.Y)(n.B,{icon:(0,o.Y)(i.TrashIcon,{}),...e})}},33972:function(e,t,s){s.d(t,{i:function(){return o}});var n=s(76118),i=s(46709);const o=(e,t)=>{const s=(0,i.useRef)();return s.current&&(0,n.isEqual)(t,s.current.deps)||(s.current={deps:t,value:e()}),s.current.value}},45175:function(e,t,s){s.d(t,{V:function(){return r}});var n=s(68248),i=s(27757),o=s(73408);function r({children:e}){const{theme:t}=(0,i.u)();return(0,o.Y)("div",{css:(0,n.AH)({display:"flex",flexDirection:"column",gap:t.spacing.sm},""),children:e})}},59281:function(e,t,s){s.d(t,{t:function(){return f}});var n=s(68248),i=s(27299),o=s(79081),r=s(27757),a=s(46709),l=s(7655),d=s(91701),c=s(73408);const{Paragraph:u}=r.T;var m={name:"zjik7",styles:"display:flex"},p={name:"1ff36h2",styles:"flex-grow:1"};const h=a.memo((e=>{const{theme:t}=(0,r.u)();return(0,c.Y)(o.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(u,{css:p,children:(0,c.Y)("pre",{css:(0,n.AH)({backgroundColor:t.colors.backgroundPrimary,marginTop:t.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,n.AH)({marginTop:t.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(i.CopyIcon,{}),"aria-label":"Copy"})})]})})}));function g(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const f=({isClosable:e=!1,onClose:t,tag:s,enableFullViewModal:d=!1,charLimit:u=30,maxWidth:m=300,className:p})=>{const f=(0,l.A)(),[v,M]=(0,a.useState)(!1),{shouldTruncateKey:y,shouldTruncateValue:Y}=function(e,t=30){const{key:s,value:n}=e,i=s.length+n.length,o=s.length>n.length,r=o?n.length:s.length;return i<=t?{shouldTruncateKey:!1,shouldTruncateValue:!1}:r>t/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:o,shouldTruncateValue:!o}}(s,u),A=d&&(y||Y),I=f.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(i.Tag,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:t,title:s.key,className:p,children:(0,c.Y)(o.T,{content:A?I:"",componentId:"mlflow.common.components.key-value-tag.tooltip",children:(0,c.FD)("span",{css:(0,n.AH)({maxWidth:m,display:"inline-flex"},""),onClick:()=>A?M(!0):void 0,children:[(0,c.Y)(r.T.Text,{bold:!0,title:s.key,css:g(y),children:s.key}),s.value&&(0,c.FD)(r.T.Text,{title:s.value,css:g(Y),children:[": ",s.value]})]})})}),(0,c.Y)("div",{children:v&&(0,c.Y)(h,{tagKey:s.key,tagValue:s.value,isKeyValueTagFullViewModalVisible:v,setIsKeyValueTagFullViewModalVisible:M})})]})}},59930:function(e){e.exports=function(e,t,s,n,i,o,r,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,n,i,o,r,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},65181:function(e,t,s){s.d(t,{i:function(){return w}});var n=s(68248),i=s(46709),o=s(27757),r=s(27299),a=s(79081),l=s(66916),d=s(24523),c=s(7655),u=s(40724),m=s(76118),p=s(80625),h=s(73408);const{Text:g}=o.T;function f(e,t){const{type:s}=e,n=" ".repeat(2*t);if("object"===s){return`${n}{\n${Object.keys(e.properties).map((s=>{const n=e.properties[s],i=n.required?"":" (optional)",o=f(n,t+1),r=2*(t+1);return`${" ".repeat(r)}${s}: ${o.slice(r)+i}`})).join(",\n")}\n${n}}`}if("array"===s){const s=2*t;return`${n}Array(${f(e.items,t).slice(s)})`}return`${n}${s}`}var v={name:"hhyoc3",styles:"margin-left:32px"};function M({spec:e}){let t=!0;void 0!==e.required?({required:t}=e):void 0!==e.optional&&e.optional&&(t=!1);const s=t?(0,h.Y)(g,{bold:!0,children:"(required)"}):(0,h.Y)(g,{color:"secondary",children:"(optional)"}),n="name"in e?e.name:"-";return(0,h.FD)(g,{css:v,children:[n," ",s]})}function y({spec:e}){const{theme:t}=(0,o.u)(),s="tensor"===e.type?`Tensor (dtype: ${(i=e)["tensor-spec"].dtype}, shape: [${i["tensor-spec"].shape}])`:f(e,0);var i;return(0,h.Y)("pre",{css:(0,n.AH)({whiteSpace:"pre-wrap",padding:t.spacing.sm,marginTop:t.spacing.sm,marginBottom:t.spacing.sm},""),children:s})}var Y={name:"1q1lx84",styles:"flex:2;align-items:center"},A={name:"qejc9x",styles:"flex:3;align-items:center"};const I=({schemaData:e})=>{const t=(0,m.isEmpty)(e),s=(0,c.A)(),n=Boolean(e&&e.length>100),[g,f]=(0,i.useState)(""),v=(0,p.t)(g),I=(0,i.useMemo)((()=>{if(!n)return e;const t=v.toLowerCase();return null===e||void 0===e?void 0:e.filter((e=>"name"in e&&null!==e.name&&String(e.name).toLowerCase().includes(t))).slice(0,100)}),[e,v,n]);return t?(0,h.Y)(r.TableRow,{children:(0,h.Y)(r.TableCell,{children:(0,h.Y)(u.A,{id:"Wd8Tga",defaultMessage:"No schema. See <link>MLflow docs</link> for how to include input and output schema with your model.",values:{link:e=>(0,h.Y)("a",{href:d.zR,target:"_blank",rel:"noreferrer",children:e})}})})}):(0,h.FD)(h.FK,{children:[n&&(0,h.FD)(h.FK,{children:[(0,h.Y)(a.S,{}),(0,h.Y)(o.T.Hint,{children:(0,h.Y)(u.A,{id:"UYSMKb",defaultMessage:"Schema is too large to display all rows. Please search for a column name to filter the results. Currently showing {currentResults} results from {allResults} total rows.",values:{currentResults:null===I||void 0===I?void 0:I.length,allResults:null===e||void 0===e?void 0:e.length}})}),(0,h.Y)(a.S,{}),(0,h.Y)(l.I,{placeholder:s.formatMessage({id:"6BqLF2",defaultMessage:"Search for a field"}),componentId:"mlflow.schema_table.search_input",value:g,onChange:e=>f(e.target.value)}),(0,h.Y)(a.S,{})]}),null===I||void 0===I?void 0:I.map(((e,t)=>(0,h.FD)(r.TableRow,{children:[(0,h.Y)(r.TableCell,{css:Y,children:(0,h.Y)(M,{spec:e})}),(0,h.Y)(r.TableCell,{css:A,children:(0,h.Y)(y,{spec:e})})]},t)))]})};var T={name:"ddxhyk",styles:"max-width:800px"},b={name:"1189xqs",styles:"flex:2"},S={name:"15hibo9",styles:"flex:3"},_={name:"e0dnmk",styles:"cursor:pointer"},D={name:"e0dnmk",styles:"cursor:pointer"};const w=({schema:e,defaultExpandAllRows:t})=>{const{theme:s}=(0,o.u)(),[a,l]=(0,i.useState)(t),[d,c]=(0,i.useState)(t);return(0,h.FD)(r.Table,{css:T,children:[(0,h.FD)(r.TableRow,{isHeader:!0,children:[(0,h.Y)(r.TableHeader,{componentId:"mlflow.schema_table.header.name",css:b,children:(0,h.Y)(g,{bold:!0,css:(0,n.AH)({paddingLeft:s.spacing.lg+s.spacing.xs},""),children:(0,h.Y)(u.A,{id:"Nj6Ez5",defaultMessage:"Name"})})}),(0,h.Y)(r.TableHeader,{componentId:"mlflow.schema_table.header.type",css:S,children:(0,h.Y)(g,{bold:!0,children:(0,h.Y)(u.A,{id:"2f2qeb",defaultMessage:"Type"})})})]}),(0,h.FD)(h.FK,{children:[(0,h.Y)(r.TableRow,{onClick:()=>l(!a),css:_,children:(0,h.Y)(r.TableCell,{children:(0,h.FD)("div",{css:(0,n.AH)({display:"flex",alignItems:"center",gap:s.spacing.xs},""),children:[(0,h.Y)("div",{css:(0,n.AH)({width:s.spacing.lg,height:s.spacing.lg,display:"flex",alignItems:"center",justifyContent:"center",svg:{color:s.colors.textSecondary}},""),children:a?(0,h.Y)(r.MinusSquareIcon,{}):(0,h.Y)(r.PlusSquareIcon,{})}),(0,h.Y)(u.A,{id:"sxlGRc",defaultMessage:"Inputs ({numInputs})",values:{numInputs:e.inputs.length}})]})})}),a&&(0,h.Y)(I,{schemaData:e.inputs}),(0,h.Y)(r.TableRow,{onClick:()=>c(!d),css:D,children:(0,h.Y)(r.TableCell,{children:(0,h.FD)("div",{css:(0,n.AH)({display:"flex",alignItems:"center",gap:s.spacing.xs},""),children:[(0,h.Y)("div",{css:(0,n.AH)({width:s.spacing.lg,height:s.spacing.lg,display:"flex",alignItems:"center",justifyContent:"center",svg:{color:s.colors.textSecondary}},""),children:d?(0,h.Y)(r.MinusSquareIcon,{}):(0,h.Y)(r.PlusSquareIcon,{})}),(0,h.Y)(u.A,{id:"llVQ2r",defaultMessage:"Outputs ({numOutputs})",values:{numOutputs:e.outputs.length}})]})})}),d&&(0,h.Y)(I,{schemaData:e.outputs})]})]})}},80625:function(e,t,s){s.d(t,{t:function(){return o}});var n=s(76118),i=s(46709);const o=(0,n.isFunction)(i.useDeferredValue)?i.useDeferredValue:n.identity},87821:function(e,t,s){s.d(t,{_C:function(){return a},pc:function(){return o},so:function(){return r}});var n=s(673),i=s(99213);function o(e){return e?`${n.Qs} ilike ${(0,i.GP)(e,!0)}`:""}function r({query:e=""}={}){const t=[],s=e.includes("tags.")?e:o(e);return s&&t.push(s),t.join(" AND ")}function a(e){return"searchInput"in e?e.searchInput:"nameSearchInput"in e&&"tagSearchInput"in e?o(e.nameSearchInput)+" AND "+e.tagSearchInput:"tagSearchInput"in e?e.tagSearchInput:"nameSearchInput"in e?e.nameSearchInput:""}},89602:function(e,t,s){s.d(t,{C:function(){return o}});var n=s(27757),i=s(73408);function o({children:e}){return(0,i.Y)(n.T.Text,{bold:!0,children:e})}},91701:function(e,t,s){s.d(t,{i:function(){return d}});var n=s(46709),i=s(40724),o=s(27757),r=s(79081),a=s(73408);var l={name:"1739oy8",styles:"z-index:1"};const d=({copyText:e,showLabel:t=!0,componentId:s,...d})=>{const[c,u]=(0,n.useState)(!1);return(0,a.Y)(r.T,{content:(0,a.Y)(i.A,{id:"X+boXI",defaultMessage:"Copied"}),open:c,componentId:"mlflow.shared.copy_button.tooltip",children:(0,a.Y)(o.B,{componentId:null!==s&&void 0!==s?s:"mlflow.shared.copy_button",type:"primary",onClick:()=>{navigator.clipboard.writeText(e),u(!0),setTimeout((()=>{u(!1)}),3e3)},onMouseLeave:()=>{u(!1)},css:l,children:t?(0,a.Y)(i.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...d})})}},97407:function(e,t,s){s.d(t,{R0:function(){return A},C2:function(){return f.C},ki:function(){return b},Es:function(){return m},qd:function(){return g},tP:function(){return I},$W:function(){return D}});var n=s(59930),i=s.n(n),o=s(884),r=s(45175),a=s(46709),l=s(73408);const d=(0,a.createContext)(null);function c({children:e,...t}){return(0,l.Y)(d.Provider,{value:t,children:e})}function u(){const e=(0,a.useContext)(d);return i()(e,"useTagAssignmentContext must be used within a TagAssignmentRoot"),e}function m({children:e,...t}){const s=(0,o.xW)(),n=(0,l.Y)(c,{...t,children:(0,l.Y)(r.V,{children:e})});return s?n:(i()(t.form,"Nest your component on a FormProvider or pass a form prop"),(0,l.Y)(o.Op,{...t.form,children:n}))}var p=s(68248),h=s(27757);function g({children:e}){const{theme:t}=(0,h.u)(),s=a.Children.toArray(e);i()(s.length<=3,"TagAssignmentRow must have 3 children or less");const n=Array(3).fill(null).map(((e,n)=>{var i;return null!==(i=s[n])&&void 0!==i?i:(0,l.Y)("span",{style:{width:t.general.heightSm}},n)}));return(0,l.Y)("div",{css:(0,p.AH)({display:"grid",gridTemplateColumns:"1fr 1fr min-content",gap:t.spacing.sm},""),children:n})}var f=s(89602),v=s(66916),M=s(27299);var y={name:"82a6rk",styles:"flex:1"};const Y=(0,a.forwardRef)((({errorMessage:e,...t},s)=>(0,l.FD)("div",{css:y,children:[(0,l.Y)(v.I,{validationState:e?"error":"info",...t,ref:s}),e&&(0,l.Y)(M.FormUI.Message,{message:e,type:"error"})]})));function A({index:e,rules:t,render:s}){const{name:n,keyProperty:i,getTagsValues:r,emptyValue:a,appendIfPossible:d}=u();return(0,l.Y)(o.xI,{name:`${n}.${e}.${i}`,rules:t,render:({field:e,fieldState:t,formState:n})=>{var o;const c=e.onChange;return e.onChange=function(e){var t;c(e);const s=r();null!==s&&void 0!==s&&null!==(t=s.at(-1))&&void 0!==t&&t[i]&&d(a,{shouldFocus:!1})},s?s({field:e,fieldState:t,formState:n}):(0,l.Y)(Y,{componentId:"TagAssignmentKey.Default.Input",errorMessage:null===(o=t.error)||void 0===o?void 0:o.message,...e})}})}function I({rules:e,index:t,render:s}){const{name:n,valueProperty:i}=u();return(0,l.Y)(o.xI,{rules:e,name:`${n}.${t}.${i}`,render:({field:e,fieldState:t,formState:n})=>{var i;return s?s({field:e,fieldState:t,formState:n}):(0,l.Y)(Y,{componentId:"TagAssignmentValue.Default.Input",errorMessage:null===(i=t.error)||void 0===i?void 0:i.message,...e})}})}var T=s(31988);function b({index:e,...t}){const{removeOrUpdate:s}=u();return(0,l.Y)(T.u,{onClick:()=>s(e),...t})}var S=s(7655);function _(e,t){if(void 0!==e)return 0===e&&i()(!1,"maxLength must be greater than 0"),{maxLength:{value:e,message:t.formatMessage({id:"JW0GbU",defaultMessage:"You can set a maximum of {maxLength} values"},{maxLength:e})}}}function D({name:e,maxLength:t,emptyValue:s,defaultValues:n,loading:r,form:l,keyProperty:d,valueProperty:c}){const[u]=(0,a.useState)(s),m=(0,o.xW)(),p=Boolean(m)&&!l,h=p?m:l;i()(h,"Nest your component on a FormProvider or pass a form prop"),i()(!(n&&p),"Define defaultValues at form context level");const{setValue:g}=h,f=function({name:e,maxLength:t,emptyValue:s,form:n,keyProperty:r}){const l=(0,S.A)(),d=(0,o.xW)(),c=Boolean(d)&&!n?d:n;i()(c,"Nest your component on a FormProvider or pass a form prop");const[u]=(0,a.useState)(s),{append:m,update:p,remove:h,...g}=(0,o.jz)({name:e,control:c.control,rules:_(t,l)}),{getValues:f}=c,v=(0,a.useCallback)((()=>f(e)),[f,e]),M=(0,a.useCallback)(((e,s)=>{const n=v();t&&n&&n.length>=t||m(e,s)}),[v,t,m]),y=(0,a.useCallback)((e=>{const t=v();if(t&&e===t.length-1)return p(e,u);const s=null===t||void 0===t?void 0:t.at(-1);if(null!==s&&void 0!==s&&s[r])return h(e),void m(u,{shouldFocus:!1});h(e)}),[u,v,r,m,h,p]);return{form:c,...g,originalAppend:m,update:p,originalRemove:h,appendIfPossible:M,removeOrUpdate:y,getTagsValues:v}}({name:e,maxLength:t,emptyValue:s,form:h,keyProperty:d}),v=f.getTagsValues;return(0,a.useEffect)((()=>{if(!r){if(n){const s=[...n];return(!t||t&&s.length<t)&&s.push(u),void g(e,s)}if(p){var s;const n=null!==(s=v())&&void 0!==s?s:[];return(!t||t&&n.length<t)&&n.push(u),void g(e,n)}g(e,[u])}}),[n,g,r,t,e,u,p,v]),{...f,form:h,maxLength:t,emptyValue:s,name:e,keyProperty:d,valueProperty:c}}}}]);
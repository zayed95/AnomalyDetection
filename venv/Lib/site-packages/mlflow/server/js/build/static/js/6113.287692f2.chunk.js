/*! For license information please see 6113.287692f2.chunk.js.LICENSE.txt */
(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[6113],{16113:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ce}});var o=n(68248),a=n(27757),r=n(25637),i=n(42595),s=n(46709),l=n(91105),c=n(59930),d=n.n(c),u=n(27299),m=n(66916),p=n(42747),h=n(43617),g=n(90061),f=n(76256),v=n(73408);var x={name:"y1ecum",styles:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex-shrink:1"};var w=n(79081),b=n(11522);var y=n(40724),Y=n(34599),C=n(61077),S=n(39595),D=n(61060);var I={name:"1hcx8jb",styles:"padding:0"},M={name:"1r962iv",styles:"padding:4px"};var T=n(16333);var _={name:"1tzoh5y",styles:"width:fit-content;max-width:100%;cursor:pointer"},P={name:"hdknak",styles:"display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap"};var R=n(76118),z=n(52849),F=n(32874);const k="dataset_id",A="name",E="last_update_time",L="actions",N=[k,A,E,L],H=[L],O=[{id:k,accessorKey:"dataset_id",header:"Dataset ID",enableSorting:!1,cell:({row:e})=>{const t=e.original.dataset_id,{copy:n,tooltipOpen:o,tooltipMessage:a,handleTooltipOpenChange:r}=(0,T.Ld)(t,"Click to copy");return(0,v.Y)(w.T,{content:a,open:o,onOpenChange:r,componentId:"mlflow.eval-datasets.dataset-id-tooltip",children:(0,v.Y)(u.Tag,{css:_,componentId:"mlflow.eval-datasets.dataset-id",color:"indigo",onClick:n,children:(0,v.Y)("span",{css:P,children:t})})})}},{id:A,accessorKey:"name",header:"Name",enableSorting:!0,cell:({row:e})=>{const{theme:t}=(0,a.u)();return(0,v.Y)("div",{css:(0,o.AH)({overflow:"hidden",display:"flex",alignItems:"center",gap:t.spacing.xs},""),children:(0,v.Y)(a.T.Link,{css:x,componentId:"mlflow.eval-datasets.dataset-name-cell",children:e.original.name})})}},{id:E,accessorKey:"last_update_time",accessorFn:e=>e.last_update_time?new Date(e.last_update_time).getTime():0,header:"Updated At",enableSorting:!0,size:150,maxSize:150,cell:({row:e})=>e.original.last_update_time?(0,v.Y)(w.T,{content:new Date(e.original.last_update_time).toLocaleString(),componentId:"mlflow.eval-datasets.last-updated-cell-tooltip",children:(0,v.Y)("span",{children:b.A.timeSinceStr(e.original.last_update_time)})}):(0,v.Y)("span",{children:"-"})},{id:"created_time",accessorKey:"created_time",accessorFn:e=>e.created_time?new Date(e.created_time).getTime():0,header:"Created At",enableSorting:!0,cell:({row:e})=>new Date(e.original.created_time).toLocaleString()},{id:"created_by",accessorKey:"created_by",header:"Created By",enableSorting:!0},{id:"source_type",accessorKey:"source_type",header:"Source Type",enableSorting:!0},{id:"actions",header:"",enableSorting:!1,size:36,maxSize:36,cell:({row:e})=>{const t=(0,S.jE)(),{deleteEvaluationDatasetMutation:n,isLoading:o}=(({onSuccess:e,onError:t})=>{const n=(0,S.jE)(),{mutate:o,isLoading:a}=(0,D.n)({mutationFn:async({datasetId:e})=>{await(0,C.ff)((0,C.we)(`ajax-api/3.0/mlflow/datasets/${e}`),"DELETE")},onSuccess:()=>{n.invalidateQueries({queryKey:[Y.P4]}),null===e||void 0===e||e()},onError:e=>{null===t||void 0===t||t(e)}});return{deleteEvaluationDatasetMutation:o,isLoading:a}})({onSuccess:()=>{t.invalidateQueries({queryKey:[Y.P4]})}}),r=(0,s.useCallback)((()=>{n({datasetId:e.original.dataset_id})}),[n,e]);return(0,v.Y)(u.TableRowAction,{css:I,children:(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{componentId:"mlflow.eval-datasets.dataset-actions-menu",size:"small",icon:(0,v.Y)(u.OverflowIcon,{}),"aria-label":"Dataset actions",css:M})}),(0,v.Y)(u.DropdownMenu.Content,{align:"end",children:(0,v.FD)(u.DropdownMenu.Item,{componentId:"mlflow.eval-datasets.delete-dataset-menu-option",disabled:o,onClick:e=>{e.stopPropagation(),e.preventDefault(),r()},children:[(0,v.Y)(u.DropdownMenu.IconWrapper,{children:(0,v.Y)(u.TrashIcon,{})}),(0,v.Y)(y.A,{id:"cMRvTA",defaultMessage:"Delete dataset"}),o&&(0,v.Y)(u.DropdownMenu.HintColumn,{children:(0,v.Y)(a.S,{})})]})})]})})}}],K=s.memo((({row:e,isActive:t,onSelectDataset:n})=>{const{theme:r}=(0,a.u)();return(0,v.Y)(u.TableRow,{className:"eval-datasets-table-row",onClick:()=>n(e.original),children:e.getVisibleCells().map((e=>(0,v.Y)(u.TableCell,{css:(0,o.AH)({backgroundColor:t?r.colors.actionDefaultBackgroundHover:"transparent",width:e.column.columnDef.size?`${e.column.columnDef.size}px`:"auto",maxWidth:e.column.columnDef.maxSize?`${e.column.columnDef.maxSize}px`:"auto",minWidth:e.column.columnDef.minSize?`${e.column.columnDef.minSize}px`:"auto",..."actions"===e.column.id&&{paddingLeft:0,paddingRight:0}},""),children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)}),((e,t)=>e.isActive===t.isActive&&(0,R.isEqual)(e.columnVisibility,t.columnVisibility)));var B={name:"10jtkcq",styles:"display:flex;flex-direction:column;width:100%;height:100%"},j={name:"82a6rk",styles:"flex:1"},$={name:"1jrb16",styles:"flex:1;min-height:0;position:relative"},q={name:"13udsys",styles:"height:100%"};const U=({experimentId:e,datasets:t,isLoading:n,isFetching:r,error:i,refetch:l,fetchNextPage:c,hasNextPage:d,selectedDatasetId:x,setSelectedDatasetId:w,searchFilter:b,setSearchFilter:y})=>{const Y=(0,p.tz)(),{theme:C}=(0,a.u)(),[S,D]=(0,s.useState)([{id:"created_time",desc:!0}]),[I,M]=(0,s.useState)(O.reduce(((e,t)=>{var n,o;return e[null!==(n=t.id)&&void 0!==n?n:""]=N.includes(null!==(o=t.id)&&void 0!==o?o:""),e}),{})),[T,_]=(0,s.useState)(b),P=(0,f.L)("mlflow/server/js/src/experiment-tracking/pages/experiment-evaluation-datasets/components/ExperimentEvaluationDatasetsListTable.tsx",{columns:O,data:null!==t&&void 0!==t?t:[],getCoreRowModel:(0,g.HT)(),getRowId:e=>e.dataset_id,enableSorting:!0,onSortingChange:D,getSortedRowModel:(0,g.h5)(),enableColumnResizing:!1,state:{sorting:S,columnVisibility:I}}),R=(0,z.v)({isFetching:r,hasNextPage:null!==d&&void 0!==d&&d,fetchNextPage:c});return i?(0,v.Y)("div",{children:"Error loading datasets"}):(0,v.FD)("div",{css:B,children:[(0,v.FD)("div",{css:(0,o.AH)({display:"flex",gap:C.spacing.sm,alignItems:"center",marginBottom:C.spacing.sm},""),children:[(0,v.Y)(m.I,{allowClear:!0,placeholder:"Search by dataset name",value:T,onChange:e=>{_(e.target.value),e.target.value||y(e.target.value)},onClear:()=>{_(""),y("")},onPressEnter:()=>y(T),componentId:"mlflow.eval-datasets.search-input",css:j,prefix:(0,v.Y)(m.S,{})}),(0,v.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",marginRight:C.spacing.sm},""),children:[(0,v.Y)(a.B,{icon:(0,v.Y)(u.RefreshIcon,{}),disabled:r,onClick:()=>l(),componentId:"mlflow.eval-datasets.table-refresh-button"}),(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{icon:(0,v.Y)(u.ColumnsIcon,{}),componentId:"mlflow.eval-datasets.table-column-selector-button"})}),(0,v.Y)(u.DropdownMenu.Content,{children:O.map((e=>{var t,n,o,r;return!H.includes(null!==(t=e.id)&&void 0!==t?t:"")&&(0,v.FD)(u.DropdownMenu.CheckboxItem,{componentId:"mlflow.eval-datasets.table-column-selector-checkbox",checked:null!==(o=I[null!==(r=e.id)&&void 0!==r?r:""])&&void 0!==o&&o,onCheckedChange:t=>{var n;return M({...I,[null!==(n=e.id)&&void 0!==n?n:""]:t})},children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:e.header})]},null!==(n=e.id)&&void 0!==n?n:"")}))})]})]})]}),(0,v.Y)(F.Z,{experimentId:e}),(0,v.Y)("div",{css:$,children:(0,v.FD)(u.Table,{css:q,empty:n||r||0!==t.length?void 0:(0,v.Y)(u.Empty,{description:Y.formatMessage({id:"F4K195",defaultMessage:"No evaluation datasets found"})}),onScroll:e=>R(e.currentTarget),scrollable:!0,children:[(0,v.Y)(u.TableRow,{isHeader:!0,children:P.getLeafHeaders().map((e=>(0,v.Y)(u.TableHeader,{sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted(),onToggleSort:e.column.getToggleSortingHandler(),componentId:"mlflow.eval-datasets.column-header",header:e,column:e.column,css:(0,o.AH)({width:e.column.columnDef.size?`${e.column.columnDef.size}px`:"auto",maxWidth:e.column.columnDef.maxSize?`${e.column.columnDef.maxSize}px`:"auto",minWidth:e.column.columnDef.minSize?`${e.column.columnDef.minSize}px`:"auto",cursor:e.column.getCanSort()?"pointer":"default"},""),children:(0,h.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),!n&&P.getRowModel().rows.map((e=>(0,v.Y)(K,{row:e,columnVisibility:I,isActive:e.original.dataset_id===x,onSelectDataset:e=>w(e.dataset_id)},e.id))),(n||r)&&(0,v.Y)(u.TableSkeletonRows,{table:P})]})})]})};var V=n(96584),W=n(181);var J=n(7655);const Q=({text:e,searchFilter:t,theme:n})=>{const a=(0,s.useMemo)((()=>{if(!t.trim())return[e];const a=new RegExp(`(${(0,R.escapeRegExp)(t)})`,"gi"),r=e.split(a),i=n.isDarkMode?n.colors.blue800:n.colors.blue100;return r.map(((e,n)=>e.toLowerCase()===t.toLowerCase()?(0,v.Y)("span",{css:(0,o.AH)({backgroundColor:i},""),children:e},n):e))}),[e,t,n]);return(0,v.Y)(v.FK,{children:a})},G=({cell:e,table:{options:t}})=>{var n,r;const{theme:i}=(0,a.u)(),l=e.getValue(),c=void 0!==l?JSON.stringify(l,null,2):"",d=null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.rowSize,u=(null===t||void 0===t||null===(r=t.meta)||void 0===r?void 0:r.searchFilter)||"",m=(0,s.useMemo)((()=>c?c.split("\n").length:1),[c]);(0,s.useMemo)((()=>Math.min(Math.max(m+1,3),20)),[m]);return(0,v.Y)("div",{css:(0,o.AH)({overflow:"hidden",display:"flex",alignItems:"center",gap:i.spacing.xs,flex:1},""),children:"sm"===d?(0,v.Y)("code",{css:(0,o.AH)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:`${i.typography.fontSizeSm}px !important`,margin:"0 !important"},""),children:c}):(0,v.Y)("div",{css:(0,o.AH)({overflow:"auto",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",resize:"vertical",width:"100%",border:`1px solid ${i.colors.border}`,padding:i.spacing.xs,backgroundColor:i.colors.backgroundSecondary,fontSize:`${i.typography.fontSizeSm}px`,maxHeight:i.typography.fontSizeLg*("md"===d?10:20)},""),children:(0,v.Y)(Q,{text:c,searchFilter:u,theme:i})})})};var Z={name:"1cl2a0e",styles:"display:flex;align-items:flex-start;justify-content:space-between"},X={name:"1ap1kl4",styles:"max-width:540px;flex:1"};const ee=({dataset:e,datasetRecords:t,columns:n,columnVisibility:r,setColumnVisibility:i,rowSize:s,setRowSize:l,searchFilter:c,setSearchFilter:d})=>{const{theme:p}=(0,a.u)(),h=null===e||void 0===e?void 0:e.name,g=(e=>{var t;if(!e)return;const n=(0,W.pt)(e);return null!==(t=null===n||void 0===n?void 0:n.num_records)&&void 0!==t?t:void 0})(null===e||void 0===e?void 0:e.profile),f=t.length;return(0,v.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:p.spacing.sm,marginBottom:p.spacing.sm},""),children:[(0,v.FD)("div",{css:Z,children:[(0,v.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",paddingLeft:p.spacing.sm,paddingRight:p.spacing.sm},""),children:[(0,v.Y)(a.T.Title,{level:3,withoutMargins:!0,children:h}),(0,v.Y)(a.T.Text,{color:"secondary",size:"sm",children:(0,v.Y)(y.A,{id:"crmbMK",defaultMessage:"Displaying {loadedRecordsCount} of {totalRecordsCount, plural, =1 {1 record} other {# records}}",values:{loadedRecordsCount:null!==f&&void 0!==f?f:0,totalRecordsCount:null!==g&&void 0!==g?g:0}})})]}),(0,v.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"flex-start",gap:p.spacing.xs},""),children:[(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{componentId:"mlflow.eval-datasets.records-toolbar.row-size-toggle",icon:(0,v.Y)(u.RowsIcon,{})})}),(0,v.Y)(u.DropdownMenu.Content,{align:"end",children:(0,v.FD)(u.DropdownMenu.RadioGroup,{componentId:"mlflow.eval-datasets.records-toolbar.row-size-radio",value:s,onValueChange:e=>l(e),children:[(0,v.Y)(u.DropdownMenu.Label,{children:(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(y.A,{id:"DcGPfO",defaultMessage:"Row height"})})}),(0,v.FD)(u.DropdownMenu.RadioItem,{value:"sm",children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:(0,v.Y)(y.A,{id:"ZNyTjg",defaultMessage:"Small"})})]},"sm"),(0,v.FD)(u.DropdownMenu.RadioItem,{value:"md",children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:(0,v.Y)(y.A,{id:"fcIHyN",defaultMessage:"Medium"})})]},"md"),(0,v.FD)(u.DropdownMenu.RadioItem,{value:"lg",children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:(0,v.Y)(y.A,{id:"xgbeVS",defaultMessage:"Large"})})]},"lg")]})})]}),(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{componentId:"mlflow.eval-datasets.records-toolbar.columns-toggle",icon:(0,v.Y)(u.ColumnsIcon,{})})}),(0,v.Y)(u.DropdownMenu.Content,{children:n.map((e=>{var t,n;return(0,v.FD)(u.DropdownMenu.CheckboxItem,{componentId:"mlflow.eval-datasets.records-toolbar.column-checkbox",checked:null!==(t=r[null!==(n=e.id)&&void 0!==n?n:""])&&void 0!==t&&t,onCheckedChange:t=>{var n;return i({...r,[null!==(n=e.id)&&void 0!==n?n:""]:t})},children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:e.header})]},e.id)}))})]})]})]}),(0,v.Y)("div",{css:(0,o.AH)({paddingLeft:p.spacing.sm,paddingRight:p.spacing.sm},""),children:(0,v.Y)(m.I,{componentId:"mlflow.eval-datasets.records-toolbar.search-input",prefix:(0,v.Y)(m.S,{}),placeholder:"Search inputs and expectations",value:c,onChange:e=>d(e.target.value),css:X})})]})};const te="inputs",ne="outputs",oe="expectations",ae=[{id:te,accessorKey:"inputs",header:"Inputs",enableResizing:!1,cell:G},{id:ne,accessorKey:"outputs",header:"Outputs",enableResizing:!1,cell:G},{id:oe,accessorKey:"expectations",header:"Expectations",enableResizing:!1,cell:G}];var re={name:"1w4ngjc",styles:"flex:1;min-height:0;position:relative;overflow:hidden;display:flex;flex-direction:column"},ie={name:"82a6rk",styles:"flex:1"},se={name:"1w2a2xb",styles:"position:sticky;top:0;z-index:1"};const le=({dataset:e})=>{const t=(0,J.A)(),n=e.dataset_id,[o,a]=(0,s.useState)("md"),[r,i]=(0,s.useState)(""),[l,c]=(0,s.useState)({[te]:!0,[ne]:!1,[oe]:!0}),{data:d,isLoading:m,isFetching:p,error:x,fetchNextPage:w,hasNextPage:b}=(({datasetId:e,enabled:t=!0})=>{const{data:n,fetchNextPage:o,hasNextPage:a,isLoading:r,isFetching:i,refetch:l,error:c}=(0,V.q)({queryKey:[Y.uz,e],queryFn:async({queryKey:[,e],pageParam:t})=>{const n=new URLSearchParams;return n.set("dataset_id",e),n.set("max_results",50..toString()),t&&n.set("page_token",null!==t&&void 0!==t?t:""),await(0,C.ff)((0,C.we)(`ajax-api/3.0/mlflow/datasets/${e}/records?${n.toString()}`),"GET")},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t,getNextPageParam:e=>e.next_page_token});return{data:(0,s.useMemo)((()=>{var e;return null!==(e=null===n||void 0===n?void 0:n.pages.flatMap((e=>(0,W.pt)(e.records))))&&void 0!==e?e:[]}),[n]),fetchNextPage:o,hasNextPage:a,isLoading:r,isFetching:i,refetch:l,error:c}})({datasetId:null!==n&&void 0!==n?n:"",enabled:!!n}),y=(0,z.v)({isFetching:p,hasNextPage:null!==b&&void 0!==b&&b,fetchNextPage:w}),S=(0,s.useMemo)((()=>{if(!r.trim())return null!==d&&void 0!==d?d:[];const e=r.toLowerCase();return(null!==d&&void 0!==d?d:[]).filter((t=>{if(JSON.stringify(t.inputs||{}).toLowerCase().includes(e))return!0;return!!JSON.stringify(t.expectations||{}).toLowerCase().includes(e)}))}),[d,r]);(0,s.useEffect)((()=>{if(!r.trim()||p||!b)return;const e="sm"===o?20:"md"===o?10:5;S.length<e&&w()}),[S.length,r,p,b,w,o]);const D=(0,f.L)("mlflow/server/js/src/experiment-tracking/pages/experiment-evaluation-datasets/components/ExperimentEvaluationDatasetRecordsTable.tsx",{columns:ae,data:S,getCoreRowModel:(0,g.HT)(),getRowId:e=>e.dataset_record_id,enableColumnResizing:!1,meta:{rowSize:o,searchFilter:r},state:{columnVisibility:l}});return(0,v.FD)("div",{css:re,children:[(0,v.Y)(ee,{dataset:e,datasetRecords:null!==d&&void 0!==d?d:[],columns:ae,columnVisibility:l,setColumnVisibility:c,rowSize:o,setRowSize:a,searchFilter:r,setSearchFilter:i}),(0,v.FD)(u.Table,{css:ie,empty:m||0!==D.getRowModel().rows.length?void 0:(0,v.Y)(u.Empty,{description:t.formatMessage({id:"TnD/vL",defaultMessage:"No records found"})}),scrollable:!0,onScroll:e=>y(e.currentTarget),children:[(0,v.Y)(u.TableRow,{isHeader:!0,children:D.getLeafHeaders().map((e=>e.column.getIsVisible()&&(0,v.Y)(u.TableHeader,{componentId:"mlflow.eval-dataset-records.column-header",header:e,column:e.column,css:se,children:(0,h.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),D.getRowModel().rows.map((e=>(0,v.Y)(u.TableRow,{children:e.getVisibleCells().map((e=>(0,v.Y)(u.TableCell,{children:(0,h.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id))),(m||p)&&(0,v.Y)(u.TableSkeletonRows,{table:D})]})]})};var ce=n(29774),de=n(89949);var ue={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const me=({error:e})=>{var t;return(0,v.Y)(u.PageWrapper,{css:ue,children:(0,v.Y)(u.Empty,{"data-testid":"fallback",title:(0,v.Y)(y.A,{id:"WtUqxc",defaultMessage:"Error"}),description:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:(0,v.Y)(y.A,{id:"9J8zoa",defaultMessage:"An error occurred while rendering this component."}),image:(0,v.Y)(a.k,{})})})},pe=({children:e,resetKey:t})=>(0,v.Y)(de.tH,{FallbackComponent:me,resetKeys:[t],children:(0,v.Y)(ce.Au,{children:e})});var he=n.p+"static/media/eval-datasets-empty.16c4b3426c8a8c4a9defc41bfb653504.svg";var ge={name:"xvginl",styles:"max-width:600px"};const fe=({experimentId:e})=>{const{theme:t}=(0,a.u)();return(0,v.FD)("div",{css:(0,o.AH)({display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",padding:t.spacing.md},""),children:[(0,v.Y)(a.T.Title,{level:3,color:"secondary",children:(0,v.Y)(y.A,{id:"c1jD8u",defaultMessage:"Create an evaluation dataset"})}),(0,v.Y)(a.T.Paragraph,{color:"secondary",css:ge,children:(0,v.Y)(y.A,{id:"BMUd0e",defaultMessage:"Create evaluation datasets in order to iteratively evaluate and improve your app. For example, build a dataset from production traces with negative feedback. {learnMoreLink}",values:{learnMoreLink:(0,v.Y)(a.T.Link,{componentId:"mlflow.eval-datasets.learn-more-link",href:"https://mlflow.org/docs/latest/genai/datasets/",openInNewTab:!0,children:(0,v.Y)(y.A,{id:"izS5yQ",defaultMessage:"Learn more"})})}})}),(0,v.Y)("img",{css:(0,o.AH)({marginBottom:t.spacing.md,maxWidth:"min(100%, 600px)"},""),src:he,alt:"No datasets found"}),(0,v.Y)(F.Z,{experimentId:e})]})},ve="selectedDatasetId";var xe=n(72607);var we={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},be={name:"n56zw6",styles:"display:flex;flex-direction:row;flex:1;min-height:0px"},ye={name:"5ob2ly",styles:"display:flex;position:relative"};const Ye=()=>{const{experimentId:e}=(0,l.g)(),{theme:t}=(0,a.u)(),[n,c]=(0,s.useState)(400),[u,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[g,f]=(()=>{var e;const[t,n]=(0,l.ok)();return[null!==(e=t.get(ve))&&void 0!==e?e:void 0,(0,s.useCallback)((e=>{n((t=>e?(t.set(ve,e),t):(t.delete(ve),t)),{replace:!0})}),[n]),(0,s.useCallback)((()=>{n((e=>(e.delete(ve),e)),{replace:!0})}),[n])]})(),[x,w]=(0,s.useState)("");d()(e,"Experiment ID must be defined");const{data:b,isLoading:y,isFetching:Y,error:C,refetch:S,fetchNextPage:D,hasNextPage:I}=(0,xe.J)({experimentId:e,nameFilter:x}),M=(0,s.useMemo)((()=>{var e;return null!==(e=null===b||void 0===b?void 0:b.map((e=>e.dataset_id)))&&void 0!==e?e:[]}),[b]);(0,s.useEffect)((()=>{null===b||void 0===b||!b.length||g&&M.includes(g)||f(b[0].dataset_id)}),[b,g,M,f]);const T=(0,s.useMemo)((()=>{if(null!==b&&void 0!==b&&b.length&&g)return b.find((e=>e.dataset_id===g))}),[b,g]);return(0,v.FD)("div",{css:be,children:[(0,v.Y)(r.ResizableBox,{css:ye,style:{flex:`0 0 ${p?0:n}px`},width:n,axis:"x",resizeHandles:["e"],minConstraints:[250,0],handle:(0,v.Y)(i.z,{runListHidden:p,updateRunListHidden:()=>{h(!p)}}),onResize:(e,{size:t})=>{p||c(t.width)},onResizeStart:()=>!p&&m(!0),onResizeStop:()=>m(!1),children:(0,v.Y)("div",{css:(0,o.AH)({display:p?"none":"flex",flex:1,minWidth:0},""),children:(0,v.Y)(U,{experimentId:e,datasets:b,isLoading:y,isFetching:Y,error:C,refetch:S,fetchNextPage:D,hasNextPage:I,selectedDatasetId:g,setSelectedDatasetId:f,searchFilter:x,setSearchFilter:w})})}),(0,v.FD)("div",{css:(0,o.AH)({flex:1,display:"flex",borderLeft:`1px solid ${t.colors.border}`,minHeight:"0px",overflow:"hidden"},""),children:[!y&&!T&&(0,v.Y)(fe,{experimentId:e}),T&&(0,v.Y)(le,{dataset:T})]}),u&&(0,v.Y)(o.mL,{styles:we})]})};var Ce=()=>(0,v.Y)(pe,{children:(0,v.Y)(Ye,{})})},16333:function(e,t,n){"use strict";n.d(t,{Ld:function(){return a.L},ad:function(){return o.a}});n(37750);var o=n(44072),a=n(38815)},29774:function(e,t,n){"use strict";n.d(t,{Au:function(){return s},tF:function(){return l}});var o=n(46709),a=n(36476),r=n(73408);const i=(0,o.createContext)({currentUserActionError:null,handleError:()=>{},handlePromise:()=>{},clearUserActionError:()=>{}}),s=({children:e,errorFilter:t})=>{const[n,s]=(0,o.useState)(null),l=(0,o.useCallback)(((e,n)=>{if(null===t||void 0===t||!t(e)){const t=(0,a.a$)(e);s(t),n&&n(t)}}),[s,t]),c=(0,o.useCallback)((e=>{e.catch((e=>{l(e)}))}),[l]),d=(0,o.useCallback)((()=>{s(null)}),[s]);return(0,r.Y)(i.Provider,{value:(0,o.useMemo)((()=>({currentUserActionError:n,handleError:l,handlePromise:c,clearUserActionError:d})),[d,n,l,c]),children:e})},l=()=>{const{currentUserActionError:e,handleError:t,handlePromise:n,clearUserActionError:a}=(0,o.useContext)(i),r=(0,o.useCallback)(((e,n,o)=>{t(n,o)}),[t]);return(0,o.useMemo)((()=>({currentUserActionError:e,handleError:t,handleErrorWithEvent:r,handlePromise:n,clearUserActionError:a})),[a,t,n,e,r])}},32874:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var o=n(27757),a=n(27299),r=n(46709),i=n(40724),s=n(79081),l=n(66916),c=n(42747),d=n(61077),u=n(39595),m=n(61060),p=n(34599);var h=n(73408);const g=({visible:e,experimentId:t,onCancel:n})=>{const o=(0,c.tz)(),[i,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),{createEvaluationDatasetMutation:x,isLoading:w}=(({onSuccess:e,onError:t})=>{const n=(0,u.jE)(),{mutate:o,isLoading:a}=(0,m.n)({mutationFn:async({datasetName:e,experimentIds:t})=>{const n={name:e,experiment_ids:t};return(await(0,d.ff)((0,d.we)("ajax-api/3.0/mlflow/datasets/create"),"POST",n)).dataset},onSuccess:()=>{n.invalidateQueries({queryKey:[p.P4]}),null===e||void 0===e||e()},onError:e=>{null===t||void 0===t||t(e)}});return{createEvaluationDatasetMutation:o,isLoading:a}})({onSuccess:()=>{n()}}),b=(0,r.useCallback)((()=>{i?x({datasetName:i,experimentIds:[t]}):v(o.formatMessage({id:"sbHChH",defaultMessage:"Dataset name is required"}))}),[x,t,i,o]);return(0,h.FD)(s.d,{componentId:"mlflow.create-evaluation-dataset-modal",visible:e,onCancel:n,okText:o.formatMessage({id:"creoEe",defaultMessage:"Create"}),cancelText:o.formatMessage({id:"nEnDEu",defaultMessage:"Cancel"}),onOk:b,okButtonProps:{loading:w,disabled:!i},title:(0,h.Y)(c.sA,{id:"287Ack",defaultMessage:"Create evaluation dataset"}),children:[(0,h.Y)(a.FormUI.Label,{htmlFor:"dataset-name-input",children:(0,h.Y)(c.sA,{id:"xdFMIN",defaultMessage:"Dataset name"})}),(0,h.Y)(l.I,{componentId:"mlflow.create-evaluation-dataset-modal.dataset-name",id:"dataset-name-input",name:"name",type:"text",placeholder:o.formatMessage({id:"ZQpc2w",defaultMessage:"Enter dataset name"}),value:i,onChange:e=>{g(e.target.value),v("")}}),f&&(0,h.Y)(a.FormUI.Message,{type:"error",message:f})]})};var f={name:"b9l38d",styles:"width:min-content"};const v=({experimentId:e})=>{const[t,n]=(0,r.useState)(!1);return(0,h.FD)(h.FK,{children:[(0,h.Y)(o.B,{componentId:"mlflow.eval-datasets.create-dataset-button",css:f,icon:(0,h.Y)(a.DatabaseIcon,{}),onClick:()=>n(!0),children:(0,h.Y)(i.A,{id:"N7BCue",defaultMessage:"Create dataset"})}),(0,h.Y)(g,{experimentId:e,visible:t,onCancel:()=>n(!1)})]})}},34599:function(e,t,n){"use strict";n.d(t,{P4:function(){return a},lA:function(){return r},uz:function(){return o}});const o="GET_DATASET_RECORDS",a="SEARCH_EVALUATION_DATASETS",r="FETCH_TRACES"},37750:function(e,t,n){"use strict";n(46709),n(44072)},38815:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var o=n(46709),a=n(72801),r=n(79081),i=n(27299),s=n(42747),l=n(73408);function c(e,t,n){const c=(0,s.tz)(),d=t||c.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),u=c.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),m=(0,a.useClipboard)(),p=(0,o.useRef)(),[h,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!1);(0,o.useEffect)((()=>()=>{window.clearTimeout(p.current)}),[]);return{actionIcon:h?(0,l.Y)(r.C,{}):(0,l.Y)(i.CopyIcon,{}),tooltipMessage:h?u:d,copy:()=>{m.copy(e),window.clearTimeout(p.current),g(!0),null===n||void 0===n||n(),p.current=window.setTimeout((()=>{g(!1)}),3e3)},copied:h,ariaLabel:d,tooltipOpen:f||h,handleTooltipOpenChange:v}}},42595:function(e,t,n){"use strict";n.d(t,{t:function(){return u},z:function(){return m}});var o=n(68248),a=n(27757),r=n(46709),i=n(25637),s=n(52572),l=n(73408);var c={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},d={name:"5ob2ly",styles:"display:flex;position:relative"};const u=({runListHidden:e,width:t,onResize:n,children:a,onHiddenChange:u,maxWidth:p})=>{const h=(0,s.e)(),[g,f]=(0,r.useState)(!1);return(0,l.FD)(l.FK,{children:[(0,l.Y)(i.ResizableBox,{css:d,style:{flex:`0 0 ${e?0:t}px`},width:t,axis:"x",resizeHandles:["e"],minConstraints:[250,0],maxConstraints:void 0===p?void 0:[p,0],handle:(0,l.Y)(m,{runListHidden:e,updateRunListHidden:e=>{u?u(e):h((t=>({...t,runListHidden:e})))}}),onResize:(t,{size:o})=>{e||n(o.width)},onResizeStart:()=>!e&&f(!0),onResizeStop:()=>f(!1),children:a}),g&&(0,l.Y)(o.mL,{styles:c})]})},m=r.forwardRef((({updateRunListHidden:e,runListHidden:t,...n},r)=>{const{theme:i}=(0,a.u)();return(0,l.FD)("div",{ref:r,...n,css:(0,o.AH)({transition:"opacity 0.2s",width:0,overflow:"visible",height:"100%",position:"relative",zIndex:10,display:"flex",opacity:t?1:0,"&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${i.colors.actionDefaultBorderHover}`}}},""),children:[(0,l.Y)("div",{css:(0,o.AH)({position:"absolute",left:-i.general.iconSize/2,width:i.general.iconSize,cursor:t?void 0:"ew-resize",height:"100%",top:0,bottom:0},""),children:(0,l.Y)("div",{className:"button",css:(0,o.AH)({top:"50%",transition:"border-color 0.2s",position:"absolute",width:i.general.iconSize,height:i.general.iconSize,backgroundColor:i.colors.backgroundPrimary,borderRadius:i.general.iconSize,overflow:"hidden",border:`1px solid ${i.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center",zIndex:11},""),children:(0,l.Y)(a.B,{componentId:"mlflow.experiment_page.table_resizer.collapse",onClick:()=>e(!t),icon:t?(0,l.Y)(a.o,{}):(0,l.Y)(a.n,{}),size:"small"})})}),(0,l.Y)("div",{className:"bar",css:(0,o.AH)({position:"absolute",opacity:0,left:-1.5,width:3,height:"100%",top:0,bottom:0,backgroundColor:i.colors.actionPrimaryBackgroundDefault},"")})]})}))},42747:function(e,t,n){"use strict";n.d(t,{sA:function(){return o.sA},tz:function(){return o.tz},zR:function(){return o.zR}});var o=n(77680);n(13584)},44072:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});n(46709);var o=n(27757),a=n(79081),r=n(38815),i=n(73408);function s({buttonProps:e,componentId:t,copyText:n,copyTooltip:s,isInsideInputGroup:l=!1,onCopy:c,tooltipProps:d}){const{actionIcon:u,copy:m,handleTooltipOpenChange:p,tooltipOpen:h,tooltipMessage:g}=(0,r.L)(n,s,c),f=(0,i.Y)(o.B,{"aria-label":g,componentId:null!==t&&void 0!==t?t:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",icon:u,onClick:m,size:"small",...e}),v=(0,i.Y)(o.B,{"aria-label":g,componentId:null!==t&&void 0!==t?t:"codegen_web-shared_src_copy_copyactionbutton.tsx_17",onClick:m,...e,children:u});return(0,i.Y)(a.T,{componentId:t?`${t}-tooltip`:"codegen_web-shared_src_copy_copyactionbutton.tsx_17-tooltip",content:g,onOpenChange:p,open:h,...d,children:l?v:f})}},52572:function(e,t,n){"use strict";n.d(t,{e:function(){return s},i:function(){return i}});var o=n(46709),a=n(73408);const r=o.createContext((e=>e)),i=({children:e,setUIState:t})=>(0,a.Y)(r.Provider,{value:t,children:e}),s=()=>o.useContext(r)},52849:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var o=n(46709);const a=({isFetching:e,hasNextPage:t,fetchNextPage:n})=>(0,o.useCallback)((o=>{if(o){const{scrollHeight:a,scrollTop:r,clientHeight:i}=o;a-r-i<200&&!e&&t&&n()}}),[n,e,t])},59930:function(e){"use strict";e.exports=function(e,t,n,o,a,r,i,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,a,r,i,s],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},72607:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var o=n(96584),a=n(61077),r=n(46709),i=n(34599);const s=({experimentId:e,enabled:t=!0,nameFilter:n=""})=>{const{data:s,fetchNextPage:l,hasNextPage:c,isLoading:d,isFetching:u,refetch:m,error:p}=(0,o.q)({queryKey:[i.P4,e,n],queryFn:async({queryKey:[,e,t],pageParam:n})=>{const o={experiment_ids:[e],filter_string:t?`name ILIKE '%${t}%'`:void 0,order_by:["created_time DESC"],max_results:50,page_token:n};return await(0,a.ff)((0,a.we)("ajax-api/3.0/mlflow/datasets/search"),"POST",o)},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t,getNextPageParam:e=>e.next_page_token});return{data:(0,r.useMemo)((()=>{var e;return null!==(e=null===s||void 0===s?void 0:s.pages.flatMap((e=>{var t;return null!==(t=e.datasets)&&void 0!==t?t:[]})))&&void 0!==e?e:[]}),[s]),fetchNextPage:l,hasNextPage:c,isLoading:d,isFetching:u,refetch:m,error:p}}},72801:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useClipboard=void 0;var a=o(n(90606)),r=n(46709),i=n(81619);function s(e){return e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName)}t.useClipboard=function(e){void 0===e&&(e={});var t=i.useTimedToggle(!1),n=t[0],o=t[1],l=r.useRef(null),c=r.useRef(e);return c.current=e,{copied:n,copy:r.useCallback((function(e){var t=c.current,n=l.current;function r(){t.onSuccess&&t.onSuccess(),t.copiedTimeout&&o(t.copiedTimeout),t.selectOnCopy&&s(n)&&n.select()}function i(){t.onError&&t.onError(),!1!==t.selectOnError&&s(n)&&n.select()}function d(e){a.default(e).then(r).catch(i)}"string"===typeof e?d(e):n&&d(n.value)}),[]),isSupported:function(){return!!navigator.clipboard||"function"===typeof document.execCommand&&"function"===typeof document.queryCommandSupported&&document.queryCommandSupported("copy")},target:l}}},76256:function(e,t,n){"use strict";n.d(t,{L:function(){return a},S:function(){return r}});var o=n(43617);function a(e,t){return(0,o.N4)(t)}const r=o.N4},81619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTimedToggle=void 0;var o=n(46709);t.useTimedToggle=function(e){var t=o.useState(!1),n=t[0],a=t[1],r=o.useRef(),i=o.useRef(e);return o.useEffect((function(){return function(){return clearTimeout(r.current)}}),[]),[n,function(e){clearTimeout(r.current),a(!i.current),r.current=window.setTimeout((function(){return a(i.current)}),e)}]}},90606:function(e){e.exports=function(e){if(navigator.clipboard)return navigator.clipboard.writeText(e).catch((function(e){throw void 0!==e?e:new DOMException("The request is not allowed","NotAllowedError")}));var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);var n=window.getSelection(),o=window.document.createRange();n.removeAllRanges(),o.selectNode(t),n.addRange(o);var a=!1;try{a=window.document.execCommand("copy")}catch(r){console.log("error",r)}return n.removeAllRanges(),window.document.body.removeChild(t),a?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}},96584:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var o=n(56606),a=n(23403),r=n(60783);class i extends a.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,r.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,r.PL)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,o,a,i,s,l;const{state:c}=e,d=super.createResult(e,t),{isFetching:u,isRefetching:m}=d,p=u&&"forward"===(null==(n=c.fetchMeta)||null==(o=n.fetchMore)?void 0:o.direction),h=u&&"backward"===(null==(a=c.fetchMeta)||null==(i=a.fetchMore)?void 0:i.direction);return{...d,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,r.rB)(t,null==(s=c.data)?void 0:s.pages),hasPreviousPage:(0,r.RQ)(t,null==(l=c.data)?void 0:l.pages),isFetchingNextPage:p,isFetchingPreviousPage:h,isRefetching:m&&!p&&!h}}}var s=n(93769);function l(e,t,n){const a=(0,o.vh)(e,t,n);return(0,s.t)(a,i)}}}]);
/*! For license information please see 1352.40d8b934.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[1352],{9695:function(e,t,i){i.d(t,{QN:function(){return h},F3:function(){return u},xH:function(){return g},BE:function(){return p}});var s=i(46709),o=i(27299),r=i(66916),n=i(40724),a=i(73408);const{Option:l,OptGroup:d}=o.LegacySelect,c="Create New Model",h=`$$$__${c}__$$$`,p="selectedModel",u="modelName";class g extends s.Component{constructor(...e){super(...e),this.state={selectedModel:null},this.handleModelSelectChange=e=>{this.setState({selectedModel:e})},this.modelNameValidator=(e,t,i)=>{const{modelByName:s}=this.props;i(s[t]?`Model "${t}" already exists.`:void 0)},this.handleFilterOption=(e,t)=>-1!==(t&&t.value||"").toLowerCase().indexOf(e.toLowerCase())}renderExplanatoryText(){const{isCopy:e}=this.props,{selectedModel:t}=this.state;if(!t||t===h)return null;const i=e?(0,a.Y)(n.A,{id:"hxMEqi",defaultMessage:"The model version will be copied to {selectedModel} as a new version.",values:{selectedModel:t}}):(0,a.Y)(n.A,{id:"zjXq2X",defaultMessage:"The model will be registered as a new version of {selectedModel}.",values:{selectedModel:t}});return(0,a.Y)("p",{className:"modal-explanatory-text",children:i})}renderModel(e){return(0,a.Y)(l,{value:e.name,children:e.name},e.name)}render(){const{modelByName:e,innerRef:t,isCopy:i}=this.props,{selectedModel:s}=this.state,n=s===h;return(0,a.FD)(o.LegacyForm,{ref:t,layout:"vertical",className:"mlflow-register-model-form",children:[(0,a.Y)(o.LegacyForm.Item,{label:i?(0,a.Y)("b",{children:"Copy to model"}):"Model",name:p,rules:[{required:!0,message:"Please select a model or create a new one."}],children:(0,a.FD)(o.LegacySelect,{dropdownClassName:"mlflow-model-select-dropdown",onChange:this.handleModelSelectChange,placeholder:"Select a model",filterOption:this.handleFilterOption,onSearch:this.props.onSearchRegisteredModels,showSearch:!0,children:[(0,a.FD)(l,{value:h,className:"mlflow-create-new-model-option",children:[(0,a.Y)("i",{className:"fa fa-plus fa-fw",style:{fontSize:13}})," ",c]}),(0,a.Y)(d,{label:"Models",children:Object.values(e).map((e=>this.renderModel(e)))})]})}),n?(0,a.Y)(o.LegacyForm.Item,{label:"Model Name",name:u,rules:[{required:!0,message:"Please input a name for the new model."},{validator:this.modelNameValidator}],children:(0,a.Y)(r.I,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodelform.tsx_132",placeholder:"Input a model name"})}):null,this.renderExplanatoryText()]})}}},23158:function(e,t,i){i.d(t,{a:function(){return r}});var s=i(21678),o=i(73408);const r=({children:e,className:t,secondarySections:i=[],usingSidebarLayout:r,sidebarSize:n="lg"})=>r?(0,o.Y)("div",{className:t,children:(0,o.Y)(s.u8,{asideSections:i,isTabLayout:!0,sidebarSize:n,verticalStackOrder:"aside-first",children:e})}):(0,o.Y)("div",{className:t,children:e})},27461:function(e,t,i){i.d(t,{y:function(){return y}});var s=i(68248),o=i(76256),r=i(27757),n=i(27299),a=i(66916),l=i(76118),d=i(46709),c=i(40724),h=i(7655),p=i(90061),u=i(43617),g=i(73408);const m=({value:e})=>{const t=(0,d.useMemo)((()=>{try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return null}}),[e]);return(0,g.Y)("div",{css:(0,s.AH)({whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:t?"monospace":void 0},""),children:t||e})};var f=i(31655),v=i(47207);var w={name:"ozd7xs",styles:"flex-shrink:0"};const M=({name:e,value:t,toggleExpanded:i,isExpanded:o,autoExpandedRowsList:a})=>{const{theme:c}=(0,r.u)(),h=(0,d.useRef)(null),[p,u]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{a[e]||p&&(i(),a[e]=!0)}),[a,p,e,i]),(0,d.useEffect)((()=>{if(!h.current)return;const e=(0,l.throttle)((([e])=>{const t=e.target.scrollHeight>e.target.clientHeight;u(t)}),500,{trailing:!0}),t=new ResizeObserver(e);return t.observe(h.current),()=>t.disconnect()}),[h,i]),(0,d.useEffect)((()=>{if(h.current&&!o){h.current.scrollHeight>h.current.clientHeight&&u(!0)}}),[o]),(0,g.FD)("div",{css:(0,s.AH)({display:"flex",gap:c.spacing.xs},""),children:[(p||o)&&(0,g.Y)(r.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_74",size:"small",icon:o?(0,g.Y)(n.ChevronDownIcon,{}):(0,g.Y)(r.o,{}),onClick:()=>i(),css:w}),(0,g.Y)("div",{title:t,css:(0,s.AH)({overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:o?void 0:"3"},""),ref:h,children:o?(0,g.Y)(m,{value:t}):t})]})},b=[{id:"key",accessorKey:"key",header:()=>(0,g.Y)(c.A,{id:"r+KCRg",defaultMessage:"Parameter"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,g.Y)(c.A,{id:"qIsNL0",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1,meta:{styles:{paddingLeft:0}},cell:({row:{original:e,getIsExpanded:t,toggleExpanded:i},table:{options:{meta:s}}})=>{const{autoExpandedRowsList:o}=s;return(0,g.Y)(M,{name:e.key,value:e.value,isExpanded:t(),toggleExpanded:i,autoExpandedRowsList:o.current})}}],y=({params:e,className:t,expandToParentContainer:i})=>{const{theme:m}=(0,r.u)(),w=(0,h.A)(),[y,A]=(0,d.useState)(""),x=(0,d.useRef)({}),{detailsPageTableStyles:I,detailsPageNoEntriesStyles:N}=(0,v.z)(),Y=(0,d.useMemo)((()=>(0,l.values)(e)),[e]),R=(0,d.useMemo)((()=>Y.filter((({key:e,value:t})=>{const i=y.toLowerCase();return e.toLowerCase().includes(i)||t.toLowerCase().includes(i)}))),[y,Y]),S=(0,d.useMemo)((()=>(0,f.rR)()?b:[{id:"key",accessorKey:"key",header:()=>(0,g.Y)(c.A,{id:"r+KCRg",defaultMessage:"Parameter"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,g.Y)(c.A,{id:"qIsNL0",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!1,meta:{styles:{paddingLeft:0}},cell:({row:{original:e,getIsExpanded:t,toggleExpanded:i}})=>(0,g.Y)(M,{name:e.key,value:e.value,isExpanded:t(),toggleExpanded:i,autoExpandedRowsList:x.current})}]),[]),C=(0,o.L)("mlflow/server/js/src/experiment-tracking/components/DetailsOverviewParamsTable.tsx",{data:R,getCoreRowModel:(0,p.HT)(),getExpandedRowModel:(0,p.D0)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:S,meta:{autoExpandedRowsList:x}});return(0,g.FD)("div",{css:(0,s.AH)({flex:i?1:"0 0 auto",display:"flex",flexDirection:"column",overflow:"hidden"},""),className:t,children:[(0,g.Y)(r.T.Title,{level:4,children:(0,g.Y)(c.A,{id:"Q/evEc",defaultMessage:"Parameters ({length})",values:{length:R.length}})}),(0,g.Y)("div",{css:(0,s.AH)({padding:m.spacing.sm,border:`1px solid ${m.colors.border}`,borderRadius:m.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:i?1:"0 0 auto",overflow:"hidden"},""),children:(()=>{if(!Y.length)return(0,g.Y)("div",{css:N,children:(0,g.Y)(n.Empty,{description:(0,g.Y)(c.A,{id:"6UqPlE",defaultMessage:"No parameters recorded"})})});const e=R.length<1;return(0,g.FD)(g.FK,{children:[(0,g.Y)("div",{css:(0,s.AH)({marginBottom:m.spacing.sm},""),children:(0,g.Y)(a.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_213",prefix:(0,g.Y)(a.S,{}),placeholder:w.formatMessage({id:"SLHSXV",defaultMessage:"Search parameters"}),value:y,onChange:e=>A(e.target.value),allowClear:!0})}),(0,g.FD)(n.Table,{scrollable:!0,empty:e?(0,g.Y)("div",{children:(0,g.Y)(n.Empty,{description:(0,g.Y)(c.A,{id:"QD6iZA",defaultMessage:"No parameters match the search filter"})})}):null,css:I,children:[(0,g.Y)(n.TableRow,{isHeader:!0,children:C.getLeafHeaders().map(((e,t)=>(0,g.Y)(n.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewparamstable.tsx_244",header:e,column:e.column,setColumnSizing:C.setColumnSizing,isResizing:e.column.getIsResizing(),css:(0,s.AH)({flexGrow:e.column.getCanResize()?0:1},""),style:{flexBasis:e.column.getCanResize()?e.column.getSize():void 0},children:(0,u.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),C.getRowModel().rows.map((e=>(0,g.Y)(n.TableRow,{children:e.getAllCells().map((e=>{var t;return(0,g.Y)(n.TableCell,{css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,style:{flexGrow:e.column.getCanResize()?0:1,flexBasis:e.column.getCanResize()?e.column.getSize():void 0},multiline:!0,children:(0,u.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)))]})]})})()})]})}},43075:function(e,t,i){i.d(t,{Ay:function(){return ee}});var s=i(68248),o=i(76118),r=i(46709),n=i(40724),a=i(2560),l=i(56530),d=i(84173),c=i(91105),h=i(15765),p=i(26765),u=i(60209),g=i.n(u),m=i(43835),f=i(26349),v=i(673),w=i(11522),M=i(27206),b=i(27757),y=i(79081),A=i(27299),x=i(40072),I=i(61349),N=i(5690),Y=i(44105),R=i(70513),S=i(60284),C=i(73408);const _=({loggedModelId:e})=>{var t;const{data:i}=(0,R.b3)({loggedModelId:e}),o=null===i||void 0===i||null===(t=i.info)||void 0===t?void 0:t.experiment_id,{theme:r}=(0,b.u)();return(0,C.Y)(A.Alert,{type:"info",componentId:"mlflow.artifacts.logged_model_fallback_info",message:(0,C.Y)(n.A,{id:"pcNJvo",defaultMessage:"You're viewing artifacts assigned to a <link>logged model</link> associated with this run.",values:{link:t=>o?(0,C.Y)(c.N_,{to:S.Ay.getExperimentLoggedModelDetailsPage(o,e),children:t}):(0,C.Y)(C.FK,{children:t})}}),closable:!1,css:(0,s.AH)({margin:r.spacing.xs},"")})};var T=i(65765),k=i(46846),F=i(181),L=i(91701);const{Text:D}=b.T;var E={name:"ou8xsw",styles:"flex:0 0 auto"},H={name:"1l0i7xs",styles:"flex:1 1;overflow:hidden"},P={name:"i3oi5p",styles:"flex:0 1"};class z extends r.Component{constructor(...e){super(...e),this.state={activeNodeId:void 0,toggledNodeIds:{},requestedNodeIds:new Set,viewAsTable:!0},this.onToggleTreebeard=(e,t)=>{const{id:i,loading:s}=e,o=this.props.isLoggedModelsMode,r=new Set(this.state.requestedNodeIds);s&&!this.state.requestedNodeIds.has(i)&&(o&&this.props.loggedModelId?this.props.listArtifactsLoggedModelApi(this.props.loggedModelId,i,this.props.experimentId,void 0,this.props.entityTags):this.props.listArtifactsApi(this.props.runUuid,i,void 0,this.props.experimentId,this.props.entityTags)),this.setState({activeNodeId:i,toggledNodeIds:{...this.state.toggledNodeIds,[i]:t},requestedNodeIds:r})},this.getTreebeardData=e=>{const{isRoot:t}=e;if(t){if(e.children)return Object.values(e.children).map((e=>this.getTreebeardData(e)));throw Error("unreachable code.")}let i,s,o,r,n;if(e.fileInfo){const{path:t}=e.fileInfo;i=t,s=(0,h.hA)(t)}const a=this.state.toggledNodeIds[i];a&&(o=a),e.children&&(r=Object.values(e.children).map((e=>this.getTreebeardData(e)))),this.state.activeNodeId===i&&(n=!0);return{id:i,name:s,toggled:o,children:r,active:n,loading:void 0!==e.children&&!e.isLoaded}}}getExistingModelVersions(){const{modelVersionsBySource:e}=this.props;return e[w.A.normalize(this.getActiveNodeRealPath())]}renderRegisterModelButton(){const{runUuid:e}=this.props,{activeNodeId:t}=this.state,i=this.getActiveNodeRealPath();return(0,C.Y)(m.vR,{runUuid:e,modelPath:i,modelRelativePath:String(t),disabled:void 0===t,showButton:!0,buttonType:void 0})}renderModelVersionInfoSection(e,t){return(0,C.Y)(U,{modelVersion:(0,o.last)(e),intl:this.props.intl})}renderPathAndSizeInfo(){const e=p.x.findChild(this.props.artifactNode,this.state.activeNodeId),t=this.getActiveNodeRealPath();return(0,C.FD)("div",{className:"mlflow-artifact-info-left",children:[(0,C.FD)("div",{className:"mlflow-artifact-info-path",children:[(0,C.Y)("label",{children:(0,C.Y)(n.A,{id:"axF2gD",defaultMessage:"Full Path:"})})," ",(0,C.Y)(D,{className:"mlflow-artifact-info-text",ellipsis:!0,copyable:!0,children:t})]}),!1===e.fileInfo.is_dir?(0,C.FD)("div",{className:"mlflow-artifact-info-size",children:[(0,C.Y)("label",{children:(0,C.Y)(n.A,{id:"mpHsCg",defaultMessage:"Size:"})})," ",g()(this.getActiveNodeSize())]}):null]})}renderSizeInfo(){const e=p.x.findChild(this.props.artifactNode,this.state.activeNodeId),{theme:t}=this.props.designSystemThemeApi;return(0,C.FD)("div",{style:{display:"flex",alignItems:"center",gap:t.spacing.sm,overflow:"hidden",textOverflow:"ellipsis"},children:[(0,C.Y)(b.T.Text,{bold:!0,size:"lg",ellipsis:!0,title:this.state.activeNodeId,children:this.state.activeNodeId}),!1===e.fileInfo.is_dir&&(0,C.Y)(b.T.Text,{color:"secondary",children:g()(this.getActiveNodeSize())})]})}renderPathInfo(){const e=this.getActiveNodeRealPath(),{theme:t}=this.props.designSystemThemeApi;return(0,C.FD)("div",{css:(0,s.AH)({display:"flex",overflow:"hidden",alignItems:"center",gap:t.spacing.sm},""),children:[(0,C.FD)("div",{css:(0,s.AH)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:"0 auto",color:t.colors.textSecondary},""),title:e,children:[(0,C.Y)(n.A,{id:"YZDyOo",defaultMessage:"Path:"})," ",e]}),(0,C.Y)(L.i,{css:E,showLabel:!1,size:"small",type:"tertiary",copyText:e,icon:(0,C.Y)(A.CopyIcon,{})})]})}onDownloadClick(e,t,i,s){e&&!s?window.location.href=(0,T.To)(t,e):i&&(window.location.href=(0,T.qk)(t,i))}renderControls(){const{runUuid:e,loggedModelId:t,isFallbackToLoggedModelArtifacts:i}=this.props,{activeNodeId:s}=this.state;return(0,C.Y)("div",{style:{display:"flex",alignItems:"flex-start"},children:(0,C.FD)("div",{style:{display:"inline-flex",alignItems:"center"},children:[this.shouldShowViewAsTableCheckbox&&(0,C.Y)(A.Checkbox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_288",isChecked:this.state.viewAsTable,onChange:()=>this.setState({viewAsTable:!this.state.viewAsTable}),children:(0,C.Y)(n.A,{id:"zv4Ycc",defaultMessage:"View as table"})}),(0,C.Y)(y.T,{componentId:"mlflow.artifact_view.download_artifact",side:"top",align:"end",content:this.props.intl.formatMessage({id:"Y9ZFyN",defaultMessage:"Download artifact"}),children:(0,C.Y)(b.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_artifactview.tsx_337",icon:(0,C.Y)(A.DownloadIcon,{}),onClick:()=>this.onDownloadClick(e,s,t,i)})})]})})}renderArtifactInfo(){const e=this.getExistingModelVersions();let t;t=e&&w.A.isModelRegistryEnabled()?this.renderModelVersionInfoSection(e,this.props.intl):this.activeNodeCanBeRegistered()&&w.A.isModelRegistryEnabled()?this.renderRegisterModelButton():this.activeNodeIsDirectory()?null:this.renderControls();const{theme:i}=this.props.designSystemThemeApi;return(0,C.FD)("div",{css:(0,s.AH)({padding:`${i.spacing.xs}px ${i.spacing.sm}px ${i.spacing.sm}px ${i.spacing.md}px`,display:"flex",flexDirection:"column",gap:i.spacing.xs},""),children:[(0,C.FD)("div",{css:(0,s.AH)({whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",alignItems:"center",gap:i.spacing.md},""),children:[(0,C.Y)("div",{css:H,children:this.renderSizeInfo()}),(0,C.Y)("div",{css:P,children:t})]}),this.renderPathInfo()]})}getActiveNodeRealPath(){return this.state.activeNodeId?`${this.props.artifactRootUri}/${this.state.activeNodeId}`:this.props.artifactRootUri}getActiveNodeSize(){if(this.state.activeNodeId){const e=p.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.file_size||"0";return parseInt(e,10)}return 0}activeNodeIsDirectory(){if(this.state.activeNodeId){return p.x.findChild(this.props.artifactNode,this.state.activeNodeId).fileInfo.is_dir}return!0}activeNodeCanBeRegistered(){if(this.state.activeNodeId){const e=p.x.findChild(this.props.artifactNode,this.state.activeNodeId);if(e&&e.children&&Y.eh in e.children)return!0}return!1}componentDidUpdate(e,t){const{activeNodeId:i}=this.state;t.activeNodeId!==i&&this.props.handleActiveNodeChange(this.activeNodeIsDirectory())}componentDidMount(){if(this.props.initialSelectedArtifactPath){const t=this.props.initialSelectedArtifactPath.split("/");if(t)try{p.x.findChild(this.props.artifactNode,this.props.initialSelectedArtifactPath)}catch(e){return void console.error(e)}let i="";const s={activeNodeId:this.props.initialSelectedArtifactPath,toggledNodeIds:{}};t.forEach((e=>{i+=e,s.toggledNodeIds[i]=!0,i+="/"})),this.setArtifactState(s)}}setArtifactState(e){this.setState(e)}get shouldShowViewAsTableCheckbox(){return this.state.activeNodeId&&this.props.runTags&&(0,F.L9)(this.props.runTags).includes(this.state.activeNodeId)}render(){if(!this.props.artifactNode||p.x.isEmpty(this.props.artifactNode))return(0,C.Y)(q,{useAutoHeight:this.props.useAutoHeight});const{theme:e}=this.props.designSystemThemeApi,{loggedModelId:t,isLoggedModelsMode:i}=this.props;return(0,C.FD)("div",{className:"mlflow-artifact-view",css:(0,s.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0,[e.responsive.mediaQueries.xs]:{overflowX:"auto"}},""),children:[(0,C.Y)("div",{style:{minWidth:"200px",maxWidth:"400px",flex:1,whiteSpace:"nowrap",borderRight:`1px solid ${e.colors.borderDecorative}`},children:(0,C.Y)(k.K,{data:this.getTreebeardData(this.props.artifactNode),onToggleTreebeard:this.onToggleTreebeard})}),(0,C.FD)("div",{className:"mlflow-artifact-right",children:[this.props.isFallbackToLoggedModelArtifacts&&this.props.loggedModelId&&(0,C.Y)(_,{loggedModelId:this.props.loggedModelId}),this.state.activeNodeId?this.renderArtifactInfo():null,(0,C.Y)(f.A,{experimentId:this.props.experimentId,runUuid:this.props.runUuid,path:this.state.activeNodeId,isDirectory:this.activeNodeIsDirectory(),size:this.getActiveNodeSize(),runTags:this.props.runTags,artifactRootUri:this.props.artifactRootUri,modelVersions:this.props.modelVersions,showArtifactLoggedTableView:this.state.viewAsTable&&this.shouldShowViewAsTableCheckbox,loggedModelId:t,isLoggedModelsMode:i,entityTags:this.props.entityTags})]})]})}}const V={listArtifactsApi:N.cN,listArtifactsLoggedModelApi:N.bb},B=(0,l.Ng)(((e,t)=>{var i;const{runUuid:s,loggedModelId:r,isLoggedModelsMode:n}=t,{apis:a}=e,l=n&&r?(0,x.ej)(r,e):(0,x.ej)(s,e),d=null!==(i=null===t||void 0===t?void 0:t.artifactRootUri)&&void 0!==i?i:(0,x.vb)(s,e),c=(0,I.U_)(e),h=(0,o.flatMap)(c,(e=>({...e,source:w.A.normalize(e.source)})));return{artifactNode:l,artifactRootUri:d,modelVersions:c,modelVersionsBySource:(0,o.groupBy)(h,"source"),apis:a}}),V)((0,b.at)((0,d.Ay)(z)));function U(e){const{modelVersion:t,intl:i}=e,{name:s,version:o,status:a,status_message:l}=t;let d=M.fM.getModelVersionPageRoute(s,o);const h=(0,C.Y)(y.T,{componentId:"mlflow.artifacts.model_version.link",content:`${s} version ${o}`,children:(0,C.Y)("span",{children:(0,C.FD)(c.N_,{to:d,className:"model-version-link",target:"_blank",rel:"noreferrer",children:[(0,C.Y)("span",{className:"model-name",children:s}),(0,C.FD)("span",{children:[",\xa0v",o,"\xa0"]}),(0,C.Y)("i",{className:"fa fa-external-link-o"})]})})});return(0,C.FD)("div",{className:"model-version-info",children:[(0,C.FD)("div",{className:"model-version-link-section",children:[(0,C.Y)(y.T,{componentId:"mlflow.artifacts.model_version.status",content:l||v.zr[a],children:(0,C.Y)("div",{children:v.UA[a]})}),h]}),(0,C.Y)("div",{className:"model-version-status-text",children:a===v.IP.READY?(0,C.Y)(r.Fragment,{children:(0,C.Y)(n.A,{id:"nVndit",defaultMessage:"Registered on {registeredDate}",values:{registeredDate:w.A.formatTimestamp(t.creation_timestamp,i)}})}):l||v.zA[a]})]})}function q({useAutoHeight:e}){const{theme:t}=(0,b.u)();return(0,C.Y)("div",{css:(0,s.AH)({flex:e?1:"unset",height:e?"auto":void 0,paddingTop:t.spacing.md,display:"flex",justifyContent:"center",alignItems:"center"},""),children:(0,C.Y)(A.Empty,{image:(0,C.Y)(A.LayerIcon,{}),title:(0,C.Y)(n.A,{id:"X3F7x3",defaultMessage:"No Artifacts Recorded"}),description:(0,C.Y)(n.A,{id:"3geT+I",defaultMessage:"Use the log artifact APIs to store file outputs from MLflow runs."})})})}var $=i(99213),O=i(74264),W=i(43233),K=i(38975),j=i(71055),G=i(77153);class Q extends r.Component{constructor(...e){super(...e),this.pollIntervalId=void 0,this.getFailedtoListArtifactsMsg=()=>(0,C.Y)("span",{children:(0,C.Y)(n.A,{id:"V4CsL/",defaultMessage:"Unable to list artifacts stored under {artifactUri} for the current run. Please contact your tracking server administrator to notify them of this error, which can happen when the tracking server lacks permission to list artifacts under the current run's root artifact directory.",values:{artifactUri:this.props.artifactRootUri}})}),this.state={activeNodeIsDirectory:!1,errorThrown:!1},this.searchRequestId=(0,W.yk)(),this.listArtifactRequestIds=[(0,W.yk)()].concat(this.props.initialSelectedArtifactPath?this.props.initialSelectedArtifactPath.split("/").map((e=>(0,W.yk)())):[]),this.pollModelVersionsForCurrentRun=async()=>{const{apis:e,runUuid:t,isLoggedModelsMode:i}=this.props,{activeNodeIsDirectory:s}=this.state,o=e[this.searchRequestId];if((!i||t)&&s&&(!o||!o.active))try{await this.props.searchModelVersionsApi({run_id:t},this.searchRequestId)}catch(r){if(!this.state.errorThrown){const e=`Error while fetching model version for run: ${r instanceof Error?r.toString():JSON.stringify(r)}`;w.A.logErrorAndNotifyUser(e),this.setState({errorThrown:!0})}}},this.handleActiveNodeChange=e=>{this.setState({activeNodeIsDirectory:e})},this.pollArtifactsForCurrentRun=async()=>{const{runUuid:e,loggedModelId:t,isFallbackToLoggedModelArtifacts:i}=this.props,s=this.props.isLoggedModelsMode;let o;if(s&&t){var r;if(i){var n,a;const e=await(0,R.Ef)(t,!0);o=null===e||void 0===e||null===(n=e.model)||void 0===n||null===(a=n.info)||void 0===a?void 0:a.tags,this.setState({fallbackEntityTags:o})}await this.props.listArtifactsLoggedModelApi(this.props.loggedModelId,void 0,this.props.experimentId,this.listArtifactRequestIds[0],null!==(r=o)&&void 0!==r?r:this.props.entityTags)}else await this.props.listArtifactsApi(e,void 0,this.listArtifactRequestIds[0],this.props.experimentId,this.props.entityTags);if(this.props.initialSelectedArtifactPath){const i=this.props.initialSelectedArtifactPath.split("/");let r="";for(let n=0;n<i.length;n++){var l;if(r+=i[n],s&&t)await this.props.listArtifactsLoggedModelApi(this.props.loggedModelId,r,this.props.experimentId,this.listArtifactRequestIds[n+1],null!==(l=o)&&void 0!==l?l:this.props.entityTags);else await this.props.listArtifactsApi(e,r,this.listArtifactRequestIds[n+1],this.props.experimentId,this.props.entityTags);r+="/"}}},this.renderErrorCondition=e=>e,this.renderArtifactView=(e,t,i)=>{var o;if(e&&!t)return(0,C.Y)(K.d,{});if(this.renderErrorCondition(t)){const e=i[0];e&&e.error&&console.error(e.error);const t=(()=>{const t=null===e||void 0===e?void 0:e.error;return t instanceof G.s?t.getMessageField():this.getFailedtoListArtifactsMsg()})();return(0,C.Y)(j.F,{css:(0,s.AH)({flex:this.props.useAutoHeight?1:"unset",height:this.props.useAutoHeight?"auto":void 0},""),"data-testid":"artifact-view-error",description:t})}return(0,C.Y)(B,{...this.props,entityTags:null!==(o=this.state.fallbackEntityTags)&&void 0!==o?o:this.props.entityTags,handleActiveNodeChange:this.handleActiveNodeChange,useAutoHeight:this.props.useAutoHeight})}}componentDidMount(){this.props.runUuid&&this.isWorkspaceModelRegistryEnabled&&(this.pollModelVersionsForCurrentRun(),this.pollIntervalId=setInterval(this.pollModelVersionsForCurrentRun,v.Gs)),this.pollArtifactsForCurrentRun()}componentDidUpdate(e){e.runUuid!==this.props.runUuid&&this.setState({errorThrown:!1}),!e.isFallbackToLoggedModelArtifacts&&this.props.isFallbackToLoggedModelArtifacts&&this.pollArtifactsForCurrentRun()}get isWorkspaceModelRegistryEnabled(){return w.A.isModelRegistryEnabled()}componentWillUnmount(){this.isWorkspaceModelRegistryEnabled&&!(0,o.isUndefined)(this.pollIntervalId)&&clearInterval(this.pollIntervalId)}render(){return(0,C.Y)(O.Ay,{requestIds:this.listArtifactRequestIds,children:this.renderArtifactView})}}const X=["/Volumes/","dbfs:/Volumes/"],J={listArtifactsApi:N.cN,listArtifactsLoggedModelApi:N.bb,searchModelVersionsApi:$.hY},Z=(0,l.Ng)(((e,t)=>{var i;const{runUuid:s,location:r,runOutputs:n}=t,a=((null===r||void 0===r?void 0:r.pathname)||"").match(/\/(?:artifactPath|artifacts)\/(.+)/),{isFallbackToLoggedModelArtifacts:l,fallbackLoggedModelId:d}=((e,t)=>{if(X.some((e=>{var i;return null===(i=t.artifactRootUri)||void 0===i?void 0:i.startsWith(e)})),!t.isLoggedModelsMode){var i,s;const r=(0,x.ej)(t.runUuid,e),n=r&&!r.fileInfo&&(0,o.isEmpty)(r.children),a=null===(i=(0,o.first)(null===(s=t.runOutputs)||void 0===s?void 0:s.modelOutputs))||void 0===i?void 0:i.modelId;if(n&&a)return{isFallbackToLoggedModelArtifacts:!0,fallbackLoggedModelId:a}}return{isFallbackToLoggedModelArtifacts:!1}})(e,t),c=(null===a||void 0===a?void 0:a[1])||void 0,{apis:h}=e,p=null!==(i=t.artifactRootUri)&&void 0!==i?i:(0,x.vb)(s,e);let u=c;if(!u){var g;const e=(0,F.x1)(null!==(g=t.runTags)&&void 0!==g?g:{});e.length>0&&(u=(0,o.first)(e))}return{artifactRootUri:p,apis:h,initialSelectedArtifactPath:u,isLoggedModelsMode:!!l||t.isLoggedModelsMode,loggedModelId:l?d:t.loggedModelId,isFallbackToLoggedModelArtifacts:l}}),J)(Q);var ee=(0,a.h)(Z)},43835:function(e,t,i){i.d(t,{vR:function(){return M}});var s=i(46709),o=i(76118),r=i(27757),n=i(79081),a=i(84173),l=i(40724),d=i(9695),c=i(99213),h=i(56530),p=i(11522),u=i(43233),g=i(87821),m=i(73408);class f extends s.Component{constructor(){super(),this.form=void 0,this.state={visible:!1,confirmLoading:!1,modelByName:{}},this.createRegisteredModelRequestId=(0,u.yk)(),this.createModelVersionRequestId=(0,u.yk)(),this.searchModelVersionRequestId=(0,u.yk)(),this.showRegisterModal=()=>{this.setState({visible:!0})},this.hideRegisterModal=()=>{var e,t;this.setState({visible:!1}),null===(e=(t=this.props).onCloseModal)||void 0===e||e.call(t)},this.resetAndClearModalForm=()=>{var e,t,i;this.setState({visible:!1,confirmLoading:!1}),null===(e=this.form.current)||void 0===e||e.resetFields(),null===(t=(i=this.props).onCloseModal)||void 0===t||t.call(i)},this.handleRegistrationFailure=e=>{this.setState({confirmLoading:!1}),p.A.logErrorAndNotifyUser(e)},this.handleSearchRegisteredModels=e=>{this.isWorkspaceModelRegistryEnabled&&this.props.searchRegisteredModelsApi((0,g.pc)(e),5)},this.reloadModelVersionsForCurrentRun=()=>{const{runUuid:e}=this.props;return this.props.searchModelVersionsApi({run_id:e},this.searchModelVersionRequestId)},this.handleRegisterModel=()=>this.form.current.validateFields().then((e=>{this.setState({confirmLoading:!0});const{runUuid:t,modelPath:i,modelRelativePath:s,loggedModelId:r}=this.props;let n=i;r?n=`models:/${r}`:s&&t&&(n=`runs:/${t}/${s}`);const a=e[d.BE];var l,c,h,u;return a===d.QN?this.props.createRegisteredModelApi(e[d.F3],this.createRegisteredModelRequestId).then((()=>this.props.createModelVersionApi(e[d.F3],n,t,[],this.createModelVersionRequestId,this.props.loggedModelId))).then(null!==(l=this.props.onRegisterSuccess)&&void 0!==l?l:o.identity).then(this.resetAndClearModalForm).catch(null!==(c=this.props.onRegisterFailure)&&void 0!==c?c:this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(p.A.logErrorAndNotifyUser):this.props.createModelVersionApi(a,n,t,[],this.createModelVersionRequestId,this.props.loggedModelId).then(null!==(h=this.props.onRegisterSuccess)&&void 0!==h?h:o.identity).then(this.resetAndClearModalForm).catch(null!==(u=this.props.onRegisterFailure)&&void 0!==u?u:this.handleRegistrationFailure).then(this.reloadModelVersionsForCurrentRun).catch(p.A.logErrorAndNotifyUser)})),this.form=s.createRef()}get isWorkspaceModelRegistryEnabled(){return!0}componentDidMount(){this.isWorkspaceModelRegistryEnabled&&this.props.searchRegisteredModelsApi()}componentDidUpdate(e,t){!1===t.visible&&!0===this.state.visible&&this.isWorkspaceModelRegistryEnabled&&this.props.searchRegisteredModelsApi()}renderRegisterModelForm(){const{modelByName:e}=this.props;return(0,m.Y)(d.xH,{modelByName:e,innerRef:this.form,onSearchRegisteredModels:(0,o.debounce)(this.handleSearchRegisteredModels,300)})}renderFooter(){return[(0,m.Y)(r.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_242",onClick:this.hideRegisterModal,children:(0,m.Y)(l.A,{id:"iwD/Dv",defaultMessage:"Cancel"})},"back"),(0,m.Y)(r.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_248",type:"primary",onClick:()=>this.handleRegisterModel(),"data-testid":"confirm-register-model",children:(0,m.Y)(l.A,{id:"wBFfWW",defaultMessage:"Register"})},"submit")]}renderHelper(e,t,i){const{visible:s,confirmLoading:o}=this.state,{showButton:a=!0,buttonType:d}=this.props;return(0,m.FD)("div",{className:"register-model-btn-wrapper",children:[a&&(0,m.Y)(r.B,{componentId:"codegen_mlflow_app_src_model-registry_components_registermodel.tsx_261",className:"register-model-btn",type:d,onClick:this.showRegisterModal,disabled:e,htmlType:"button",children:(0,m.Y)(l.A,{id:"YQ+Eon",defaultMessage:"Register model"})}),(0,m.Y)(n.d,{title:this.props.intl.formatMessage({id:"qSpgg/",defaultMessage:"Register model"}),width:540,visible:this.props.modalVisible||s,onOk:()=>this.handleRegisterModel(),okText:this.props.intl.formatMessage({id:"9W3kev",defaultMessage:"Register"}),confirmLoading:o,onCancel:this.hideRegisterModal,centered:!0,footer:i,children:t})]})}render(){const{disabled:e}=this.props;return this.renderHelper(e,this.renderRegisterModelForm(),this.renderFooter())}}const v={createRegisteredModelApi:c.eF,createModelVersionApi:c.Ey,searchModelVersionsApi:c.hY,searchRegisteredModelsApi:c.JK},w=(0,a.Ay)(f),M=(0,h.Ng)((e=>({modelByName:e.entities.modelByName})),v)(w)},47207:function(e,t,i){i.d(t,{z:function(){return r}});var s=i(27757),o=i(46709);const r=()=>{const{theme:e}=(0,s.u)();return{detailsPageTableStyles:(0,o.useMemo)((()=>({minHeight:200,maxHeight:500,height:"min-content",overflow:"hidden","& > div":{...(0,s.ay)(e)}})),[e]),detailsPageNoEntriesStyles:(0,o.useMemo)((()=>[{flex:"1",display:"flex",alignItems:"center",justifyContent:"center"},{marginTop:e.spacing.md}]),[e])}}},48107:function(e,t,i){i.d(t,{N:function(){return a}});var s=i(68248),o=i(27757),r=i(73408);var n={name:"4zleql",styles:"display:block"};const a=({children:e})=>{const{theme:t}=(0,o.u)();return(0,r.Y)("table",{css:(0,s.AH)({display:"block",border:`1px solid ${t.colors.borderDecorative}`,borderBottom:"none",borderRadius:t.general.borderRadiusBase,width:"50%",minWidth:640,marginBottom:t.spacing.lg,overflow:"hidden"},""),children:(0,r.Y)("tbody",{css:n,children:e})})}},52644:function(e,t,i){i.d(t,{V:function(){return M}});var s=i(68248),o=i(46709),r=i(27757),n=i(27299),a=i(79081),l=i(91105);const d=({when:e,message:t})=>{const i=o.useContext(l.jb).navigator.block;return o.useEffect((()=>{if(!e)return;return null===i||void 0===i?void 0:i((()=>window.confirm(t)))}),[t,i,e]),null};i(94943);var c=i(89774),h=i(33656),p=i(40724),u=i(84173),g=i(73408);const m=e=>(0,g.Y)(v,{name:e});class f extends o.Component{constructor(...e){super(...e),this.state={markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab,error:null},this.converter=(0,h.OT)(),this.handleMdeValueChange=e=>{this.setState({markdown:e})},this.handleTabChange=e=>{this.setState({selectedTab:e})},this.handleSubmitClick=()=>{const{onSubmit:e}=this.props,{markdown:t}=this.state;return this.setState({confirmLoading:!0}),e?Promise.resolve(e(t)).then((()=>{this.setState({confirmLoading:!1,error:null})})).catch((e=>{this.setState({confirmLoading:!1,error:e&&e.getMessageField?e.getMessageField():this.props.intl.formatMessage({id:"SzvvXl",defaultMessage:"Failed to submit"})})})):null},this.handleCancelClick=()=>{this.setState({markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab});const{onCancel:e}=this.props;e&&e()}}componentDidUpdate(e){e.defaultMarkdown===this.props.defaultMarkdown&&e.defaultSelectedTab===this.props.defaultSelectedTab||this.setState({markdown:this.props.defaultMarkdown,selectedTab:this.props.defaultSelectedTab})}contentHasChanged(){return this.state.markdown!==this.props.defaultMarkdown}renderActions(){const{confirmLoading:e}=this.state;return(0,g.Y)("div",{className:"mlflow-editable-note-actions","data-testid":"editable-note-actions",children:(0,g.FD)("div",{children:[(0,g.Y)(r.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_114",type:"primary",className:"editable-note-save-button",onClick:this.handleSubmitClick,disabled:!this.contentHasChanged()||e,loading:e,"data-testid":"editable-note-save-button",children:this.props.saveText}),(0,g.Y)(r.B,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_124",htmlType:"button",className:"editable-note-cancel-button",onClick:this.handleCancelClick,disabled:e,children:(0,g.Y)(p.A,{id:"17k196",defaultMessage:"Cancel"})})]})})}getSanitizedHtmlContent(){const{markdown:e}=this.state;if(e){const t=(0,h.NW)(this.converter.makeHtml(e));return(0,h.Yc)(t)}return null}render(){const{showEditor:e}=this.props,{markdown:t,selectedTab:i,error:s}=this.state,r=this.getSanitizedHtmlContent();return(0,g.Y)("div",{className:"note-view-outer-container","data-testid":"note-view-outer-container",children:e?(0,g.FD)(o.Fragment,{children:[(0,g.Y)("div",{className:"note-view-text-area",children:(0,g.Y)(c.default,{value:t,minEditorHeight:this.props.minEditorHeight,maxEditorHeight:this.props.maxEditorHeight,minPreviewHeight:50,childProps:this.props.childProps,toolbarCommands:this.props.toolbarCommands,onChange:this.handleMdeValueChange,selectedTab:i,onTabChange:this.handleTabChange,generateMarkdownPreview:e=>Promise.resolve(this.getSanitizedHtmlContent(e)),getIcon:m})}),s&&(0,g.Y)(n.Alert,{componentId:"codegen_mlflow_app_src_common_components_editablenote.tsx_178",type:"error",message:this.props.intl.formatMessage({id:"79dD5F",defaultMessage:"There was an error submitting your note."}),description:s,closable:!0}),this.renderActions(),(0,g.Y)(d,{when:this.contentHasChanged(),message:this.props.intl.formatMessage({id:"dwTTNK",defaultMessage:"Are you sure you want to navigate away? Your pending text changes will be lost."})})]}):(0,g.Y)(w,{content:r})})}}function v(e){const{theme:t}=(0,r.u)(),{name:i}=e;return(0,g.Y)(a.T,{side:"top",content:i,componentId:"mlflow.common.components.editable-note.tooltip-icon",children:(0,g.Y)("span",{css:(0,s.AH)({color:t.colors.textPrimary},""),children:(0,g.Y)(c.SvgIcon,{icon:i})})})}function w(e){const{content:t}=e;return t?(0,g.Y)("div",{className:"note-view-outer-container","data-testid":"note-view-outer-container",children:(0,g.Y)("div",{className:"note-view-text-area",children:(0,g.Y)("div",{className:"note-view-preview note-editor-preview",children:(0,g.Y)("div",{className:"note-editor-preview-content","data-testid":"note-editor-preview-content",dangerouslySetInnerHTML:{__html:e.content}})})})}):(0,g.Y)("div",{children:(0,g.Y)(p.A,{id:"PRe/8y",defaultMessage:"None"})})}f.defaultProps={defaultMarkdown:"",defaultSelectedTab:"write",showEditor:!1,saveText:(0,g.Y)(p.A,{id:"Shv28w",defaultMessage:"Save"}),confirmLoading:!1,toolbarCommands:[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unordered-list","ordered-list","checked-list"]],maxEditorHeight:500,minEditorHeight:200,childProps:{}};const M=(0,u.Ay)(f)},60209:function(e){e.exports=function(e,t){if("string"===typeof e)return n(e);if("number"===typeof e)return r(e,t);return null},e.exports.format=r,e.exports.parse=n;var t=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,s={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function r(e,o){if(!Number.isFinite(e))return null;var r=Math.abs(e),n=o&&o.thousandsSeparator||"",a=o&&o.unitSeparator||"",l=o&&void 0!==o.decimalPlaces?o.decimalPlaces:2,d=Boolean(o&&o.fixedDecimals),c=o&&o.unit||"";c&&s[c.toLowerCase()]||(c=r>=s.tb?"TB":r>=s.gb?"GB":r>=s.mb?"MB":r>=s.kb?"KB":"B");var h=(e/s[c.toLowerCase()]).toFixed(l);return d||(h=h.replace(i,"$1")),n&&(h=h.replace(t,n)),h+a+c}function n(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,i=o.exec(e),r="b";return i?(t=parseFloat(i[1]),r=i[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(s[r]*t)}},69603:function(e,t,i){i.d(t,{Z:function(){return n}});var s=i(68248),o=i(27757),r=i(73408);const n=({title:e,value:t})=>{const{theme:i}=(0,o.u)();return(0,r.FD)("tr",{css:(0,s.AH)({display:"flex",borderBottom:`1px solid ${i.colors.borderDecorative}`,minHeight:i.general.heightSm},""),children:[(0,r.Y)("th",{css:(0,s.AH)({flex:"0 0 240px",backgroundColor:i.colors.backgroundSecondary,color:i.colors.textSecondary,padding:i.spacing.sm,display:"flex",alignItems:"flex-start"},""),children:e}),(0,r.Y)("td",{css:(0,s.AH)({flex:1,padding:i.spacing.sm,paddingTop:0,paddingBottom:0,display:"flex",alignItems:"center"},""),children:t})]})}},70513:function(e,t,i){i.d(t,{Ef:function(){return l},b3:function(){return a}});var s=i(49708),o=i(61077);i(46709);const r=e=>["GET_LOGGED_MODEL",e],n=async({queryKey:[,e]})=>(0,o.ff)((0,o.we)(`ajax-api/2.0/mlflow/logged-models/${e}`),"GET"),a=({loggedModelId:e,enabled:t=!0})=>{const{data:i,isLoading:o,isFetching:a,refetch:l,error:d}=(0,s.I)({queryKey:r(null!==e&&void 0!==e?e:""),queryFn:n,cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t});return{isLoading:o,isFetching:a,data:null===i||void 0===i?void 0:i.model,refetch:l,error:d}},l=async(e,t=!1)=>{try{return await(0,o.ff)((0,o.we)(`ajax-api/2.0/mlflow/logged-models/${e}`),"GET")}catch(i){if(t)return;throw i}}},87821:function(e,t,i){i.d(t,{_C:function(){return a},pc:function(){return r},so:function(){return n}});var s=i(673),o=i(99213);function r(e){return e?`${s.Qs} ilike ${(0,o.GP)(e,!0)}`:""}function n({query:e=""}={}){const t=[],i=e.includes("tags.")?e:r(e);return i&&t.push(i),t.join(" AND ")}function a(e){return"searchInput"in e?e.searchInput:"nameSearchInput"in e&&"tagSearchInput"in e?r(e.nameSearchInput)+" AND "+e.tagSearchInput:"tagSearchInput"in e?e.tagSearchInput:"nameSearchInput"in e?e.nameSearchInput:""}},88185:function(e,t,i){i.d(t,{t:function(){return c}});var s=i(68248),o=i(27757),r=i(27299),n=i(91701),a=i(73408);var l={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},d={name:"ozd7xs",styles:"flex-shrink:0"};const c=({value:e,className:t,element:i})=>{const{theme:c}=(0,o.u)();return(0,a.FD)("div",{css:(0,s.AH)({display:"flex",gap:c.spacing.xs,alignItems:"center"},""),className:t,children:[(0,a.Y)("span",{css:l,children:null!==i&&void 0!==i?i:e}),(0,a.Y)(n.i,{showLabel:!1,copyText:e,icon:(0,a.Y)(r.CopyIcon,{}),size:"small",css:d})]})}}}]);
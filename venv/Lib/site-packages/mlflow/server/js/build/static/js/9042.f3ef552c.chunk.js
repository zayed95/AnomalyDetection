"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[9042],{1150:function(e,t,n){n.d(t,{h:function(){return u}});var i,r,a,o,s,l=n(46709);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(null,arguments)}function d({title:e,titleId:t,...n},d){return l.createElement("svg",c({width:18,height:16,viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:d,"aria-labelledby":t},n),e?l.createElement("title",{id:t},e):null,i||(i=l.createElement("path",{d:"M1 0.813599V15.1865H17",stroke:"#A3AEB8",strokeLinecap:"round"})),r||(r=l.createElement("rect",{x:3.16943,y:10.5763,width:2.16949,height:3.25424,fill:"#338ECC"})),a||(a=l.createElement("rect",{x:6.42371,y:5.15259,width:2.16949,height:8.67797,fill:"#338ECC"})),o||(o=l.createElement("rect",{x:9.67798,y:8.40686,width:2.16949,height:5.42373,fill:"#338ECC"})),s||(s=l.createElement("rect",{x:12.9323,y:1.89832,width:2.16949,height:11.9322,fill:"#338ECC"})))}const u=l.forwardRef(d);n.p},29757:function(e,t,n){n.d(t,{GP:function(){return d},Mz:function(){return u},c_:function(){return p}});var i=n(46709),r=n(99478),a=n(95379),o=n(76118),s=n(73408);const l=(0,i.createContext)({draggedCardUuid:"",targetSection:"",isDragging:()=>!1}),c=(0,i.createContext)({setDraggedCardUuid:()=>{},setTargetSection:()=>{},setTargetPosition:()=>{},onDropChartCard:()=>{},onSwapCards:()=>{}}),d=()=>(0,i.useContext)(l),u=()=>(0,i.useContext)(c),p=({children:e,visibleChartCards:t=[]})=>{const[n,d]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),h=(0,i.useRef)(null),m=(0,i.useRef)(null);h.current=n,m.current=u;const g=(0,i.useRef)(null),f=(0,i.useCallback)((e=>{g.current=e}),[]),y=(0,i.useCallback)((()=>null!==h.current),[]),v=(0,a.g_)(),x=(0,i.useCallback)(((e,t)=>{v((n=>{var i;const r=null===(i=n.compareRunCharts)||void 0===i?void 0:i.slice();if(!r)return n;const a=r.findIndex((t=>t.uuid===e)),o=r.findIndex((e=>e.uuid===t));if(a<0||o<0)return n;const s=r[a];return r.splice(a,1),r.splice(o,0,s),{...n,compareRunCharts:r}}))}),[v]),C=(0,i.useCallback)((()=>{const e=h.current,n=m.current,i=g.current;null!==e&&null!==n&&null!==i&&(d(null),v((r=>{var a,s,l,c;const d=null===(a=r.compareRunCharts)||void 0===a?void 0:a.find((t=>t.uuid===e));if(!d)return r;const u=null===(s=r.compareRunSections)||void 0===s?void 0:s.find((e=>e.uuid===(null===d||void 0===d?void 0:d.metricSectionId))),p=null===(l=r.compareRunSections)||void 0===l?void 0:l.find((e=>e.uuid===n)),h=null===(c=r.compareRunCharts)||void 0===c?void 0:c.filter((e=>e.metricSectionId===(null===u||void 0===u?void 0:u.uuid)));if(u===p){var m;const n=null===(m=r.compareRunCharts)||void 0===m?void 0:m.slice(),a=null===h||void 0===h?void 0:h.filter((e=>t.includes(e)));if(!n||!a)return r;const s=n.findIndex((t=>t.uuid===e)),l=Math.min(i,a.length-1),c=(0,o.indexOf)(n,null===a||void 0===a?void 0:a[l]);return n&&-1!==s&&-1!==c&&(n.splice(s,1),n.splice(c,0,d)),{...r,compareRunCharts:n}}{var g,f;const e=null===(g=r.compareRunCharts)||void 0===g?void 0:g.filter((e=>e.metricSectionId===n&&!e.deleted));return e&&e.splice(i,0,d),{...r,compareRunCharts:(0,o.sortBy)(r.compareRunCharts,(t=>{var n;return null!==(n=null===e||void 0===e?void 0:e.indexOf(t))&&void 0!==n?n:-1})).map((e=>e.uuid===d.uuid?{...e,metricSectionId:n}:e)),compareRunSections:null===(f=r.compareRunSections)||void 0===f?void 0:f.map((e=>e.uuid===(null===u||void 0===u?void 0:u.uuid)||e.uuid===(null===p||void 0===p?void 0:p.uuid)?{...e,isReordered:!0}:e))}}})))}),[v,t]),_=(0,i.useMemo)((()=>({draggedCardUuid:n,targetSection:u,isDragging:y})),[n,u,y]),M=(0,i.useMemo)((()=>({setDraggedCardUuid:d,setTargetSection:p,setTargetPosition:f,onDropChartCard:C,onSwapCards:x})),[C,x,f]);return(0,s.Y)(r.G,{children:(0,s.Y)(l.Provider,{value:_,children:(0,s.Y)(c.Provider,{value:M,children:e})})})}},35062:function(e,t,n){n.d(t,{h:function(){return u}});var i,r,a,o,s,l=n(46709);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(null,arguments)}function d({title:e,titleId:t,...n},d){return l.createElement("svg",c({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:d,"aria-labelledby":t},n),e?l.createElement("title",{id:t},e):null,i||(i=l.createElement("path",{d:"M1 1V17H17",stroke:"#A3AEB8",strokeLinecap:"round"})),r||(r=l.createElement("path",{d:"M4.21875 3.58289C4.55663 3.58289 4.88067 3.68935 5.21469 3.73008C5.6474 3.78285 6.02137 3.96513 6.37191 4.21552C6.76902 4.49917 7.0271 4.74589 7.24101 5.18954C7.44337 5.60925 7.59378 6.06989 7.72958 6.51432C7.86002 6.94121 8.09708 7.33726 8.19153 7.77803C8.25347 8.0671 8.34514 8.32427 8.44678 8.60015C8.58028 8.96252 8.80086 9.27915 8.96667 9.62583C9.15145 10.0122 9.216 10.4461 9.34876 10.8551C9.57831 11.5623 9.91132 12.4763 10.7205 12.6731C11.4284 12.8453 12.1459 12.8845 12.8705 12.8845C13.0981 12.8845 13.3979 12.898 13.5831 12.7499C13.6402 12.7042 13.7451 12.6907 13.8164 12.6591C13.8752 12.6329 14.0919 12.5871 14.1123 12.5463",stroke:"#CCE3F2",strokeLinecap:"round"})),a||(a=l.createElement("path",{d:"M4.16162 12.9805C4.32512 12.9805 4.4895 12.9859 4.65284 12.9805C4.84076 12.9742 5.0468 12.7952 5.2099 12.707C5.62236 12.4841 5.99426 12.0648 6.24299 11.6739C6.49491 11.2781 6.8776 10.9871 7.0887 10.5649C7.27767 10.187 7.50992 9.80749 7.73691 9.45078C7.93911 9.13304 8.10211 8.77722 8.28637 8.44554C8.43088 8.18544 8.45 7.88672 8.60542 7.62768C8.94898 7.05509 9.16215 6.418 9.45873 5.82484C9.72614 5.29001 9.96898 4.82426 10.4159 4.42207C10.5753 4.27853 10.8984 4.21824 11.0995 4.14861C11.3303 4.06873 11.579 4.02714 11.8136 3.93592C12.0394 3.84807 12.2521 3.84383 12.4795 3.77386C12.6993 3.70623 12.9319 3.63713 13.1632 3.63713C13.5192 3.63713 13.9089 3.59155 14.2798 3.59155",stroke:"#CCE3F2",strokeLinecap:"round"})),o||(o=l.createElement("path",{d:"M3.79248 2.74207V13.8225",stroke:"#338ECC",strokeLinecap:"round"})),s||(s=l.createElement("path",{d:"M14.873 3.04419V13.7217",stroke:"#338ECC",strokeLinecap:"round"})))}const u=l.forwardRef(d);n.p},41110:function(e,t,n){n.d(t,{h:function(){return b}});var i,r,a,o,s,l,c,d,u,p,h,m,g,f,y,v,x,C,_=n(46709);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},M.apply(null,arguments)}function w({title:e,titleId:t,...n},w){return _.createElement("svg",M({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:w,"aria-labelledby":t},n),e?_.createElement("title",{id:t},e):null,i||(i=_.createElement("rect",{y:2,width:4,height:1,fill:"#338ECC"})),r||(r=_.createElement("rect",{x:5,y:2,width:4,height:1,fill:"#338ECC"})),a||(a=_.createElement("rect",{x:10,y:2,width:4,height:1,fill:"#338ECC"})),o||(o=_.createElement("rect",{y:4,width:4,height:1,fill:"#338ECC"})),s||(s=_.createElement("rect",{x:5,y:4,width:4,height:1,fill:"#338ECC"})),l||(l=_.createElement("rect",{x:10,y:4,width:4,height:1,fill:"#338ECC"})),c||(c=_.createElement("rect",{y:6,width:4,height:1,fill:"#D9D9D9"})),d||(d=_.createElement("rect",{x:5,y:6,width:4,height:1,fill:"#D9D9D9"})),u||(u=_.createElement("rect",{x:10,y:6,width:4,height:1,fill:"#D9D9D9"})),p||(p=_.createElement("rect",{y:8,width:4,height:1,fill:"#D9D9D9"})),h||(h=_.createElement("rect",{x:5,y:8,width:4,height:1,fill:"#D9D9D9"})),m||(m=_.createElement("rect",{x:10,y:8,width:4,height:1,fill:"#D9D9D9"})),g||(g=_.createElement("rect",{y:10,width:4,height:1,fill:"#D9D9D9"})),f||(f=_.createElement("rect",{x:5,y:10,width:4,height:1,fill:"#D9D9D9"})),y||(y=_.createElement("rect",{x:10,y:10,width:4,height:1,fill:"#D9D9D9"})),v||(v=_.createElement("rect",{y:12,width:4,height:1,fill:"#D9D9D9"})),x||(x=_.createElement("rect",{x:5,y:12,width:4,height:1,fill:"#D9D9D9"})),C||(C=_.createElement("rect",{x:10,y:12,width:4,height:1,fill:"#D9D9D9"})))}const b=_.forwardRef(w);n.p},48035:function(e,t,n){n.d(t,{h:function(){return h}});var i,r,a,o,s,l,c,d=n(46709);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(null,arguments)}function p({title:e,titleId:t,...n},p){return d.createElement("svg",u({width:18,height:16,viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:p,"aria-labelledby":t},n),e?d.createElement("title",{id:t},e):null,i||(i=d.createElement("path",{d:"M1 0.813599V15.1865H17",stroke:"#A3AEB8",strokeLinecap:"round"})),r||(r=d.createElement("circle",{cx:3.98301,cy:12.4746,r:1.35593,fill:"#338ECC"})),a||(a=d.createElement("ellipse",{cx:9.40684,cy:10.8475,rx:1.35593,ry:1.35593,fill:"#338ECC"})),o||(o=d.createElement("circle",{cx:5.6102,cy:8.1356,r:1.35593,fill:"#338ECC",fillOpacity:.25})),s||(s=d.createElement("circle",{cx:9.40684,cy:6.50852,r:1.35593,fill:"#338ECC"})),l||(l=d.createElement("ellipse",{cx:13.7457,cy:5.96616,rx:1.35593,ry:1.35593,fill:"#338ECC",fillOpacity:.25})),c||(c=d.createElement("ellipse",{cx:16.4576,cy:2.46128,rx:1.35593,ry:1.35593,fill:"#338ECC"})))}const h=d.forwardRef(p);n.p},51120:function(e,t,n){n.d(t,{J:function(){return Z}});var i=n(68248),r=n(27299),a=n(86133),o=n(27757),s=n(46709),l=n(73408);var c=({activeKey:e,onActiveKeyChange:t,children:n,disableCollapse:a=!1})=>{const{theme:c,getPrefixedClassName:d}=(0,o.u)(),u=d("collapse"),p=(0,s.useMemo)((()=>{const e=`.${u}-item`,t=`${e}-active`,n=`.${u}-header`,i=`.${u}-content`,r=`.${u}-content-box`,o=`.${u}-arrow`;return{[i]:{padding:"0px !important",backgroundColor:"transparent !important"},[r]:{padding:"0 0 12px 0px !important",backgroundColor:"transparent !important"},[`& > ${e} > ${n} > ${o}`]:{fontSize:c.general.iconSize,left:12,verticalAlign:"-7px",transform:"rotate(-90deg)",display:a?"none":void 0},[`& > ${t} > ${n} > ${o}`]:{transform:"rotate(0deg)"},[n]:{display:"flex",color:c.colors.textPrimary,fontWeight:600,alignItems:"center","&:focus-visible":{outlineColor:`${c.colors.primary} !important`,outlineStyle:"auto !important"}},[`& > ${e}`]:{borderBottom:`1px solid ${c.colors.border}`,borderRadius:0},[`& > ${e} > ${n}`]:{padding:0,lineHeight:"20px",height:55}}}),[c,u,a]);return(0,l.Y)(r.Accordion,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_metricchartsaccordion.tsx_82",...e?{activeKey:e}:{},...t?{onChange:t}:{},dangerouslyAppendEmotionCSS:(0,i.AH)(p,""),dangerouslySetAntdProps:{expandIconPosition:"left"},children:n})},d=n(66916),u=n(79081),p=n(1150),h=n(75155),m=n(72509),g=n(35062),f=n(48035),y=n(41110),v=n(62750),x=n(40724);const C=({onAddChart:e,supportedChartTypes:t})=>{const n=e=>!t||t.includes(e);return(0,l.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,l.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,l.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscompareaddchartmenu.tsx_19",css:_.addChartButton,icon:(0,l.Y)(r.PlusIcon,{}),"data-testid":"experiment-view-compare-runs-add-chart",children:(0,l.Y)(x.A,{id:"9vwPnB",defaultMessage:"Add chart"})})}),(0,l.FD)(r.DropdownMenu.Content,{align:"end",children:[n(a.zL.BAR)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_42",onClick:()=>e(a.zL.BAR),"data-testid":"experiment-view-compare-runs-chart-type-bar",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(p.h,{})}),(0,l.Y)(x.A,{id:"gdK07H",defaultMessage:"Bar chart"})]}),n(a.zL.LINE)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_56",onClick:()=>e(a.zL.LINE),"data-testid":"experiment-view-compare-runs-chart-type-line",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(m.h,{})}),(0,l.Y)(x.A,{id:"CyTYL6",defaultMessage:"Line chart"})]}),n(a.zL.PARALLEL)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_70",onClick:()=>e(a.zL.PARALLEL),"data-testid":"experiment-view-compare-runs-chart-type-parallel",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(g.h,{})}),(0,l.Y)(x.A,{id:"FC9mcS",defaultMessage:"Parallel coordinates"})]}),n(a.zL.SCATTER)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_84",onClick:()=>e(a.zL.SCATTER),"data-testid":"experiment-view-compare-runs-chart-type-scatter",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(f.h,{})}),(0,l.Y)(x.A,{id:"Q0i5xG",defaultMessage:"Scatter chart"})]}),n(a.zL.CONTOUR)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_98",onClick:()=>e(a.zL.CONTOUR),"data-testid":"experiment-view-compare-runs-chart-type-contour",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(h.h,{})}),(0,l.Y)(x.A,{id:"6XfILf",defaultMessage:"Contour chart"})]}),n(a.zL.DIFFERENCE)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_112",onClick:()=>e(a.zL.DIFFERENCE),"data-testid":"experiment-view-compare-runs-chart-type-difference",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(y.h,{})}),(0,l.Y)(x.A,{id:"G5mMJI",defaultMessage:"Difference view"})]}),n(a.zL.IMAGE)&&(0,l.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_126",onClick:()=>e(a.zL.IMAGE),"data-testid":"experiment-view-compare-runs-chart-type-image",children:[(0,l.Y)(r.DropdownMenu.IconWrapper,{css:_.iconWrapper,children:(0,l.Y)(v.h,{})}),(0,l.Y)(x.A,{id:"5m2VPy",defaultMessage:"Image grid"})]})]})]})},_={addChartButton:e=>({backgroundColor:`${e.colors.backgroundPrimary} !important`}),iconWrapper:e=>({width:e.general.iconSize+e.spacing.xs})};var M=n(99478),w=n(76221),b=n.n(w);var S={name:"5s5off",styles:"position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);cursor:grab"};const A=({index:e,section:t,sectionChartsLength:n,addNewChartCard:a,onDeleteSection:c,onAddSection:p,editSection:h,onSetEditSection:m,onSetSectionName:g,onSectionReorder:f,isExpanded:y,hideExtraControls:v,supportedChartTypes:_})=>{const{theme:w}=(0,o.u)(),[A,Y]=(0,s.useState)(t.name),[E,k]=(0,s.useState)(!1),D=(0,s.useRef)(null),I=(0,s.useRef)(null),[R,L]=(0,s.useState)(0),[K,T]=(0,s.useState)(!1),F=e=>{e.stopPropagation()},O=e=>{e.stopPropagation(),A.trim()?(m(-1),g(t.uuid,A)):e.preventDefault()};(0,s.useEffect)((()=>{if(!D.current)return;const e=new ResizeObserver((([e])=>{L(e.contentRect.width)}));return e.observe(D.current),()=>e.disconnect()}),[]);const B=h===e,[P,N]=(0,s.useState)(!1),{dragHandleRef:z,dragPreviewRef:U,dropTargetRef:H,isOver:G,isDragging:j}=(0,M.S)({dragGroupKey:"sections",dragKey:t.uuid,onDrop:f});return(0,l.Y)(l.FK,{children:(0,l.FD)("div",{role:"figure",css:(0,i.AH)({display:"flex",alignItems:"center",width:"100%",padding:`${w.spacing.xs}px 0px`,height:"55px",".section-element-visibility-on-hover":{visibility:P?"visible":"hidden",opacity:P?1:0},".section-element-visibility-on-hover-and-not-drag":{visibility:P?"visible":"hidden",opacity:P?E?0:1:0},".section-element-hidden-on-edit":{display:B?"none":"inherit"}},""),onMouseMove:()=>N(!0),onMouseLeave:()=>N(!1),ref:e=>{null===H||void 0===H||H(e),null===U||void 0===U||U(e)},"data-testid":"experiment-view-compare-runs-section-header",children:[G&&(0,l.Y)("div",{css:(0,i.AH)({position:"absolute",inset:0,backgroundColor:w.isDarkMode?w.colors.blue800:w.colors.blue100,border:`2px dashed ${w.colors.blue400}`,opacity:.75},"")}),(0,l.FD)("div",{style:{maxWidth:"40%",display:"flex",alignItems:"center"},children:[(0,l.Y)("div",{ref:D,style:{position:B?"absolute":"relative",visibility:B?"hidden":"visible",textOverflow:B?void 0:"ellipsis",maxWidth:"100%",overflow:"clip",paddingLeft:7,whiteSpace:"pre"},children:A}),h===e&&(0,l.Y)(d.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_220",autoFocus:!0,onClick:F,onMouseDown:F,onMouseUp:F,onDoubleClick:F,onChange:e=>{Y(e.target.value)},value:A,css:(0,i.AH)({color:w.colors.textPrimary,fontWeight:600,padding:"1px 6px 1px 6px",background:w.colors.backgroundSecondary,minWidth:"50px",width:R+14,position:"relative",lineHeight:w.typography.lineHeightBase,maxWidth:"100%"},""),onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),m(-1),Y(t.name))},onPressEnter:O,dangerouslyAppendEmotionCSS:{"&&":{minHeight:"20px !important"}},onBlur:e=>{e.relatedTarget!==I.current&&(m(-1),g(t.uuid,A))}}),(0,l.Y)("div",{css:(0,i.AH)({padding:w.spacing.xs,position:"relative"},""),style:{visibility:B?"hidden":"visible",display:B?"none":"inherit"},children:`(${n})`}),!v&&(0,l.Y)("div",{className:"section-element-visibility-on-hover-and-not-drag section-element-hidden-on-edit",children:(0,l.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_246",onClick:t=>{t.stopPropagation(),m(e)},"aria-label":"Icon label",icon:(0,l.Y)(r.PencilIcon,{})})})]}),h===e&&!v&&(0,l.Y)("div",{style:{padding:`0 ${w.spacing.xs}px`},children:(0,l.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_251",onClick:O,icon:(0,l.Y)(u.C,{}),ref:I})}),!v&&(0,l.Y)("div",{className:"section-element-visibility-on-hover section-element-hidden-on-edit",css:S,children:(0,l.Y)(r.DragIcon,{rotate:90,style:{color:w.colors.textSecondary},ref:z,onMouseDown:()=>k(!0),onMouseLeave:()=>{k(!1)},"data-testid":"experiment-view-compare-runs-section-header-drag-handle"})}),!v&&(0,l.FD)("div",{style:{position:"absolute",top:"50%",right:"0",transform:"translate(0, -50%)",display:"flex",alignItems:"center"},children:[(0,l.FD)("div",{onClick:F,onMouseDown:F,onMouseUp:F,onDoubleClick:F,className:"section-element-visibility-on-hover-and-not-drag section-element-hidden-on-edit",children:[(0,l.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,l.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,l.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_288",icon:(0,l.Y)(r.OverflowIcon,{})})}),(0,l.FD)(r.DropdownMenu.Content,{children:[(0,l.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_321",onClick:()=>{p(t.uuid,!0)},children:(0,l.Y)(x.A,{id:"CevPsF",defaultMessage:"Add section above"})}),(0,l.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_327",onClick:()=>{p(t.uuid,!1)},children:(0,l.Y)(x.A,{id:"aaKoNq",defaultMessage:"Add section below"})}),(0,l.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_333",onClick:()=>{T(!0)},children:(0,l.Y)(x.A,{id:"8XrJnT",defaultMessage:"Delete section"})})]})]}),(0,l.Y)(u.f,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_351",visible:K,onOk:()=>{c(t.uuid)},onCancel:()=>{T(!1)},title:"Delete section",children:(0,l.Y)(x.A,{id:"TPspzA",defaultMessage:"Deleting the section will permanently remove it and the charts it contains. This cannot be undone."})})]}),(0,l.Y)("div",{onClick:F,onMouseDown:F,onMouseUp:F,onDoubleClick:F,className:b()({"section-element-visibility-on-hover-and-not-drag":!y},"section-element-hidden-on-edit"),css:(0,i.AH)({alignSelf:"flex-end",marginLeft:w.spacing.xs},""),children:(0,l.Y)(C,{onAddChart:a(t.uuid),supportedChartTypes:_})})]})]})})};var Y=n(95379),E=n(53274),k=n(49633),D=n(19398),I=n(69059),R=n(25637);let L=null;const K=new WeakMap;function T(e,t){var n;return L||(L=new IntersectionObserver((e=>{for(const t of e){const e=K.get(t.target);null===e||void 0===e||e(t.isIntersecting)}}))),K.set(e,t),null===(n=L)||void 0===n||n.observe(e),()=>{var t;e&&(null===(t=L)||void 0===t||t.unobserve(e),K.delete(e))}}var F=n(27556),O=n(32158),B=n(29757),P=n(77684);const N=(0,s.memo)((e=>{var t,n;const{setElementRef:r,isInViewport:a}=(({enabled:e=!0}={})=>{const[t,n]=(0,s.useState)(null),[i,r]=(0,s.useState)(!e);return(0,s.useEffect)((()=>{if(t){if(window.IntersectionObserver&&e)return T(t,r);r(!0)}}),[e,t]),{isInViewport:i,setElementRef:n}})(),{uuid:c,translateBy:d,onResizeStart:u,onResize:p,onResizeStop:h,...m}=e,{theme:g}=(0,o.u)(),[f]=(0,F.d7)(a,150),y=f,[v,x]=(0,s.useState)(0),[C,_]=(0,s.useState)(0),[M,w]=(0,s.useState)(!1),[b,S]=(0,s.useState)({x:0,y:0}),{setDraggedCardUuid:A,onDropChartCard:Y}=(0,B.Mz)(),E=(0,s.useRef)(null),k=(0,s.useCallback)(((e,{x:t,y:n})=>{w(!0),A(null!==c&&void 0!==c?c:null),S({x:t,y:n})}),[A,c]),L=(0,s.useCallback)(((e,{x:t,y:n})=>{E.current&&(E.current.style.transform=`translate3d(${t-b.x}px, ${n-b.y}px, 0)`)}),[b]),K=(0,s.useCallback)((()=>{Y(),A(null),E.current&&(E.current.style.transform=""),w(!1)}),[Y,A,E]),N=(0,s.useCallback)((()=>{var e;const t=null===(e=E.current)||void 0===e?void 0:e.getBoundingClientRect();var n,i;t&&(x(null!==(n=null===t||void 0===t?void 0:t.width)&&void 0!==n?n:0),_(null!==(i=null===t||void 0===t?void 0:t.height)&&void 0!==i?i:0),null===u||void 0===u||u(t))}),[u,E]),U=(0,s.useCallback)(((e,{size:t})=>{x(t.width),_(t.height),p(t.width,t.height)}),[p]);return a?(0,l.Y)(I.DraggableCore,{enableUserSelectHack:!1,onStart:k,onDrag:L,onStop:K,handle:`.${O.rZ}`,children:(0,l.Y)(R.Resizable,{width:v,height:C,axis:"both",onResizeStart:N,onResizeStop:h,onResize:U,handle:(0,l.Y)(z,{}),children:(0,l.Y)("div",{ref:e=>{E.current=e,r(e)},style:M?{zIndex:P.K.CARD_DRAGGED,pointerEvents:"none"}:{transition:O.b7,transform:`translate3d(${null!==(t=null===d||void 0===d?void 0:d.x)&&void 0!==t?t:0}px,${null!==(n=null===d||void 0===d?void 0:d.y)&&void 0!==n?n:0}px,0)`,opacity:null!==d&&void 0!==d&&d.overflowing?0:1},children:(0,l.Y)(D.i,{...m,isInViewport:a,isInViewportDeferred:y})})})}):(0,l.Y)(O.Us,{style:{height:e.height},css:(0,i.AH)({backgroundColor:g.colors.backgroundPrimary,border:`1px solid ${g.colors.border}`,borderRadius:g.general.borderRadiusBase},""),ref:r})})),z=(0,s.forwardRef)(((e,t)=>{const{theme:n}=(0,o.u)();return(0,l.Y)("div",{ref:t,...e,"data-testid":"draggable-card-resize-handle",css:(0,i.AH)({position:"absolute",bottom:0,right:0,cursor:"se-resize",lineHeight:0,padding:n.spacing.xs,color:n.colors.actionDefaultIconDefault},""),children:(0,l.Y)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",children:(0,l.Y)("path",{d:"M6 6V0H8V8H0V6H6Z",fill:"currentColor"})})})}));var U={name:"b98nv4",styles:"position:absolute;inset:0"};const H=({x:e,y:t,width:n,height:r})=>{const{theme:a}=(0,o.u)();return(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{css:U}),(0,l.Y)("div",{css:(0,i.AH)({position:"absolute",backgroundColor:a.colors.actionDefaultBackgroundHover,borderStyle:"dashed",borderColor:a.colors.actionDefaultBorderDefault,pointerEvents:"none",borderRadius:a.general.borderRadiusBase,borderWidth:2,inset:0,zIndex:P.K.CARD_PREVIEW},""),style:{transform:`translate3d(${e}px, ${t}px, 0)`,width:n,height:r}})]})};const G=[300,330,360,400,500],j=Symbol("placeholder");var $={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},W={name:"1ezujoe",styles:"display:flex;justify-content:center;min-height:160px"};const X=(0,s.memo)((({cardsConfig:e,sectionConfig:t,chartRunData:n,sectionId:a,hideEmptyCharts:c,...d})=>{var u,p;const{theme:h}=(0,o.u)(),m=(0,k.Ub)(`(max-width: ${h.responsive.breakpoints.md}px)`)?1:null!==(u=t.columns)&&void 0!==u?u:3,g=null!==(p=t.cardHeight)&&void 0!==p?p:360,f=(0,s.useRef)(null),{draggedCardUuid:y,isDragging:v}=(0,B.GP)(),{setTargetSection:C,setTargetPosition:_,onSwapCards:M}=(0,B.Mz)(),w=(0,Y.g_)(),b=(0,s.useCallback)((e=>{w((t=>{var n,i;return(null===(n=t.compareRunSections)||void 0===n?void 0:n.find((e=>e.uuid===a)))?{...t,compareRunSections:null===(i=t.compareRunSections)||void 0===i?void 0:i.map((t=>t.uuid===a?{...t,columns:e}:t))}:t}))}),[a,w]),S=(0,s.useCallback)((e=>{w((t=>{var n,i;return(null===(n=t.compareRunSections)||void 0===n?void 0:n.find((e=>e.uuid===a)))?{...t,compareRunSections:null===(i=t.compareRunSections)||void 0===i?void 0:i.map((t=>t.uuid===a?{...t,cardHeight:e}:t))}:t}))}),[a,w]),A=(0,s.useRef)(0),[D,I]=(0,s.useState)(null),[R,L]=(0,s.useState)(null);A.current=e.length;const K=y?D:null,T=(0,s.useCallback)((t=>{var n,i;const r=h.spacing.sm,a=Math.ceil(e.length/m),o=Math.floor(t/m),s=t%m,l=m-1,c=s,d=o,u=null===(n=f.current)||void 0===n?void 0:n.getBoundingClientRect();return{overflowing:o>=a,row:o,col:s,x:s*(((null!==(i=null===u||void 0===u?void 0:u.width)&&void 0!==i?i:0)-l*r)/m)+c*r,y:o*g+d*r}}),[m,g,h,e.length]),F=(0,s.useMemo)((()=>e.filter((e=>!c||!(0,E.Cs)(n,e)))),[e,n,c]),P=(0,s.useMemo)((()=>{if(!y||null===K)return{};const e={},t=F.slice(),n=F.findIndex((e=>e.uuid===y)),i=K;-1!==n?(t.splice(n,1),t.splice(i,0,F[n])):t.splice(i,0,j);for(const r of F){const n=t.indexOf(r),i=F.indexOf(r),a=T(i),o=T(n);if(o.x===a.x&&o.y===a.y)continue;const s=o.x-a.x,l=o.y-a.y;r.uuid&&(e[r.uuid]={x:s,y:l,overflowing:o.overflowing})}return e}),[y,K,F,T]),z=(0,s.useMemo)((()=>{var e,t;if(null===K)return null;if(0===F.length)return{x:0,y:0,width:"100%",height:"100%"};const{x:n,y:i}=T(K),r=m-1,a=null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect();return{x:n,y:i,width:((null!==(t=null===a||void 0===a?void 0:a.width)&&void 0!==t?t:0)-r*h.spacing.sm)/m,height:g}}),[K,T,m,g,h,F.length]),U=(0,s.useCallback)((e=>{if(!v()||!f.current)return;const t=f.current.getBoundingClientRect(),n=Math.ceil(A.current/m);C(a);const i=Math.floor((e.clientY-t.top)/t.height*n)*m+Math.floor((e.clientX-t.left)/t.width*m);I(i),_(i)}),[m,v,a,C,_]),[X,V]=(0,s.useState)([]),Q=(0,s.useRef)(null),J=(0,s.useRef)(null),q=(0,s.useCallback)((e=>{var t;const n=null===(t=f.current)||void 0===t?void 0:t.getBoundingClientRect();n&&(L({x:e.left-n.left,y:e.top-n.top,width:e.width,height:e.height}),V(((e,t=8)=>[1,2,3,4,5].map((n=>({cols:n,width:(e-(n-1)*t)/n}))))(n.width)))}),[]),Z=(0,s.useCallback)((()=>{var e,t;b(null!==(e=Q.current)&&void 0!==e?e:m),S(null!==(t=J.current)&&void 0!==t?t:g),L(null)}),[g,m,S,b]),ee=(0,s.useCallback)(((e,t)=>{const n=X.reduce(((t,n)=>Math.abs(n.width-e)<Math.abs(t.width-e)?n:t)),i=G.reduce(((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e));Q.current=n.cols,J.current=i,L((e=>e?e.width!==n.width||e.height!==i?{...e,width:n.width,height:i}:e:null))}),[X]);return(0,l.FD)("div",{ref:f,css:["position:relative;",F.length>0&&{display:"grid",gap:h.spacing.sm},""],style:{gridTemplateColumns:"repeat("+m+", 1fr)",...y&&{[O.H8]:"transform 0.1s"}},"data-testid":"draggable-chart-cards-grid",onMouseMove:U,onMouseLeave:()=>{I(null)},children:[(y||R)&&(0,l.Y)(i.mL,{styles:$}),0===F.length&&(0,l.Y)("div",{css:W,children:(0,l.Y)(r.Empty,{title:(0,l.Y)(x.A,{id:"9TOU1G",defaultMessage:"No charts in this section"}),description:(0,l.Y)(x.A,{id:"9wWapn",defaultMessage:"Click 'Add chart' or drag and drop to add charts here."})})}),F.map(((e,t,i)=>{var r,a,o,s,u,p;return(0,l.Y)(N,{uuid:null!==(r=e.uuid)&&void 0!==r?r:"",translateBy:P[null!==(a=e.uuid)&&void 0!==a?a:""],onResizeStart:q,onResizeStop:Z,onResize:ee,cardConfig:e,chartRunData:n,onReorderWith:M,index:t,height:g,canMoveDown:Boolean(i[t+1]),canMoveUp:Boolean(i[t-1]),canMoveToTop:t>0,canMoveToBottom:t<i.length-1,previousChartUuid:null===(o=i[t-1])||void 0===o?void 0:o.uuid,nextChartUuid:null===(s=i[t+1])||void 0===s?void 0:s.uuid,hideEmptyCharts:c,firstChartUuid:null===(u=i[0])||void 0===u?void 0:u.uuid,lastChartUuid:null===(p=i[i.length-1])||void 0===p?void 0:p.uuid,...d},e.uuid)})),z&&(0,l.Y)(H,{...z}),R&&(0,l.Y)(H,{...R})]})})),V=({sectionId:e,sectionCharts:t,reorderCharts:n,insertCharts:i,isMetricHistoryLoading:r,chartData:a,startEditChart:o,removeChart:s,groupBy:c,sectionIndex:d,setFullScreenChart:u,autoRefreshEnabled:p,hideEmptyCharts:h,globalLineChartConfig:m,sectionConfig:g})=>(0,l.Y)(X,{sectionConfig:g,cardsConfig:t,chartRunData:a,onStartEditChart:o,onRemoveChart:s,setFullScreenChart:u,sectionId:e,groupBy:c,autoRefreshEnabled:p,hideEmptyCharts:h,globalLineChartConfig:m});var Q=n(43233),J=n(76118);const q=e=>{if(e.type===a.zL.BAR){const t=e;return t.dataAccessKey?[t.metricKey,t.dataAccessKey]:[t.metricKey]}if(e.type===a.zL.LINE){const t=e;return(0,J.isArray)(t.selectedMetricKeys)?t.selectedMetricKeys:[t.metricKey]}if(e.type===a.zL.SCATTER){const t=e;return[t.xaxis.key.toLowerCase(),t.yaxis.key.toLowerCase()]}if(e.type===a.zL.PARALLEL){const t=e;return[...t.selectedMetrics,...t.selectedParams]}{const t=e;return[t.xaxis.key,t.yaxis.key,t.zaxis.key]}},Z=({compareRunSections:e,compareRunCharts:t,reorderCharts:n,insertCharts:d,chartData:p,isMetricHistoryLoading:h=!1,autoRefreshEnabled:m=!1,startEditChart:g,removeChart:f,addNewChartCard:y,search:v,groupBy:C,supportedChartTypes:_,hideEmptyCharts:M,setFullScreenChart:w=()=>{},globalLineChartConfig:b,noRunsSelectedEmptyState:S})=>{const E=(0,Y.g_)(),[k,D]=(0,s.useState)(-1),{theme:I}=(0,o.u)(),R=(0,s.useMemo)((()=>(e||[]).flatMap((e=>e.display?[e.uuid]:[]))),[e]),L=(0,s.useCallback)((e=>{E((t=>{const n=(t.compareRunSections||[]).map((t=>{const n=t.uuid,i="string"===typeof e&&n===e||Array.isArray(e)&&e.includes(n);return{...t,display:i}}));return{...t,compareRunSections:n}}))}),[E]),K=(0,s.useCallback)((e=>{E((t=>{const n=(t.compareRunCharts||[]).filter((t=>t.isGenerated||t.metricSectionId!==e)).map((t=>t.isGenerated&&t.metricSectionId===e?{...t,deleted:!0}:t)),i=(t.compareRunSections||[]).slice().filter((t=>t.uuid!==e));return{...t,compareRunCharts:n,compareRunSections:i,isAccordionReordered:!0}}))}),[E]),T=(0,s.useCallback)(((e,t)=>{let n=-1;return E((i=>{const r=[...i.compareRunSections||[]];n=r.findIndex((t=>t.uuid===e));const a={name:"",uuid:(0,Q.yk)(),display:!1,isReordered:!1};return n<0?r.push(a):(t||(n+=1),r.splice(n,0,a)),{...i,compareRunSections:r,isAccordionReordered:!0}})),n}),[E]),F=(0,s.useCallback)((()=>{E((e=>{const t=[...e.compareRunSections||[],{name:"",uuid:(0,Q.yk)(),display:!1,isReordered:!1}];return{...e,compareRunSections:t,isAccordionReordered:!0}})),D((null===e||void 0===e?void 0:e.length)||-1)}),[E,null===e||void 0===e?void 0:e.length]),O=(0,s.useCallback)(((e,t)=>{E((n=>{const i=(n.compareRunSections||[]).map((n=>n.uuid===e?{...n,name:t}:n));return{...n,compareRunSections:i,isAccordionReordered:!0}}))}),[E]),B=(0,s.useCallback)(((e,t)=>{E((n=>{const i=(n.compareRunSections||[]).slice(),r=i.findIndex((t=>t.uuid===e)),a=i.findIndex((e=>e.uuid===t)),o=i.splice(r,1)[0];return i.splice(a,0,o),{...n,compareRunSections:i,isAccordionReordered:!0}}))}),[E]),P=(0,s.useMemo)((()=>0===p.filter((({hidden:e})=>!e)).length),[p]),{sectionsToRender:N,chartsToRender:z}=(0,s.useMemo)((()=>{if(""===v)return{sectionsToRender:e,chartsToRender:t};const n=(t||[]).filter((e=>!e.deleted&&((e,t)=>{if(t.type===a.zL.IMAGE||t.type===a.zL.DIFFERENCE)return!0;try{const n=new RegExp(e,"i");return q(t).some((e=>e.match(n)))}catch{return!0}})(v,e))),i=new Set;n.forEach((e=>{e.metricSectionId&&i.add(e.metricSectionId)}));return{sectionsToRender:(e||[]).filter((e=>i.has(e.uuid))),chartsToRender:n}}),[v,t,e]),U=""!==v;return e&&t?P?null!==S&&void 0!==S?S:(0,l.Y)("div",{css:(0,i.AH)({marginTop:I.spacing.lg},""),children:(0,l.Y)(r.Empty,{description:(0,l.Y)(x.A,{id:"jXfgov",defaultMessage:"All runs are hidden. Select at least one run to view charts."})})}):U&&0===(null===z||void 0===z?void 0:z.length)?(0,l.FD)(l.FK,{children:[(0,l.Y)(u.S,{size:"lg"}),(0,l.Y)(r.Empty,{title:(0,l.Y)(x.A,{id:"D+UN8o",defaultMessage:"No metric charts"}),description:(0,l.Y)(x.A,{id:"gZSJbg",defaultMessage:"All charts are filtered. Clear the search filter to see hidden metric charts."})})]}):(0,l.FD)("div",{children:[(0,l.Y)(c,{activeKey:R,onActiveKeyChange:L,children:(N||[]).map(((e,t)=>{const i=(z||[]).filter((t=>{const n=t.metricSectionId;return!t.deleted&&n===e.uuid}));return(0,l.Y)(r.Accordion.Panel,{header:(0,l.Y)(A,{index:t,section:e,onDeleteSection:K,onAddSection:T,editSection:k,onSetEditSection:D,onSetSectionName:O,sectionChartsLength:i.length,addNewChartCard:y,onSectionReorder:B,isExpanded:R.includes(e.uuid),supportedChartTypes:_,hideExtraControls:U}),"aria-hidden":!R.includes(e.uuid),children:(0,l.Y)(V,{sectionId:e.uuid,sectionConfig:e,sectionCharts:i,reorderCharts:n,insertCharts:d,isMetricHistoryLoading:h,chartData:p,startEditChart:g,removeChart:f,groupBy:C,sectionIndex:t,setFullScreenChart:w,autoRefreshEnabled:m,hideEmptyCharts:M,globalLineChartConfig:b})},e.uuid)}))}),!U&&(0,l.Y)("div",{children:(0,l.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionaccordion.tsx_405",block:!0,onClick:F,icon:(0,l.Y)(r.PlusIcon,{}),style:{border:"none",marginTop:"6px"},children:(0,l.Y)(x.A,{id:"YlavFP",defaultMessage:"Add section"})})})]}):null}},55600:function(e,t,n){n.d(t,{z:function(){return Ae}});var i=n(68248),r=n(27757),a=n(79081),o=n(27299),s=n(46709),l=n(7655),c=n(40724),d=n(86133),u=n(1150),p=n(75155),h=n(72509),m=n(35062),g=n(48035),f=n(41110),y=n(62750),v=n(90142),x=n(73408);const C=({title:e,compact:t=!1,children:n})=>{const{theme:a}=(0,r.u)();return(0,x.FD)("div",{css:(0,i.AH)({marginBottom:t?a.spacing.sm:2*a.spacing.md},""),"data-testid":"experiment-view-compare-runs-config-field",children:[(0,x.Y)(r.T.Title,{level:4,children:e}),n]})},_=({value:e,onChange:t,metricKeyList:n,paramKeyList:i})=>{const{formatMessage:r}=(0,l.A)(),a=!(null!==i&&void 0!==i&&i.length)&&!(null!==n&&void 0!==n&&n.length);return(0,x.FD)(o.LegacySelect,{css:b.selectFull,value:a?r({id:"3VURvw",defaultMessage:"No metrics or parameters available"}):e,disabled:a,onChange:t,dangerouslySetAntdProps:{showSearch:!0},children:[null!==n&&void 0!==n&&n.length?(0,x.Y)(o.LegacySelect.OptGroup,{label:r({id:"jH0+gA",defaultMessage:"Metrics"}),children:n.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:(0,v.GF)("METRIC",e),children:e},(0,v.GF)("METRIC",e))))}):null,null!==i&&void 0!==i&&i.length?(0,x.Y)(o.LegacySelect.OptGroup,{label:r({id:"kWUhea",defaultMessage:"Params"}),children:i.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:(0,v.GF)("PARAM",e),children:e},(0,v.GF)("PARAM",e))))}):null]})},M=({value:e,id:t,onChange:n,metricOptions:i=[],paramOptions:r=[]})=>{const{formatMessage:a}=(0,l.A)(),s=!r.length&&!i.length;return(0,x.FD)(o.SimpleSelect,{componentId:"mlflow.charts.chart_configure.metric_with_dataset_select",id:t,css:b.selectFull,value:s?a({id:"3VURvw",defaultMessage:"No metrics or parameters available"}):e,disabled:s,onChange:({target:e})=>{n(e.value)},contentProps:{matchTriggerWidth:!0,maxHeight:500},children:[null!==i&&void 0!==i&&i.length?(0,x.Y)(o.SimpleSelectOptionGroup,{label:a({id:"jH0+gA",defaultMessage:"Metrics"}),children:i.map((({datasetName:e,key:t,metricKey:n})=>(0,x.FD)(o.SimpleSelectOption,{value:t,children:[e&&(0,x.Y)(o.Tag,{componentId:"mlflow.charts.chart_configure.metric_with_dataset_select.tag",children:e})," ",n]},t)))}):null,null!==r&&void 0!==r&&r.length?(0,x.Y)(o.SimpleSelectOptionGroup,{label:a({id:"kWUhea",defaultMessage:"Params"}),children:r.map((({key:e,paramKey:t})=>(0,x.Y)(o.SimpleSelectOption,{value:e,children:t},e)))}):null]})},w=[{value:5,label:(0,x.Y)(c.A,{id:"Mc6Dhy",defaultMessage:"5"})},{value:10,label:(0,x.Y)(c.A,{id:"2K8tsp",defaultMessage:"10"})},{value:20,label:(0,x.Y)(c.A,{id:"zwO8+l",defaultMessage:"20"})}],b={selectFull:{width:"100%"}};var S=n(76118);var A={name:"1d3w5wq",styles:"width:100%"};const Y=({metricKeysByDataset:e,value:t,onChange:n})=>(0,x.Y)(o.SimpleSelect,{css:A,componentId:"mlflow.charts.chart_configure.metric_with_dataset_select",id:"mlflow.charts.chart_configure.metric_with_dataset_select",value:t,onChange:({target:t})=>{const i=null===e||void 0===e?void 0:e.find((({dataAccessKey:e})=>e===t.value));i&&n(i)},contentProps:{matchTriggerWidth:!0,maxHeight:400},children:null===e||void 0===e?void 0:e.map((({datasetName:e,metricKey:t,dataAccessKey:n})=>(0,x.FD)(o.SimpleSelectOption,{value:n,children:[e&&(0,x.Y)(o.Tag,{componentId:"mlflow.charts.chart_configure.metric_with_dataset_select.tag",children:e})," ",t]},n)))}),E=({state:e,onStateChange:t,metricKeyList:n,metricKeysByDataset:i})=>{var r;const a=(0,s.useCallback)(((e,n,i)=>{t((t=>({...t,metricKey:e,datasetName:n,dataAccessKey:i})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);(0,s.useEffect)((()=>{e.metricKey||null===i||void 0===i||!i[0]?!e.metricKey&&null!==n&&void 0!==n&&n[0]&&a(n[0]):a(i[0].metricKey,i[0].datasetName,i[0].dataAccessKey)}),[e.metricKey,a,n,i]);const l=0===n.length;return(0,x.Y)(x.FK,{children:(0,x.Y)(C,{title:"Metric",children:(0,S.isEmpty)(i)?(0,x.Y)(o.LegacySelect,{css:k.selectFull,value:l?"No metrics available":e.metricKey,onChange:e=>a(e),disabled:l,dangerouslySetAntdProps:{showSearch:!0},children:n.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))}):(0,x.Y)(Y,{metricKeysByDataset:i,onChange:({metricKey:e,datasetName:t,dataAccessKey:n})=>a(e,t,n),value:null!==(r=e.dataAccessKey)&&void 0!==r?r:e.metricKey})})})},k={selectFull:{width:"100%"}},D=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:i})=>{const r=(0,s.useCallback)((e=>{t((t=>({...t,selectedParams:e})))}),[t]),a=(0,s.useCallback)((e=>{t((t=>({...t,selectedMetrics:e})))}),[t]),l=0===n.length,c=0===i.length;return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:"Params",children:(0,x.Y)(o.LegacySelect,{mode:c?void 0:"multiple",onChange:r,style:{width:275},value:c?"No parameters available":e.selectedParams,disabled:c,children:i.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:e,children:e},e)))})}),(0,x.Y)(C,{title:"Metrics",children:(0,x.Y)(o.LegacySelect,{mode:l?void 0:"multiple",onChange:a,style:{width:275},value:l?"No metrics available":e.selectedMetrics,disabled:l,children:n.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:e,children:e},e)))})})]})};var I=n(66916),R=n(31655),L=n(53274),K=n(27476),T=n(12479);var F={name:"1d3w5wq",styles:"width:100%"};const O=({metricKeyList:e,selectedMetricKeys:t,updateSelectedMetrics:n})=>{const i=0===e.length;return(0,x.Y)(o.LegacySelect,{mode:"multiple",placeholder:i?(0,x.Y)(c.A,{id:"M5bYHa",defaultMessage:"No metrics available"}):(0,x.Y)(c.A,{id:"eQqRYQ",defaultMessage:"Select metrics"}),css:F,value:i?[]:t,onChange:n,disabled:i,dangerouslySetAntdProps:{showSearch:!0},children:e.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})},B=({chartExpression:e,index:t,updateYAxisExpression:n,removeYAxisExpression:a,metricKeyList:o})=>{const{theme:l}=(0,r.u)(),{compileExpression:c}=(0,T.l)(),[d,u]=(0,s.useState)(!0);return(0,x.FD)("span",{css:(0,i.AH)({display:"flex",width:"100%",gap:l.spacing.sm},""),children:[(0,x.Y)(I.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsyaxismetricandexpressionselector.tsx_122",value:e.expression,onChange:e=>(e=>{const i=c(e,o);void 0===i?(u(!1),n({rpn:[],variables:[],expression:e},t)):(u(!0),n(i,t))})(e.target.value),validationState:d?void 0:"error"}),(0,x.Y)(r.B,{componentId:"mlflow.charts.line-chart-expressions-remove",icon:(0,x.Y)(r.C,{}),onClick:()=>a(t)})]})},P=({state:e,onStateChange:t,metricKeyList:n,updateSelectedMetrics:a})=>{const{theme:l}=(0,r.u)(),u=(0,R.Iq)()&&e.xAxisKey!==L.fj.METRIC,[p,h]=(0,s.useState)(e.yAxisExpressions||[]),m=(e,t)=>{h((n=>{const i=[...n];return i[t]=e,i}))},g=e=>{h((t=>{const n=[...t];return n.splice(e,1),n}))};(0,s.useEffect)((()=>{const e=setTimeout((()=>{var e;e=p,t((t=>({...t,yAxisExpressions:e})))}),300);return()=>{clearTimeout(e)}}),[p,t]);const f=(0,s.useCallback)((e=>{t((t=>{const n=t;return{...n,yAxisKey:e,range:{...n.range,yMin:void 0,yMax:void 0}}}))}),[t]);return(0,x.FD)(x.FK,{children:[u&&(0,x.Y)(C,{title:"Metric type",compact:!0,children:(0,x.FD)(o.Radio.Group,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsyaxismetricandexpressionselector.tsx_221",name:"runs-charts-field-group-metric-type-y-axis",value:e.yAxisKey||d.Kb.METRIC,onChange:({target:{value:e}})=>f(e),children:[(0,x.Y)(o.Radio,{value:d.Kb.METRIC,children:(0,x.Y)(c.A,{id:"hW7XxH",defaultMessage:"Logged metrics"})},d.Kb.METRIC),(0,x.Y)(o.Radio,{value:d.Kb.EXPRESSION,children:(0,x.Y)(c.A,{id:"tkAOSa",defaultMessage:"Custom expression"})},d.Kb.EXPRESSION)]})}),u&&e.yAxisKey===d.Kb.EXPRESSION?(0,x.Y)(C,{title:"Expression",compact:!0,children:(0,x.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:l.spacing.sm},""),children:[p.map(((e,t)=>(0,x.Y)(B,{chartExpression:e,index:t,updateYAxisExpression:m,removeYAxisExpression:g,metricKeyList:n},t))),(0,x.Y)(r.B,{componentId:"mlflow.charts.line-chart-expressions-add-new",icon:(0,x.Y)(o.PlusIcon,{}),onClick:()=>{h((e=>[...e,{rpn:[],variables:[],expression:""}]))},children:"Add new"})]})}):(0,x.Y)(C,{title:"Metric",compact:!0,children:O({metricKeyList:n,selectedMetricKeys:e.selectedMetricKeys,updateSelectedMetrics:a})})]})};const N="_GLOBAL",z=({theme:e,metricKeyList:t,selectedXAxisMetricKey:n,updateSelectedXAxisMetricKey:r,disabled:a=!1})=>{const s=0===t.length;return(0,x.FD)(o.Radio,{value:L.fj.METRIC,disabled:a,children:[(0,x.Y)(c.A,{id:"M/c4l0",defaultMessage:"Metric"}),(0,x.Y)(o.LegacySelect,{css:(0,i.AH)({marginTop:e.spacing.xs,width:"100%"},""),value:n||void 0,placeholder:s?(0,x.Y)(c.A,{id:"ER3oVW",defaultMessage:"No metrics available"}):(0,x.Y)(c.A,{id:"BOz0T2",defaultMessage:"Select metric"}),onClick:e=>{e.preventDefault(),e.stopPropagation()},onChange:r,disabled:s||a,dangerouslySetAntdProps:{showSearch:!0},children:t.map((e=>(0,x.Y)(o.LegacySelect.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})]})},U=e=>(0,S.isUndefined)(e)?e:e<=0?void 0:Math.log10(e),H=e=>(0,S.isUndefined)(e)?e:Math.pow(10,e);var G={name:"4c6dm7",styles:"display:flex;flex-direction:row;justify-content:space-between"};const j=({state:e,onStateChange:t,metricKeyList:n})=>{var u,p,h,m,g,f,y,v;const _=(0,R.Iq)(),{theme:M}=(0,r.u)(),w=(0,l.A)(),[b,A]=(0,s.useState)({xMin:"log"===e.xAxisScaleType?H(null===(u=e.range)||void 0===u?void 0:u.xMin):null===(p=e.range)||void 0===p?void 0:p.xMin,xMax:"log"===e.xAxisScaleType?H(null===(h=e.range)||void 0===h?void 0:h.xMax):null===(m=e.range)||void 0===m?void 0:m.xMax,yMin:"log"===e.scaleType?H(null===(g=e.range)||void 0===g?void 0:g.yMin):null===(f=e.range)||void 0===f?void 0:f.yMin,yMax:"log"===e.scaleType?H(null===(y=e.range)||void 0===y?void 0:y.yMax):null===(v=e.range)||void 0===v?void 0:v.yMax}),Y=(0,s.useCallback)((e=>{t((t=>({...t,metricKey:e})))}),[t]),E=(0,s.useCallback)((e=>{t((t=>({...t,metricKey:e[0],selectedMetricKeys:e})))}),[t]),k=(0,s.useCallback)(((e,n=!1)=>{t((t=>{const i=t;return{...i,xAxisKey:e,selectedXAxisMetricKey:"",range:{...i.range,xMin:void 0,xMax:void 0},useGlobalXaxisKey:null!==n&&void 0!==n?n:i.useGlobalXaxisKey,selectedYAxisMetricKey:d.Kb.METRIC}}))}),[t]),D=e=>!(0,S.isUndefined)(e)&&e<=0,T=(0,s.useCallback)((e=>{t((t=>{const n=t;let i=e?U(b.xMin):b.xMin,r=e?U(b.xMax):b.xMax;return e&&D(b.xMin)&&b.xMax&&b.xMax>1?(A((e=>({...e,xMin:1}))),i=0):e&&(D(b.xMin)||D(b.xMax))&&(A((e=>({...e,xMin:void 0,xMax:void 0}))),i=void 0,r=void 0),{...n,xAxisScaleType:e?"log":"linear",range:{...n.range,xMin:i,xMax:r}}}))}),[t,b.xMin,b.xMax]),F=(0,s.useCallback)((e=>{t((t=>({...t,selectedXAxisMetricKey:e,xAxisKey:L.fj.METRIC})))}),[t]),O=(0,s.useCallback)((e=>{t((t=>{const n=t;let i=e?U(b.yMin):b.yMin,r=e?U(b.yMax):b.yMax;return e&&D(b.yMin)&&b.yMax&&b.yMax>1?(A((e=>({...e,yMin:1}))),i=0):e&&(D(b.yMin)||D(b.yMax))&&(A((e=>({...e,yMin:void 0,yMax:void 0}))),i=void 0,r=void 0),{...n,scaleType:e?"log":"linear",range:{...n.range,yMin:i,yMax:r}}}))}),[t,b.yMin,b.yMax]),B=(0,s.useCallback)((e=>{t((t=>({...t,ignoreOutliers:e})))}),[t]),j=(0,s.useCallback)((e=>{t((t=>({...t,lineSmoothness:e})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);(0,s.useEffect)((()=>{!e.metricKey&&null!==n&&void 0!==n&&n[0]&&Y(n[0])}),[e.metricKey,Y,n]),(0,s.useEffect)((()=>{(0,S.isUndefined)(e.selectedMetricKeys)&&!(0,S.isUndefined)(e.metricKey)&&""!==e.metricKey&&E([e.metricKey])}),[e.selectedMetricKeys,e.metricKey,E]);const W=(e,n)=>{V(e,n)||t((t=>{const i=t;return{...i,range:{...i.range,xMin:"log"===i.xAxisScaleType?U(e):e,xMax:"log"===i.xAxisScaleType?U(n):n}}}))},X=(e,n)=>{V(e,n)||t((t=>{const i=t;return{...i,range:{...i.range,yMin:"log"===i.scaleType?U(e):e,yMax:"log"===i.scaleType?U(n):n}}}))},V=(e,t)=>(!(0,S.isUndefined)(e)||!(0,S.isUndefined)(t))&&!(!(0,S.isUndefined)(e)&&!(0,S.isUndefined)(t)),Q=(e,t)=>"log"===e&&D(t)?(0,x.Y)(o.FormUI.Message,{message:(0,x.Y)(c.A,{id:"o21MFS",defaultMessage:"Invalid log value"}),type:"warning"}):null,J="metric-";return(0,x.FD)(x.FK,{children:[(0,x.Y)(r.T.Title,{level:4,color:"secondary",children:"X-axis"}),(0,x.Y)(C,{title:"Type",compact:!0,children:_?(0,x.FD)(o.SimpleSelect,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_436",id:"x-axis-type",width:"100%",value:e.useGlobalXaxisKey?N:e.xAxisKey,contentProps:{matchTriggerWidth:!0,textOverflowMode:"ellipsis"},onChange:({target:{value:e}})=>{e.startsWith(J)?F(e.slice(7)):e===L.fj.STEP?k(L.fj.STEP):e===L.fj.TIME?k(L.fj.TIME):e===L.fj.TIME_RELATIVE?k(L.fj.TIME_RELATIVE):e===N&&k(L.fj.STEP,!0)},children:[(0,x.Y)(o.SimpleSelectOption,{value:N,children:(0,x.Y)(c.A,{id:"srbhok",defaultMessage:"Use workspace settings"})}),(0,x.Y)(o.SimpleSelectOption,{value:L.fj.STEP,children:(0,x.Y)(c.A,{id:"IfcpiM",defaultMessage:"Step"})}),(0,x.FD)(o.SimpleSelectOption,{value:L.fj.TIME,children:[(0,x.Y)(c.A,{id:"2Hf+yU",defaultMessage:"Time (wall)"}),(0,x.Y)(a.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_474",content:(0,x.Y)(c.A,{id:"nlXn2G",defaultMessage:"Absolute date and time"}),side:"right",children:(0,x.FD)("span",{children:[" ",(0,x.Y)(o.QuestionMarkIcon,{css:$.timeStepQuestionMarkIcon})]})})]}),(0,x.FD)(o.SimpleSelectOption,{value:L.fj.TIME_RELATIVE,children:[(0,x.Y)(c.A,{id:"Y47tVZ",defaultMessage:"Time (relative)"}),(0,x.Y)(a.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_494",content:(0,x.Y)(c.A,{id:"NwNrl4",defaultMessage:"Amount of time that has passed since the first metric value was logged"}),side:"right",children:(0,x.FD)("span",{children:[" ",(0,x.Y)(o.QuestionMarkIcon,{css:$.timeStepQuestionMarkIcon})]})})]}),n.length>0&&(0,x.Y)(o.SimpleSelectOptionGroup,{label:"Metrics",children:n.map((e=>(0,x.Y)(o.SimpleSelectOption,{value:`${J}${e}`,"data-testid":`${J}${e}`,children:e},e)))})]}):(0,x.FD)(o.Radio.Group,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_524",name:"runs-charts-field-group-x-axis",value:e.useGlobalXaxisKey?N:e.xAxisKey,onChange:({target:{value:e}})=>{e===N?k(L.fj.STEP,!0):k(e)},children:[(0,x.Y)(o.Radio,{value:N,children:(0,x.Y)(c.A,{id:"srbhok",defaultMessage:"Use workspace settings"})}),(0,x.Y)(o.Radio,{value:L.fj.STEP,children:(0,x.Y)(c.A,{id:"IfcpiM",defaultMessage:"Step"})}),(0,x.FD)(o.Radio,{value:L.fj.TIME,children:[(0,x.Y)(c.A,{id:"2Hf+yU",defaultMessage:"Time (wall)"}),(0,x.Y)(a.T,{componentId:"mlflow.charts.line_chart_configure.x_axis_type.wall_time.tooltip",content:(0,x.Y)(c.A,{id:"nlXn2G",defaultMessage:"Absolute date and time"}),side:"right",children:(0,x.Y)(o.QuestionMarkIcon,{css:$.timeStepQuestionMarkIcon})})]}),(0,x.FD)(o.Radio,{value:L.fj.TIME_RELATIVE,children:[(0,x.Y)(c.A,{id:"Y47tVZ",defaultMessage:"Time (relative)"}),(0,x.Y)(a.T,{componentId:"mlflow.charts.line_chart_configure.x_axis_type.relative_time.tooltip",content:(0,x.Y)(c.A,{id:"NwNrl4",defaultMessage:"Amount of time that has passed since the first metric value was logged"}),side:"right",children:(0,x.Y)(o.QuestionMarkIcon,{css:$.timeStepQuestionMarkIcon})})]}),z({theme:M,metricKeyList:n,selectedXAxisMetricKey:e.selectedXAxisMetricKey,updateSelectedXAxisMetricKey:F})]})}),e.xAxisKey===L.fj.STEP&&(0,x.Y)(x.FK,{children:(0,x.FD)(C,{title:"X-axis scale",compact:!0,children:[(0,x.FD)("div",{css:(0,i.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,x.FD)("div",{children:[(0,x.Y)(I.I,{componentId:"mlflow.charts.line_chart_configure.x_axis_min","aria-label":"x-axis-min",name:"min",type:"number",value:b.xMin,onChange:e=>(e=>{const t=e?Number(e):void 0;A((e=>({...e,xMin:t}))),W(t,b.xMax)})(e.target.value),max:b.xMax,placeholder:"Min"}),Q(e.xAxisScaleType,b.xMin)]}),(0,x.FD)("div",{children:[(0,x.Y)(I.I,{componentId:"mlflow.charts.line_chart_configure.x_axis_max","aria-label":"x-axis-max",name:"max",type:"number",value:b.xMax,onChange:e=>(e=>{const t=e?Number(e):void 0;A((e=>({...e,xMax:t}))),W(b.xMin,t)})(e.target.value),min:b.xMin,placeholder:"Max"}),Q(e.xAxisScaleType,b.xMax)]})]}),(0,x.Y)("div",{style:{padding:M.spacing.xs}}),(0,x.Y)(o.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_628","aria-label":"x-axis-log",checked:"log"===e.xAxisScaleType,onChange:T,label:"Log scale",activeLabel:"On",inactiveLabel:"Off",disabledLabel:"Disabled"})]})}),(0,x.Y)(r.T.Title,{level:4,color:"secondary",css:(0,i.AH)({paddingTop:M.spacing.lg},""),children:"Y-axis"}),(0,x.Y)(P,{state:e,onStateChange:t,metricKeyList:n,updateSelectedMetrics:E}),(0,x.FD)(C,{title:"Y-axis scale",compact:!0,children:[(0,x.FD)("div",{css:(0,i.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,x.FD)("div",{children:[(0,x.Y)(I.I,{componentId:"mlflow.charts.line_chart_configure.y_axis_min","aria-label":"y-axis-min",name:"min",type:"number",value:b.yMin,onChange:e=>(e=>{const t=e?Number(e):void 0;A((e=>({...e,yMin:t}))),X(t,b.yMax)})(e.target.value),max:b.yMax,placeholder:"Min"}),Q(e.scaleType,b.yMin)]}),(0,x.FD)("div",{children:[(0,x.Y)(I.I,{componentId:"mlflow.charts.line_chart_configure.y_axis_max","aria-label":"y-axis-max",name:"max",type:"number",value:b.yMax,onChange:e=>(e=>{const t=e?Number(e):void 0;A((e=>({...e,yMax:t}))),X(b.yMin,t)})(e.target.value),min:b.yMin,placeholder:"Max"}),Q(e.scaleType,b.yMax)]})]}),(0,x.Y)(a.S,{size:"xs"}),(0,x.Y)(o.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_682","aria-label":"y-axis-log",checked:"log"===e.scaleType,onChange:O,label:"Log scale",activeLabel:"On",inactiveLabel:"Off",disabledLabel:"Disabled"}),(0,x.Y)(a.S,{size:"xs"}),(0,x.FD)("div",{css:G,children:[(0,x.FD)("div",{children:[(0,x.Y)(r.T.Text,{bold:!0,children:(0,x.Y)(c.A,{id:"7FvLl2",defaultMessage:"Ignore outliers"})}),(0,x.Y)(a.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_703",delayDuration:0,content:(0,x.Y)(c.A,{id:"mN6m2e",defaultMessage:"Only display data points between the p5 and p95 of the data. This can help with chart readability in cases where outliers significantly affect the Y-axis range"}),side:"right",children:(0,x.FD)("span",{children:[" ",(0,x.Y)(o.QuestionMarkIcon,{css:$.timeStepQuestionMarkIcon})]})})]}),(0,x.Y)(o.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_716","aria-label":"y-axis-ignore-outliers",checked:e.ignoreOutliers,onChange:B,label:" ",activeLabel:w.formatMessage({id:"bXA79t",defaultMessage:"On"}),inactiveLabel:w.formatMessage({id:"73ydH0",defaultMessage:"Off"}),disabledLabel:w.formatMessage({id:"Ka1jM2",defaultMessage:"Disabled"})})]})]}),(0,x.Y)(r.T.Title,{level:4,color:"secondary",css:(0,i.AH)({paddingTop:M.spacing.lg},""),children:"Advanced"}),(0,x.Y)(C,{title:w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),compact:!0,children:(0,x.FD)(o.SegmentedControlGroup,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_747",name:w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),value:e.displayPoints,onChange:({target:e})=>{t((t=>({...t,displayPoints:e.value})))},children:[(0,x.FD)(o.SegmentedControlButton,{value:void 0,"aria-label":[w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),w.formatMessage({id:"7nPjTL",defaultMessage:"Auto"})].join(": "),children:[(0,x.Y)(c.A,{id:"7nPjTL",defaultMessage:"Auto"})," ",(0,x.Y)(a.T,{componentId:"mlflow.charts.line_chart_configure.display_points.auto.tooltip",content:(0,x.Y)(c.A,{id:"ax3YJx",defaultMessage:"Show points on line charts if there are fewer than 60 data points per trace"}),children:(0,x.Y)(a.I,{})})]}),(0,x.Y)(o.SegmentedControlButton,{value:!0,"aria-label":[w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),w.formatMessage({id:"QUMV9L",defaultMessage:"On"})].join(": "),children:(0,x.Y)(c.A,{id:"QUMV9L",defaultMessage:"On"})}),(0,x.Y)(o.SegmentedControlButton,{value:!1,"aria-label":[w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),w.formatMessage({id:"NtaCJN",defaultMessage:"Off"})].join(": "),children:(0,x.Y)(c.A,{id:"NtaCJN",defaultMessage:"Off"})})]})}),(0,x.FD)(C,{title:(0,x.Y)(x.FK,{children:(0,x.Y)(c.A,{id:"qkRBUr",defaultMessage:"Line smoothing"})}),compact:!0,children:[(0,x.FD)(o.Radio.Group,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_838",name:"use-global-line-smoothness",value:Boolean(e.useGlobalLineSmoothing),onChange:({target:e})=>{t((t=>({...t,useGlobalLineSmoothing:!0===e.value})))},children:[(0,x.Y)(o.Radio,{value:!0,children:"Use workspace settings"}),(0,x.Y)(o.Radio,{value:!1,children:"Custom"})]}),(0,x.Y)(K.o,{"data-testid":"smoothness-toggle",min:0,max:100,onChange:j,value:e.lineSmoothness?e.lineSmoothness:0,disabled:e.useGlobalLineSmoothing})]})]})},$={selectFull:{width:"100%"},timeStepQuestionMarkIcon:()=>({svg:{width:12,height:12}})};var W=n(56530),X=n(95368),V=n(35286),Q=n(12760),J=n(30197),q=n(92924),Z=n(32158);const ee=(0,W.Ng)((({entities:{metricsByRunUuid:e}})=>({metricsByRunUuid:e})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.metricsByRunUuid===t.entities.metricsByRunUuid})((({previewData:e,cardConfig:t,metricsByRunUuid:n,groupBy:i,globalLineChartConfig:r})=>{var a,o,l,c,u;const{lineSmoothness:p,selectedXAxisMetricKey:h,xAxisKey:m}=(0,q.x)(t,r),g=(0,s.useMemo)((()=>e.some((e=>e.groupParentInfo))),[e]),{aggregateFunction:f}=i||{},y=(0,s.useMemo)((()=>{if(g){return[...(0,S.compact)(e.map((e=>e.groupParentInfo))).flatMap((e=>e.runUuids)),...(0,S.compact)(e.filter((e=>!e.groupParentInfo&&!e.belongsToGroup)).map((e=>{var t,n;return null!==(t=null===(n=e.runInfo)||void 0===n?void 0:n.runUuid)&&void 0!==t?t:void 0})))]}return(0,S.compact)(e.map((e=>e.runInfo))).map((e=>{var t;return null!==(t=e.runUuid)&&void 0!==t?t:""}))}),[e,g]),v=(0,s.useMemo)((()=>{const e=(e=>{var t;const n=[e.metricKey];var i;if(!(0,R.Iq)()||e.yAxisKey!==d.Kb.EXPRESSION)return null!==(i=e.selectedMetricKeys)&&void 0!==i?i:n;const r=null===(t=e.yAxisExpressions)||void 0===t?void 0:t.reduce(((e,t)=>(t.variables.forEach((t=>e.add(t))),e)),new Set);return void 0===r?n:Array.from(r)})(t),n=h?[h]:[];return e.concat(n)}),[t,h]),{resultsByRunUuid:C,isLoading:_}=(0,Q.S)({runUuids:y,metricKeys:v,enabled:!0,maxResults:320,autoRefreshEnabled:!1}),M=(0,s.useMemo)((()=>e.map((e=>{const n=v.reduce(((n,i)=>{var r,a;const o=null===(r=C[e.uuid])||void 0===r||null===(a=r[i])||void 0===a?void 0:a.metricsHistory;return o&&(n[i]=t.ignoreOutliers?(0,L.c1)(o):o),n}),{});return{...e,metricsHistory:n}}))),[v,C,e,t.ignoreOutliers]),w=(0,J.B)({enabled:g,ungroupedRunsData:M,metricKeys:v,sampledDataResultsByRunUuid:C,aggregateFunction:f,selectedXAxisMetricKey:m===L.fj.METRIC?h:void 0,ignoreOutliers:null!==(a=t.ignoreOutliers)&&void 0!==a&&a}),b=g?w:M,{setTooltip:A,resetTooltip:Y}=(0,V.uN)(t,V.QS.MultipleTracesWithScanline);if(_)return(0,x.Y)(Z.Us,{});const E=(e,t)=>{if(!(0,S.isUndefined)(e)&&!(0,S.isUndefined)(t))return[e,t]},k=E(null===(o=t.range)||void 0===o?void 0:o.xMin,null===(l=t.range)||void 0===l?void 0:l.xMax),D=E(null===(c=t.range)||void 0===c?void 0:c.yMin,null===(u=t.range)||void 0===u?void 0:u.yMax);return(0,x.Y)(X.h,{runsData:b,metricKey:t.metricKey,selectedMetricKeys:t.selectedMetricKeys,scaleType:t.scaleType,xAxisScaleType:t.xAxisScaleType,lineSmoothness:p,xAxisKey:m,selectedXAxisMetricKey:h,displayPoints:t.displayPoints,yAxisExpressions:t.yAxisExpressions,yAxisKey:t.yAxisKey,useDefaultHoverBox:!1,onHover:A,onUnhover:Y,xRange:k,yRange:D})}));var te=n(95119),ne=n(89712);var ie=n(99436);var re=n(79804);var ae=n(21078),oe=n(91270);var se={name:"i1civq",styles:"display:flex;justify-content:center;align-items:center;text-align:center"},le={name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"};const ce=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:i})=>{const{formatMessage:r}=(0,l.A)(),a=(0,s.useCallback)(((e,n)=>{const i=(0,v.tG)(e,"METRIC")?"METRIC":"PARAM",r=(0,v.dz)(e,i);t((e=>({...e,[n]:{key:r,type:i}})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);return(0,s.useEffect)((()=>{var t,r,o;const s=null===n||void 0===n?void 0:n[0],l=null===i||void 0===i?void 0:i[0];null!==(t=e.xaxis)&&void 0!==t&&t.key||(s?a((0,v.GF)("METRIC",s),"xaxis"):l&&a((0,v.GF)("PARAM",l),"xaxis")),null!==(r=e.yaxis)&&void 0!==r&&r.key||(s?a((0,v.GF)("METRIC",s),"yaxis"):l&&a((0,v.GF)("PARAM",l),"yaxis")),null!==(o=e.zaxis)&&void 0!==o&&o.key||(s?a((0,v.GF)("METRIC",s),"zaxis"):l&&a((0,v.GF)("PARAM",l),"zaxis"))}),[e.xaxis,e.yaxis,e.zaxis,a,n,i]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:r({id:"2Us2jl",defaultMessage:"X axis"}),children:(0,x.Y)(_,{value:e.xaxis.key?(0,v.GF)(e.xaxis.type,e.xaxis.key):"",onChange:e=>{a(e,"xaxis")},paramKeyList:i,metricKeyList:n})}),(0,x.Y)(C,{title:r({id:"8YmId5",defaultMessage:"Y axis"}),children:(0,x.Y)(_,{value:e.yaxis.key?(0,v.GF)(e.yaxis.type,e.yaxis.key):"",onChange:e=>{a(e,"yaxis")},paramKeyList:i,metricKeyList:n})}),(0,x.Y)(C,{title:r({id:"cB0/61",defaultMessage:"Z axis"}),children:(0,x.Y)(_,{value:e.zaxis.key?(0,v.GF)(e.zaxis.type,e.zaxis.key):"",onChange:e=>{a(e,"zaxis")},paramKeyList:i,metricKeyList:n})})]})};w.push({value:100,label:(0,x.Y)(c.A,{id:"Bbm59f",defaultMessage:"100"})},{value:250,label:(0,x.Y)(c.A,{id:"W8bOkn",defaultMessage:"250"})},{value:500,label:(0,x.Y)(c.A,{id:"Bnruyp",defaultMessage:"500"})});const de=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:i})=>{const{formatMessage:r}=(0,l.A)(),a=(0,s.useCallback)(((e,n)=>{const i=(0,v.tG)(e,"METRIC")?"METRIC":"PARAM",r=(0,v.dz)(e,i);t((e=>({...e,[n]:{key:r,type:i}})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);return(0,s.useEffect)((()=>{var t,r;const o=null===n||void 0===n?void 0:n[0],s=null===i||void 0===i?void 0:i[0];null!==(t=e.xaxis)&&void 0!==t&&t.key||(o?a((0,v.GF)("METRIC",o),"xaxis"):s&&a((0,v.GF)("PARAM",s),"xaxis")),null!==(r=e.yaxis)&&void 0!==r&&r.key||(o?a((0,v.GF)("METRIC",o),"yaxis"):s&&a((0,v.GF)("PARAM",s),"yaxis"))}),[e.xaxis,e.yaxis,a,n,i]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:r({id:"vBKFgp",defaultMessage:"X axis"}),children:(0,x.Y)(_,{value:e.xaxis.key?(0,v.GF)(e.xaxis.type,e.xaxis.key):"",onChange:e=>{a(e,"xaxis")},paramKeyList:i,metricKeyList:n})}),(0,x.Y)(C,{title:r({id:"DaF+KK",defaultMessage:"Y axis"}),children:(0,x.Y)(_,{value:e.yaxis.key?(0,v.GF)(e.yaxis.type,e.yaxis.key):"",onChange:e=>{a(e,"yaxis")},paramKeyList:i,metricKeyList:n})})]})};var ue=n(94119);var pe={name:"8irbms",styles:"display:inline-flex;align-items:center"};const he=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:a,groupBy:u})=>{const p=(0,s.useCallback)((e=>{t((t=>{const n=t.compareGroups;return n.includes(e)?{...t,compareGroups:n.filter((t=>t!==e))}:{...t,compareGroups:[...n,e]}}))}),[t]),h=(0,s.useCallback)((e=>t((t=>({...t,chartName:e.target.value})))),[t]),m=(0,s.useCallback)((e=>t((t=>({...t,showChangeFromBaseline:e})))),[t]),g=(0,s.useCallback)((e=>t((t=>({...t,showDifferencesOnly:e})))),[t]),{theme:f}=(0,r.u)(),{formatMessage:y}=(0,l.A)();return(0,x.FD)(x.FK,{children:[(0,x.FD)(C,{title:y({id:"46xd2Z",defaultMessage:"Compare"}),children:[(0,x.Y)(o.Checkbox.Group,{id:"checkbox-group",defaultValue:e.compareGroups,children:Object.values(d.K8).map((t=>{var n;const i=!!u&&d.Nf.includes(t);return(0,x.FD)("div",{css:pe,children:[(0,x.Y)(o.Checkbox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_98",value:t,isChecked:null===(n=e.compareGroups)||void 0===n?void 0:n.includes(t),onChange:()=>p(t),disabled:i,children:t},t),i&&(0,x.Y)(o.LegacyInfoTooltip,{title:(0,x.Y)(c.A,{id:"LKAZ2n",defaultMessage:"Disable grouped runs to compare"})})]},t)}))}),(0,x.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",padding:`${f.spacing.md}px 0px`,gap:f.spacing.sm},""),children:[(0,x.Y)(o.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_129",checked:e.showChangeFromBaseline,onChange:m,label:y({id:"9g0sMx",defaultMessage:"Show change from baseline"})}),(0,x.Y)(o.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_138",checked:e.showDifferencesOnly,onChange:g,label:y({id:"nWeQCU",defaultMessage:"Show differences only"})})]})]}),(0,x.Y)(C,{title:y({id:"ZgAOhX",defaultMessage:"Chart name"}),children:(0,x.Y)(I.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_157",value:e.chartName,onChange:h})})]})};var me=n(51254);const ge=({previewData:e,state:t,onStateChange:n,imageKeyList:i})=>{const{stepMarks:r,maxMark:a,minMark:c}=(0,me._)({data:e,selectedImageKeys:t.imageKeys||[]}),d=((0,s.useCallback)((e=>{n((t=>({...t,imageKeys:e})))}),[n]),(0,s.useCallback)((e=>{n((t=>({...t,step:e})))}),[n])),{formatMessage:u}=(0,l.A)(),p=e=>{n((t=>{var n;const i=t;var r;return null!==(n=i.imageKeys)&&void 0!==n&&n.includes(e)?{...i,imageKeys:null===(r=i.imageKeys)||void 0===r?void 0:r.filter((t=>t!==e))}:{...i,imageKeys:[...i.imageKeys||[],e]}}))};return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:u({id:"6Jan3t",defaultMessage:"Images"}),children:(0,x.FD)(o.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigureimagechart.tsx_84",value:t.imageKeys,label:"Images",multiSelect:!0,children:[(0,x.Y)(o.DialogComboboxTrigger,{onClear:()=>{n((e=>({...e,imageKeys:[]})))},minWidth:275}),(0,x.Y)(o.DialogComboboxContent,{matchTriggerWidth:!0,children:(0,x.Y)(o.DialogComboboxOptionList,{children:i.map((e=>{var n;return(0,x.Y)(o.DialogComboboxOptionListCheckboxItem,{value:e,onChange:p,checked:null===(n=t.imageKeys)||void 0===n?void 0:n.includes(e)},e)}))})})]})}),(0,x.Y)(C,{title:"Step",children:(0,x.Y)(K.o,{max:a,min:c,marks:r,value:t.step,disabled:Object.keys(r).length<=1,onChange:d})})]})};var fe=n(21515),ye=n(44105);var ve={name:"1bivvgq",styles:"width:100%;overflow:auto hidden"};const xe=({state:e,onStateChange:t,paramKeyList:n,metricKeysByDataset:i})=>{const{formatMessage:r}=(0,l.A)(),a=(0,s.useMemo)((()=>{var e;return null!==(e=null===i||void 0===i?void 0:i.map((({dataAccessKey:e,metricKey:t,datasetName:n})=>({key:JSON.stringify(["METRIC",e]),dataAccessKey:e,datasetName:n,metricKey:t}))))&&void 0!==e?e:[]}),[i]),o=(0,s.useMemo)((()=>{var e;return null!==(e=null===n||void 0===n?void 0:n.map((e=>({key:JSON.stringify(["PARAM",e]),paramKey:e}))))&&void 0!==e?e:[]}),[n]),c=(0,s.useCallback)((e=>n=>{const i=a.find((({key:e})=>e===n));if(i){const{dataAccessKey:n,datasetName:r,metricKey:a}=i;t((t=>({...t,[e]:{key:a,type:"METRIC",datasetName:r,dataAccessKey:n}})))}const r=o.find((({key:e})=>e===n));r&&t((t=>({...t,[e]:{key:r.paramKey,type:"PARAM"}})))}),[t,a,o]);(0,s.useEffect)((()=>{for(const n of["xaxis","yaxis"]){var t;null!==(t=e[n])&&void 0!==t&&t.key||(null!==a&&void 0!==a&&a[0]?c(n)(a[0].key):null!==o&&void 0!==o&&o[0]&&c(n)(o[0].key))}}),[e,a,o,c]);const d=(0,s.useCallback)((t=>{if("METRIC"===e[t].type){const n=a.find((({dataAccessKey:n})=>n===e[t].dataAccessKey));if(n)return n.key}if("PARAM"===e[t].type){const n=o.find((({paramKey:n})=>n===e[t].key));if(n)return n.key}return""}),[e,a,o]),u=(0,s.useMemo)((()=>d("xaxis")),[d]),p=(0,s.useMemo)((()=>d("yaxis")),[d]);return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:r({id:"vBKFgp",defaultMessage:"X axis"}),children:(0,x.Y)(M,{value:u,onChange:c("xaxis"),metricOptions:a,paramOptions:o,id:"mlflow.charts.chart_configure.scatter.x_axis"})}),(0,x.Y)(C,{title:r({id:"DaF+KK",defaultMessage:"Y axis"}),children:(0,x.Y)(M,{value:p,onChange:c("yaxis"),metricOptions:a,paramOptions:o,id:"mlflow.charts.chart_configure.scatter.y_axis"})})]})};var Ce=n(98751);const _e={[d.zL.BAR]:({previewData:e,cardConfig:t})=>{var n;const{resetTooltip:i,setTooltip:r}=(0,V.uN)(t),a=null!==(n=t.dataAccessKey)&&void 0!==n?n:t.metricKey;return(0,x.Y)(ne.u,{useDefaultHoverBox:!1,displayRunNames:!1,displayMetricKey:!1,metricKey:a,runsData:e,margin:te.J,onHover:r,onUnhover:i})},[d.zL.CONTOUR]:({previewData:e,cardConfig:t})=>{const{resetTooltip:n,setTooltip:i}=(0,V.uN)(t),r=(0,s.useMemo)((()=>{const{xaxis:e,yaxis:n,zaxis:i}=t;return JSON.stringify({xaxis:e,yaxis:n,zaxis:i})}),[t]);return(0,x.Y)(ie.a,{xAxis:t.xaxis,yAxis:t.yaxis,zAxis:t.zaxis,runsData:e,onHover:i,onUnhover:n,useDefaultHoverBox:!1},r)},[d.zL.LINE]:ee,[d.zL.PARALLEL]:({previewData:e,cardConfig:t,groupBy:n})=>{const i=(0,oe.ad)(t),{setTooltip:r,resetTooltip:a}=(0,V.uN)(t);if((0,s.useMemo)((()=>{var n;return null===(n=t.selectedParams)||void 0===n?void 0:n.some((t=>null===e||void 0===e?void 0:e.some((e=>{var n;return isNaN(Number(null===(n=e.params[t])||void 0===n?void 0:n.value))}))),[t.selectedParams,e])}),[t.selectedParams,e])&&n)return(0,x.Y)("div",{css:se,children:(0,x.Y)(c.A,{id:"kTkJkb",defaultMessage:"Parallel coordinates chart does not support aggregated string values. Use other parameters or disable run grouping to continue."})});const l=i?(0,oe.fM)(e,t.selectedParams,t.selectedMetrics):[];return i?l.length?(0,x.Y)(ae.A,{selectedMetrics:t.selectedMetrics,selectedParams:t.selectedParams,data:l,axesRotateThreshold:6,onHover:r,onUnhover:a,fallback:(0,x.Y)(Z.Us,{})}):(0,x.Y)(o.Empty,{description:(0,x.Y)(c.A,{id:"lTrmPI",defaultMessage:"No matching data found for the available runs."}),image:(0,x.Y)(o.NoIcon,{})}):(0,x.Y)("div",{css:le,children:"Select at least two metrics and params first"})},[d.zL.SCATTER]:({previewData:e,cardConfig:t})=>{const{resetTooltip:n,setTooltip:i}=(0,V.uN)(t),r=(0,s.useMemo)((()=>{const{xaxis:e,yaxis:n}=t;return JSON.stringify({xaxis:e,yaxis:n})}),[t]);return(0,x.Y)(re.i,{xAxis:t.xaxis,yAxis:t.yaxis,runsData:e,onHover:i,onUnhover:n,useDefaultHoverBox:!1},r)},[d.zL.DIFFERENCE]:Ce.I,[d.zL.IMAGE]:({previewData:e,cardConfig:t,setCardConfig:n,groupBy:i})=>{var r;if(e.some((e=>Boolean(e.tags[ye.Cr])))&&0===(null===t||void 0===t||null===(r=t.imageKeys)||void 0===r?void 0:r.length))return(0,x.Y)(o.Empty,{title:(0,x.Y)(c.A,{id:"qN1Uqj",defaultMessage:"No images configured for preview"}),description:(0,x.Y)(c.A,{id:"Zpi7wv",defaultMessage:"Please use controls on the left to select images to be compared"})});const a=(0,x.Y)(fe.f,{previewData:e,cardConfig:t,setCardConfig:n,groupBy:i});return(0,x.Y)("div",{css:ve,children:a})}};var Me={name:"1uahl7",styles:"width:1280px"},we={name:"1d3w5wq",styles:"width:100%"},be={name:"1nbuksq",styles:"overflow:auto;flex-grow:1"},Se={name:"1x1yg5d",styles:"min-height:500px;height:100%;width:500px;padding:32px 0px;display:flex"};const Ae=({onCancel:e,onSubmit:t,config:n,chartRunData:v,metricKeyList:_,metricKeysByDataset:M,paramKeyList:w,groupBy:b,supportedChartTypes:A,globalLineChartConfig:Y})=>{const k=e=>!A||A.includes(e),{theme:I}=(0,r.u)(),R=`1px solid ${I.colors.actionDefaultBorderDefault}`,[L,K]=(0,s.useState)({...n,isGenerated:!1}),T=Boolean(L.uuid),F=(0,s.useCallback)((e=>{if(!e)return;const t=d.i$.getEmptyChartCardByType(e,!1);t&&K(t)}),[]),O=(0,s.useMemo)((()=>v.filter((({hidden:e})=>!e)).reverse()),[v]),B=(0,s.useMemo)((()=>{const e=new Set;return O.forEach((t=>{Object.keys(t.images).forEach((t=>{e.add(t)}))})),Array.from(e).sort()}),[O]),{formatMessage:P}=(0,l.A)();let N=!1;if(L.type===d.zL.LINE){var z;N=0===(null!==(z=L.selectedMetricKeys)&&void 0!==z?z:[]).length}return(0,x.Y)(a.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsconfiguremodal.tsx_232",visible:!0,onCancel:e,onOk:()=>t(L),title:P(T?{id:"kBXHTA",defaultMessage:"Edit chart"}:{id:"6y36Fr",defaultMessage:"Add new chart"}),okButtonProps:{"data-testid":"experiment-view-compare-runs-chart-modal-confirm",disabled:N},cancelText:P({id:"TlVXcS",defaultMessage:"Cancel"}),okText:P(T?{id:"vPnoNk",defaultMessage:"Save changes"}:{id:"UzZf+2",defaultMessage:"Add chart"}),size:"wide",css:Me,dangerouslySetAntdProps:{bodyStyle:{overflowY:"hidden",display:"flex"}},children:(0,x.FD)("div",{css:(0,i.AH)({display:"flex",width:"100%",gridTemplateColumns:"300px 1fr",gap:I.spacing.md,borderTop:R,borderBottom:R},""),children:[(0,x.FD)("div",{css:(0,i.AH)({overflowY:"auto",borderRight:R,padding:`${I.spacing.md}px ${I.spacing.md}px ${I.spacing.md}px 0px`,width:"300px"},""),children:[!T&&(0,x.Y)(C,{title:"Chart type",children:(0,x.FD)(o.SimpleSelect,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsconfiguremodal.tsx_296",id:"chart-type-select",css:we,value:L.type,onChange:({target:e})=>{const t=e.value;Object.values(d.zL).includes(t)&&F(t)},children:[k(d.zL.BAR)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.BAR,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(u.h,{}),(0,x.Y)(c.A,{id:"gdK07H",defaultMessage:"Bar chart"})]})}),k(d.zL.SCATTER)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.SCATTER,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(g.h,{}),(0,x.Y)(c.A,{id:"Q0i5xG",defaultMessage:"Scatter chart"})]})}),k(d.zL.LINE)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.LINE,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(h.h,{}),(0,x.Y)(c.A,{id:"CyTYL6",defaultMessage:"Line chart"})]})}),k(d.zL.PARALLEL)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.PARALLEL,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(m.h,{}),(0,x.Y)(c.A,{id:"FC9mcS",defaultMessage:"Parallel coordinates"})]})}),k(d.zL.CONTOUR)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.CONTOUR,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(p.h,{}),(0,x.Y)(c.A,{id:"6XfILf",defaultMessage:"Contour chart"})]})}),k(d.zL.DIFFERENCE)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.DIFFERENCE,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(f.h,{}),(0,x.Y)(c.A,{id:"G5mMJI",defaultMessage:"Difference view"})]})}),k(d.zL.IMAGE)&&(0,x.Y)(o.SimpleSelectOption,{value:d.zL.IMAGE,children:(0,x.FD)("div",{css:Ye.chartTypeOption(I),children:[(0,x.Y)(y.h,{}),(0,x.Y)(c.A,{id:"5m2VPy",defaultMessage:"Image grid"})]})})]})}),(U=L.type,U===d.zL.BAR?(0,x.Y)(E,{metricKeyList:_,metricKeysByDataset:M,state:L,onStateChange:K}):U===d.zL.CONTOUR?(0,x.Y)(ce,{metricKeyList:_,paramKeyList:w,state:L,onStateChange:K}):U===d.zL.LINE?(0,x.Y)(j,{metricKeyList:_,state:L,onStateChange:K}):U===d.zL.PARALLEL?(0,x.Y)(D,{metricKeyList:_,paramKeyList:w,state:L,onStateChange:K}):U===d.zL.SCATTER?(0,S.isEmpty)(M)?(0,x.Y)(de,{metricKeyList:_,paramKeyList:w,state:L,onStateChange:K}):(0,x.Y)(xe,{paramKeyList:w,metricKeysByDataset:M,state:L,onStateChange:K}):U===d.zL.DIFFERENCE?(0,x.Y)(he,{metricKeyList:_,paramKeyList:w,state:L,onStateChange:K,groupBy:b}):U===d.zL.IMAGE?(0,x.Y)(ge,{previewData:O,imageKeyList:B,state:L,onStateChange:K}):null)]}),(0,x.Y)("div",{css:be,children:(0,x.Y)(V.W,{contextData:{runs:v},component:ue.X,hoverOnly:!0,children:(0,x.Y)("div",{css:Se,children:(e=>{if(!e)return null;const t=_e[e];return t?(0,x.Y)(t,{previewData:O,cardConfig:L,groupBy:b,setCardConfig:K,globalLineChartConfig:Y}):null})(L.type)})})})]})});var U},Ye={chartTypeOption:e=>({display:"grid",gridTemplateColumns:`${e.general.iconSize+e.spacing.xs}px 1fr`,gap:e.spacing.xs,alignItems:"center"}),field:{display:"grid",gridTemplateColumns:"80px 1fr",marginBottom:16}}},58355:function(e,t,n){n.d(t,{A:function(){return i}});class i{static getStoreForComponent(e,t){return new r([e,t].join("-"),"localStorage")}static getSessionScopedStoreForComponent(e,t){return new r([e,t].join("-"),"sessionStorage")}}i.version="1.1";class r{constructor(e,t){this.scope=void 0,this.storageObj=void 0,this.scope=e,this.storageObj="localStorage"===t?window.localStorage:window.sessionStorage}loadComponentState(){const e=this.getItem(r.reactComponentStateKey);return e?JSON.parse(e):{}}saveComponentState(e){const t="function"===typeof e.toJSON?e.toJSON():e;this.setItem(r.reactComponentStateKey,JSON.stringify(t))}withScopePrefix(e){return["MLflowLocalStorage",i.version,this.scope,e].join("-")}setItem(e,t){this.storageObj.setItem(this.withScopePrefix(e),t)}getItem(e){return this.storageObj.getItem(this.withScopePrefix(e))}}r.reactComponentStateKey="ReactComponentState"},62750:function(e,t,n){n.d(t,{h:function(){return d}});var i,r,a,o,s=n(46709);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(null,arguments)}function c({title:e,titleId:t,...n},c){return s.createElement("svg",l({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:c,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,i||(i=s.createElement("rect",{x:.5,y:.5,width:15,height:15,stroke:"#C4C4C4"})),r||(r=s.createElement("line",{x1:8.5,y1:.800049,x2:8.5,y2:16,stroke:"#C4C4C4"})),a||(a=s.createElement("line",{x1:16,y1:5.69995,x2:-2.63656e-8,y2:5.69995,stroke:"#C4C4C4"})),o||(o=s.createElement("line",{x1:16,y1:10.9,x2:-2.63656e-8,y2:10.9,stroke:"#C4C4C4"})))}const d=s.forwardRef(c);n.p},63591:function(e,t,n){n.d(t,{TB:function(){return y},cK:function(){return g},e9:function(){return x},iH:function(){return v},jA:function(){return f},t4:function(){return m}});var i=n(76118),r=n(673),a=n(44105),o=n(28126),s=n(67069),l=n(90142),c=n(5690),d=n(43233),u=n(31655);const p={ALL:null,LAST_HOUR:36e5,LAST_24_HOURS:864e5,LAST_7_DAYS:6048e5,LAST_30_DAYS:2592e6,LAST_YEAR:31104e6},h=new RegExp(`(${["attribute","attributes","attr","run","metric","metrics","param","params","parameter","tag","tags","dataset","datasets","model","models"].join("|")})\\.\\S+\\s*(>|<|>=|<=|=|!=| like| ilike| rlike| in)`,"i"),m=3e4,g=e=>h.test(e),f=e=>`attributes.run_name RLIKE '${e.replace(/'/g,"\\'")}'`,y=(e,t,n,i,r)=>{const l=t.lifecycleFilter===s.gy.ACTIVE?o.qi.ACTIVE_ONLY:o.qi.DELETED_ONLY,{runsPinned:d}=t,h=(({orderByKey:e,orderByAsc:t})=>e?t?[e+" ASC"]:[e+" DESC"]:[])(t),m=(({startTime:e},t)=>{const n=p[e];return e&&n&&"ALL"!==e?"attributes.start_time >= "+(t-n):null})(t,n),y=(({searchFilter:e},t,n)=>{if((0,u.ey)()&&e.length>0&&!g(e))return f(e);const i=[];return e&&i.push(e),t&&i.push(t),n&&i.push(n),0!==i.length?i.join(" and "):void 0})(t,m,(({datasetsFilter:e})=>0===e.length?null:`dataset.name IN (${e.map((e=>`'${e.name}'`)).join(",")}) AND dataset.digest IN (${e.map((e=>`'${e.digest}'`)).join(",")})`)(t));return{experimentIds:e,filter:y,runViewType:l,orderBy:h,shouldFetchParents:(({orderByKey:e,searchFilter:t})=>!e&&!t||e===a.T8.DATE)(t),pageToken:i,runsPinned:d,maxResults:r||c.Aj}},v=(e,t,n)=>{const a=e.filter((e=>e.data.tags.some((e=>e.key===l.tS)))),o=(0,i.chunk)(a,r.SF).map((e=>{const i=t({run_id:e.map((e=>e.info.run_id))},(0,d.yk)());return n(i)}));return Promise.all(o)},x=e=>{const{lifecycleFilter:t,modelVersionFilter:n,datasetsFilter:i,searchFilter:r,startTime:o}=e;return Boolean(t!==a.ae||n!==a.eR||0!==i.length||r||o!==a.xx)}},63908:function(e,t,n){n.d(t,{Qr:function(){return l},U1:function(){return g},Xb:function(){return p},Y7:function(){return a},bO:function(){return y},fx:function(){return o},ib:function(){return f},yv:function(){return c},z7:function(){return m}});var i=n(76118);const r=()=>n.e(9547).then(n.t.bind(n,29547,23)),a=(e,t)=>{const n=(0,i.truncate)(e,{length:t});return(0,i.takeWhile)(n,(e=>"\n"!==e)).join("")},o=(e,t)=>{if(e.length>t){const n=Math.floor((t-3)/2),i=t-3-n;return e.substring(0,n)+"..."+e.substring(e.length-i,e.length)}return e},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=e=>{let t="",n=0;const i=d(e);for(;n<i.length;){const e=i.charCodeAt(n++),r=i.charCodeAt(n++),a=i.charCodeAt(n++),o=e>>2,l=(3&e)<<4|r>>4;let c=(15&r)<<2|a>>6,d=63&a;isNaN(r)?(d=64,c=d):isNaN(a)&&(d=64),t=t+s.charAt(o)+s.charAt(l)+s.charAt(c)+s.charAt(d)}return t},c=e=>{let t="",n=0;const i=(null===e||void 0===e?void 0:e.replace(/[^A-Za-z0-9+/=]/g,""))||"";for(;n<i.length;){const e=s.indexOf(i.charAt(n++)),r=s.indexOf(i.charAt(n++)),a=s.indexOf(i.charAt(n++)),o=s.indexOf(i.charAt(n++)),l=e<<2|r>>4,c=(15&r)<<4|a>>2,d=(3&a)<<6|o;t+=String.fromCharCode(l),64!==a&&(t+=String.fromCharCode(c)),64!==o&&(t+=String.fromCharCode(d))}return u(t)},d=(e="")=>{const t=e.replace(/\r\n/g,"\n");let n="";for(let i=0;i<t.length;i++){const e=t.charCodeAt(i);n+=e<128?String.fromCharCode(e):e>127&&e<2048?String.fromCharCode(e>>6|192)+String.fromCharCode(63&e|128):String.fromCharCode(e>>12|224)+String.fromCharCode(e>>6&63|128)+String.fromCharCode(63&e|128)}return n},u=(e="")=>{let t="",n=0;for(;n<e.length;){const i=e.charCodeAt(n);if(i<128)t+=String.fromCharCode(i),n++;else if(i>191&&i<224){const r=e.charCodeAt(n+1);t+=String.fromCharCode((31&i)<<6|63&r),n+=2}else{const r=e.charCodeAt(n+1),a=e.charCodeAt(n+2);t+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&a),n+=3}}return t},p=e=>crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then((e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join(""))),h="deflate;",m=async e=>{const t=(await r()).deflate(e);if("undefined"!==typeof Buffer){const e=Buffer.from(t).toString("base64");return`${h}${e}`}const n=Array.from(t,(e=>String.fromCodePoint(e))).join("");return`${h}${btoa(n)}`},g=async e=>{const t=await r();if(!e.startsWith(h))throw new Error("Invalid compressed text, payload header invalid");const n=e.slice(8);if("undefined"!==typeof Buffer){const e=Buffer.from(n,"base64");return t.inflate(e,{to:"string"})}const i=atob(n);return t.inflate(Uint8Array.from(i,(e=>{var t;return null!==(t=e.codePointAt(0))&&void 0!==t?t:0})),{to:"string"})},f=e=>e.startsWith(h),y=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},72509:function(e,t,n){n.d(t,{h:function(){return l}});var i,r,a=n(46709);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(null,arguments)}function s({title:e,titleId:t,...n},s){return a.createElement("svg",o({width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,i||(i=a.createElement("path",{d:"M4.38977 15.717L8.79655 10.8113L12.5254 14.9622L19.644 7.03772",stroke:"#338ECC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),r||(r=a.createElement("path",{d:"M1 1V21H21",stroke:"#A3AEB8",strokeLinecap:"round"})))}const l=a.forwardRef(s);n.p},75155:function(e,t,n){n.d(t,{h:function(){return c}});var i,r,a,o=n(46709);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(null,arguments)}function l({title:e,titleId:t,...n},l){return o.createElement("svg",s({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,i||(i=o.createElement("path",{d:"M1 1V17H17",stroke:"#A3AEB8",strokeLinecap:"round"})),r||(r=o.createElement("path",{d:"M12.9749 4.94148C12.9188 4.71702 12.221 4.73284 12.0618 4.71515C11.1779 4.61693 10.2817 4.66052 9.39271 4.66052C8.11919 4.66052 7.15648 4.97961 6.24753 5.90922C5.86197 6.30355 5.5235 6.77684 5.23295 7.24378C4.99434 7.62726 4.65544 7.93479 4.40569 8.31299C3.93777 9.02154 3.56281 9.80723 3.56281 10.6699C3.56281 11.1806 3.37479 11.598 3.76962 12.0669C4.19449 12.5714 4.6863 12.9507 5.27978 13.2649C5.88594 13.5858 6.42202 13.8619 7.13723 13.8619C7.74338 13.8619 8.34952 13.8619 8.95567 13.8619C9.45735 13.8619 9.96042 13.8731 10.4619 13.8619C11.1412 13.8468 11.9484 13.1895 12.413 12.7381C13.581 11.6035 14.2393 9.88016 14.2393 8.24665C14.2393 7.69923 14.3797 7.17063 14.3797 6.62723C14.3797 6.40084 14.4779 5.87696 14.2744 5.71411C13.9268 5.43606 13.5785 5.13789 13.1857 4.94148",stroke:"#338ECC",strokeLinecap:"round"})),a||(a=o.createElement("path",{d:"M11.9213 6.83789C11.2761 6.83789 10.6309 6.83789 9.98577 6.83789C9.19776 6.83789 8.80182 7.44144 8.2844 7.97734C7.58163 8.70521 7.28544 9.67306 7.28544 10.666C7.28544 10.9641 7.22004 11.177 7.46104 11.3645C7.6831 11.5372 8.10719 11.6142 8.37806 11.6142C9.07316 11.6142 9.91042 11.5583 10.4462 11.0523C10.9277 10.5975 11.473 10.3701 11.8159 9.75284C12.045 9.34042 12.2022 8.86324 12.2022 8.38317C12.2022 8.14903 12.2022 7.9149 12.2022 7.68077C12.2022 7.4241 12.0208 7.38817 11.9213 7.18909",stroke:"#338ECC",strokeLinecap:"round"})))}const c=o.forwardRef(l);n.p},99478:function(e,t,n){n.d(t,{G:function(){return p},S:function(){return d}});var i=n(46664),r=n(46709),a=n(59126),o=n(72943),s=n(17066),l=n(24014),c=n(73408);const d=({dragGroupKey:e,dragKey:t,onDrop:n,disabled:i=!1})=>{const s=(0,r.useRef)(n);s.current=n;const[{isOver:l,draggedItem:c},d]=(0,a.H)({canDrop:()=>!i,accept:`dnd-${e}`,drop:({key:e},n)=>{e===t||n.didDrop()||s.current(e,t)},collect:e=>({isOver:e.isOver({shallow:!0}),draggedItem:e.getItem()})},[i,e,t]),[{isDragging:u},p,h]=(0,o.i)({canDrag:()=>!i,type:`dnd-${e}`,item:{key:t,groupKey:e},collect:e=>({isDragging:e.isDragging()})},[i,e,t]);return{dropTargetRef:d,dragHandleRef:p,dragPreviewRef:h,isDragging:u,isOver:l,isDraggingOtherGroup:Boolean(c&&c.groupKey!==e)}};var u={name:"49aokf",styles:"display:contents"};const p=({children:e})=>{const t=(0,r.useRef)(null),[n,a]=(0,r.useState)(null);return(0,r.useLayoutEffect)((()=>{const e=t.current,n=(0,i.b)(l.t2,void 0,{rootElement:e});return a(n),()=>{n.getBackend().teardown()}}),[]),(0,c.Y)("div",{css:u,ref:t,children:n&&(0,c.Y)(s.Q,{manager:n,children:e})})}}}]);